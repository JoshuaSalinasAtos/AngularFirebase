(self.webpackChunkangularProyect=self.webpackChunkangularProyect||[]).push([[179],{2011:(Tt,Me,x)=>{"use strict";x.d(Me,{hO:()=>Ue,xv:()=>ge,Dh:()=>ce,GT:()=>_e,cc:()=>xe,on:()=>V,pX:()=>me});var _=x(5e3),O=x(127),N=x(4027);Tt=x.hmd(Tt);const oe=["ngOnDestroy"],me=(ie,ke,Re,ue={})=>new Proxy(ie,{get:(Ce,ye)=>Re.runOutsideAngular(()=>{var Qe;if(ie[ye])return(null===(Qe=null==ue?void 0:ue.spy)||void 0===Qe?void 0:Qe.get)&&ue.spy.get(ye,ie[ye]),ie[ye];if(oe.indexOf(ye)>-1)return()=>{};const J=ke.toPromise().then(ct=>{const Z=ct&&ct[ye];return"function"==typeof Z?Z.bind(ct):Z&&Z.then?Z.then(pe=>Re.run(()=>pe)):Re.run(()=>Z)});return new Proxy(()=>{},{get:(ct,Z)=>J[Z],apply:(ct,Z,pe)=>J.then(ae=>{var fe;const $e=ae&&ae(...pe);return(null===(fe=null==ue?void 0:ue.spy)||void 0===fe?void 0:fe.apply)&&ue.spy.apply(ye,pe,$e),$e})})})}),_e=(ie,ke)=>{ke.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(ue=>{Object.defineProperty(ie.prototype,ue,Object.getOwnPropertyDescriptor(Re.prototype||Re,ue))})})};class se{constructor(ke){return ke}}const ce=new _.OlP("angularfire2.app.options"),ge=new _.OlP("angularfire2.app.name");function V(ie,ke,Re){const Ce="object"==typeof Re&&Re||{};Ce.name=Ce.name||"string"==typeof Re&&Re||"[DEFAULT]";const Qe=O.Z.apps.filter(J=>J&&J.name===Ce.name)[0]||ke.runOutsideAngular(()=>O.Z.initializeApp(ie,Ce));try{JSON.stringify(ie)!==JSON.stringify(Qe.options)&&U("error",`${Qe.name} Firebase App already initialized with different options${Tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(J){}return new se(Qe)}const U=(ie,...ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ie](...ke)},Y={provide:se,useFactory:V,deps:[ce,_.R0b,[new _.FiY,ge]]};let Ue=(()=>{class ie{constructor(Re){O.Z.registerVersion("angularfire",N.q4.full,"core"),O.Z.registerVersion("angularfire",N.q4.full,"app-compat"),O.Z.registerVersion("angular",_.q4F.full,Re.toString())}static initializeApp(Re,ue){return{ngModule:ie,providers:[{provide:ce,useValue:Re},{provide:ge,useValue:ue}]}}}return ie.\u0275fac=function(Re){return new(Re||ie)(_.LFG(_.Lbi))},ie.\u0275mod=_.oAB({type:ie}),ie.\u0275inj=_.cJS({providers:[Y]}),ie})();function xe(ie,ke,Re,ue,Ce){const[,ye,Qe]=globalThis.\u0275AngularfireInstanceCache.find(J=>J[0]===ie)||[];if(ye)return function je(ie,ke){try{return ie.toString()===ke.toString()}catch(Re){return ie===ke}}(Ce,Qe)||(G("error",`${ke} was already initialized on the ${Re} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),G("warn",{is:Ce,was:Qe})),ye;{const J=ue();return globalThis.\u0275AngularfireInstanceCache.push([ie,J,Ce]),J}}const Le=!!Tt.hot,G=(ie,...ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ie](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(Tt,Me,x)=>{"use strict";x.d(Me,{q4:()=>G,iC:()=>yn,HU:()=>Dt,vb:()=>ae,JM:()=>pe,nk:()=>Z,n1:()=>J,_J:()=>ct,u3:()=>kt});var _=x(5e3),O=x(5867),N=x(3226),oe=x(2375),me=x(6148),_e=x(4408),ce=x(7565);const V=new class ge extends ce.v{}(class se extends _e.o{constructor(gt,mt){super(gt,mt),this.scheduler=gt,this.work=mt}schedule(gt,mt=0){return mt>0?super.schedule(gt,mt):(this.delay=mt,this.state=gt,this.scheduler.flush(this),this)}execute(gt,mt){return mt>0||this.closed?super.execute(gt,mt):this._execute(gt,mt)}requestAsyncId(gt,mt,jt=0){return null!=jt&&jt>0||null==jt&&this.delay>0?super.requestAsyncId(gt,mt,jt):gt.flush(this)}});var Y=x(4986),Ue=x(8306),xe=x(8505),je=x(9468),Le=x(5363);const G=new _.GfV("7.2.1"),ie="__angularfire_symbol__analyticsIsSupportedValue",ke="__angularfire_symbol__analyticsIsSupported",Re="__angularfire_symbol__remoteConfigIsSupportedValue",ue="__angularfire_symbol__remoteConfigIsSupported",Ce="__angularfire_symbol__messagingIsSupportedValue",ye="__angularfire_symbol__messagingIsSupported";globalThis[ke]||(globalThis[ke]=(0,me.Gb)().then(ze=>globalThis[ie]=ze).catch(()=>globalThis[ie]=!1)),globalThis[ye]||(globalThis[ye]=(0,oe.Gb)().then(ze=>globalThis[Ce]=ze).catch(()=>globalThis[Ce]=!1)),globalThis[ue]||(globalThis[ue]=(0,N.Gb)().then(ze=>globalThis[Re]=ze).catch(()=>globalThis[Re]=!1));const Qe=ze=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${ze} in the constructor, first ensure that ${ze} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${ze})\`.`,J={async:()=>globalThis[ye],sync:()=>{const ze=globalThis[Ce];if(void 0===ze)throw new Error(Qe("Messaging"));return ze}},ct={async:()=>globalThis[ue],sync:()=>{const ze=globalThis[Re];if(void 0===ze)throw new Error(Qe("RemoteConfig"));return ze}},Z={async:()=>globalThis[ke],sync:()=>{const ze=globalThis[ie];if(void 0===ze)throw new Error(Qe("Analytics"));return ze}};function pe(ze,gt,mt){if(gt){if(1===gt.length)return gt[0];const qt=gt.filter(Cn=>Cn.app===mt);if(1===qt.length)return qt[0]}return mt.container.getProvider(ze).getImmediate({optional:!0})}const ae=(ze,gt)=>{const mt=gt?[gt]:(0,O.C6)(),jt=[];return mt.forEach(Xt=>{Xt.container.getProvider(ze).instances.forEach(Cn=>{jt.includes(Cn)||jt.push(Cn)})}),jt};function fe(){}class $e{constructor(gt,mt=V){this.zone=gt,this.delegate=mt}now(){return this.delegate.now()}schedule(gt,mt,jt){const Xt=this.zone;return this.delegate.schedule(function(Cn){Xt.runGuarded(()=>{gt.apply(this,[Cn])})},mt,jt)}}class le{constructor(gt){this.zone=gt,this.task=null}call(gt,mt){const jt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fe,{},fe,fe)),mt.pipe((0,xe.b)({next:jt,complete:jt,error:jt})).subscribe(gt).add(jt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dt=(()=>{class ze{constructor(mt){this.ngZone=mt,this.outsideAngular=mt.runOutsideAngular(()=>new $e(Zone.current)),this.insideAngular=mt.run(()=>new $e(Zone.current,Y.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ze.\u0275fac=function(mt){return new(mt||ze)(_.LFG(_.R0b))},ze.\u0275prov=_.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})();function Bt(){const ze=globalThis.\u0275AngularFireScheduler;if(!ze)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return ze}function _n(ze){return Bt().ngZone.runOutsideAngular(()=>ze())}function ut(ze){return Bt().ngZone.run(()=>ze())}function yn(ze){return Bt(),function Bn(ze){return function(mt){return(mt=mt.lift(new le(ze.ngZone))).pipe((0,je.R)(ze.outsideAngular),(0,Le.Q)(ze.insideAngular))}}(Bt())(ze)}const Ht=(ze,gt)=>function(){const jt=arguments;return gt&&setTimeout(()=>{"scheduled"===gt.state&&gt.invoke()},10),ut(()=>ze.apply(void 0,jt))},kt=(ze,gt)=>function(){let mt;const jt=arguments;for(let qt=0;qt<arguments.length;qt++)"function"==typeof jt[qt]&&(gt&&(mt||(mt=ut(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fe,{},fe,fe)))),jt[qt]=Ht(jt[qt],mt));const Xt=_n(()=>ze.apply(this,jt));if(!gt){if(Xt instanceof Ue.y){const qt=Bt();return Xt.pipe((0,je.R)(qt.outsideAngular),(0,Le.Q)(qt.insideAngular))}return ut(()=>Xt)}return Xt instanceof Ue.y?Xt.pipe(yn):Xt instanceof Promise?ut(()=>new Promise((qt,Cn)=>Xt.then(xn=>ut(()=>qt(xn)),xn=>ut(()=>Cn(xn))))):"function"==typeof Xt&&mt?function(){return setTimeout(()=>{mt&&"scheduled"===mt.state&&mt.invoke()},10),Xt.apply(this,arguments)}:ut(()=>Xt)}},4929:(Tt,Me,x)=>{"use strict";x.d(Me,{$:()=>mp,A:()=>U,E:()=>L,G:()=>dn,I:()=>xs,K:()=>st,L:()=>hp,M:()=>Xm,N:()=>mu,P:()=>Ou,Q:()=>Hl,R:()=>Ni,T:()=>$i,U:()=>ua,V:()=>t_,W:()=>O0,X:()=>Vr,Y:()=>Kl,Z:()=>si,_:()=>Ms,a:()=>ps,a0:()=>r_,a1:()=>i_,a2:()=>He,a3:()=>k0,a4:()=>Jl,a5:()=>Hi,a6:()=>Zd,a7:()=>F0,a8:()=>_p,a9:()=>Ps,aA:()=>uo,aB:()=>gc,aC:()=>Ke,aG:()=>br,aJ:()=>_u,aa:()=>ha,ab:()=>s_,ae:()=>Qd,af:()=>a_,ag:()=>Jd,aj:()=>gp,ak:()=>d_,am:()=>eh,an:()=>rc,ao:()=>Xn,ap:()=>Z,aq:()=>tn,ar:()=>_t,as:()=>Re,at:()=>ko,au:()=>Da,av:()=>ue,aw:()=>J,ax:()=>ae,ay:()=>Xe,az:()=>Bs,b:()=>wp,c:()=>hc,d:()=>E_,e:()=>V0,f:()=>Mp,g:()=>pn,h:()=>Pp,i:()=>_a,j:()=>Ta,k:()=>Ws,l:()=>lr,m:()=>R_,n:()=>M_,o:()=>ce,r:()=>Mu,s:()=>No,t:()=>Kn,u:()=>_s,z:()=>xe});var _=x(5861),O=x(2090),N=x(9681),oe=x(655),me=x(1877),_e=x(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},U={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function Y(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ie=new me.Yd("@firebase/auth");function ke(v,...p){ie.logLevel<=me.in.ERROR&&ie.error(`Auth (${N.SDK_VERSION}): ${v}`,...p)}function Re(v,...p){throw Qe(v,...p)}function ue(v,...p){return Qe(v,...p)}function Ce(v,p,g){const I=Object.assign(Object.assign({},je()),{[p]:g});return new O.LL("auth","Firebase",I).create(p,{appName:v.name})}function ye(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Re(v,"argument-error"),Ce(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(v,...p){if("string"!=typeof v){const g=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return Le.create(v,...p)}function J(v,p,...g){if(!v)throw Qe(p,...g)}function ct(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ke(p),new Error(p)}function Z(v,p){v||ct(p)}const pe=new Map;function ae(v){Z(v instanceof Function,"Expected a class definition");let p=pe.get(v);return p?(Z(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,pe.set(v,p),p)}function le(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Dt(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class pt{constructor(p,g){this.shortDelay=p,this.longDelay=g,Z(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function _n(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gt(v,p){Z(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class yn{static initialize(p,g,I){this.fetchImpl=p,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ht=new pt(3e4,6e4);function kt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function ze(v,p,g,I){return gt.apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(v,p,g,I,S={}){return mt(v,S,(0,_.Z)(function*(){let M={},te={};I&&("GET"===p?te=I:M={body:JSON.stringify(I)});const We=(0,O.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),wt=yield v._getAdditionalHeaders();return wt["Content-Type"]="application/json",v.languageCode&&(wt["X-Firebase-Locale"]=v.languageCode),yn.fetch()(Cn(v,v.config.apiHost,g,We),Object.assign({method:p,headers:wt,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function mt(v,p,g){return jt.apply(this,arguments)}function jt(){return(jt=(0,_.Z)(function*(v,p,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Bn),p);try{const S=new xn(v),M=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const te=yield M.json();if("needConfirmation"in te)throw bn(v,"account-exists-with-different-credential",te);if(M.ok&&!("errorMessage"in te))return te;{const We=M.ok?te.errorMessage:te.error.message,[wt,Ut]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw bn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===wt)throw bn(v,"email-already-in-use",te);const sn=I[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(Ut)throw Ce(v,sn,Ut);Re(v,sn)}}catch(S){if(S instanceof O.ZR)throw S;Re(v,"network-request-failed")}})).apply(this,arguments)}function Xt(v,p,g,I){return qt.apply(this,arguments)}function qt(){return(qt=(0,_.Z)(function*(v,p,g,I,S={}){const M=yield ze(v,p,g,I,S);return"mfaPendingCredential"in M&&Re(v,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Cn(v,p,g,I){const S=`${p}${g}?${I}`;return v.config.emulator?Gt(v.config,S):`${v.config.apiScheme}://${S}`}class xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(ue(this.auth,"network-request-failed")),Ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(v,p,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const S=ue(v,p,I);return S.customData._tokenResponse=g,S}function Ae(){return(Ae=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function he(v,p){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function qe(v,p){return Et.apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Je(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ft(){return(Ft=(0,_.Z)(function*(v,p=!1){const g=(0,O.m9)(v),I=yield g.getIdToken(p),S=yt(I);J(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,te=null==M?void 0:M.sign_in_provider;return{claims:S,token:I,authTime:Je(zt(S.auth_time)),issuedAtTime:Je(zt(S.iat)),expirationTime:Je(zt(S.exp)),signInProvider:te||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(v){return 1e3*Number(v)}function yt(v){const[p,g,I]=v.split(".");if(void 0===p||void 0===g||void 0===I)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(g);return S?JSON.parse(S):(ke("Failed to decode base64 JWT payload"),null)}catch(S){return ke("Caught error parsing JWT payload as JSON",S),null}}function it(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(I){throw I instanceof O.ZR&&Tr(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function Tr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,_.Z)(function*(){yield g.iteration()}),I)}iteration(){var p=this;return(0,_.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class Gn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wn(v){return en.apply(this,arguments)}function en(){return(en=(0,_.Z)(function*(v){var p;const g=v.auth,I=yield v.getIdToken(),S=yield it(v,qe(g,{idToken:I}));J(null==S?void 0:S.users.length,g,"internal-error");const M=S.users[0];v._notifyReloadListener(M);const te=(null===(p=M.providerUserInfo)||void 0===p?void 0:p.length)?Ie(M.providerUserInfo):[],We=z(v.providerData,te),sn=!!v.isAnonymous&&!(v.email&&M.passwordHash||(null==We?void 0:We.length)),Dn={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:We,metadata:new Gn(M.createdAt,M.lastLoginAt),isAnonymous:sn};Object.assign(v,Dn)})).apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(v){const p=(0,O.m9)(v);yield wn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(v,p){return[...v.filter(I=>!p.some(S=>S.providerId===I.providerId)),...p]}function Ie(v){return v.map(p=>{var{providerId:g}=p,I=(0,oe._T)(p,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ot(){return(ot=(0,_.Z)(function*(v,p){const g=yield mt(v,{},(0,_.Z)(function*(){const I=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:M}=v.config,te=Cn(v,S,"/v1/token",`key=${M}`),We=yield v._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",yn.fetch()(te,{method:"POST",headers:We,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(void 0!==p.idToken,"internal-error"),J(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function dt(v){const p=yt(v);return J(p,"internal-error"),J(void 0!==p.exp,"internal-error"),J(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var I=this;return(0,_.Z)(function*(){return J(!I.accessToken||I.refreshToken,p,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var I=this;return(0,_.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:te}=yield function ne(v,p){return ot.apply(this,arguments)}(p,g);I.updateTokensAndExpiration(S,M,Number(te))})()}updateTokensAndExpiration(p,g,I){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,g){const{refreshToken:I,accessToken:S,expirationTime:M}=g,te=new X;return I&&(J("string"==typeof I,"internal-error",{appName:p}),te.refreshToken=I),S&&(J("string"==typeof S,"internal-error",{appName:p}),te.accessToken=S),M&&(J("number"==typeof M,"internal-error",{appName:p}),te.expirationTime=M),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return ct("not implemented")}}function ve(v,p){J("string"==typeof v||void 0===v,"internal-error",{appName:p})}class Ve{constructor(p){var{uid:g,auth:I,stsTokenManager:S}=p,M=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Gn(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,_.Z)(function*(){const I=yield it(g,g.stsTokenManager.getToken(g.auth,p));return J(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(p){return function St(v){return Ft.apply(this,arguments)}(this,p)}reload(){return function F(v){return H.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ve(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var I=this;return(0,_.Z)(function*(){let S=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield wn(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,_.Z)(function*(){const g=yield p.getIdToken();return yield it(p,function zn(v,p){return Ae.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var I,S,M,te,We,wt,Ut,sn;const Dn=null!==(I=g.displayName)&&void 0!==I?I:void 0,zs=null!==(S=g.email)&&void 0!==S?S:void 0,Ti=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,xa=null!==(te=g.photoURL)&&void 0!==te?te:void 0,Ic=null!==(We=g.tenantId)&&void 0!==We?We:void 0,Hu=null!==(wt=g._redirectEventId)&&void 0!==wt?wt:void 0,P_=null!==(Ut=g.createdAt)&&void 0!==Ut?Ut:void 0,Wu=null!==(sn=g.lastLoginAt)&&void 0!==sn?sn:void 0,{uid:co,emailVerified:Bp,isAnonymous:Na,providerData:Tc,stsTokenManager:jp}=g;J(co&&jp,p,"internal-error");const Cc=X.fromJSON(this.name,jp);J("string"==typeof co,p,"internal-error"),ve(Dn,p.name),ve(zs,p.name),J("boolean"==typeof Bp,p,"internal-error"),J("boolean"==typeof Na,p,"internal-error"),ve(Ti,p.name),ve(xa,p.name),ve(Ic,p.name),ve(Hu,p.name),ve(P_,p.name),ve(Wu,p.name);const Fo=new Ve({uid:co,auth:p,email:zs,emailVerified:Bp,displayName:Dn,isAnonymous:Na,photoURL:xa,phoneNumber:Ti,tenantId:Ic,stsTokenManager:Cc,createdAt:P_,lastLoginAt:Wu});return Tc&&Array.isArray(Tc)&&(Fo.providerData=Tc.map(O_=>Object.assign({},O_))),Hu&&(Fo._redirectEventId=Hu),Fo}static _fromIdTokenResponse(p,g,I=!1){return(0,_.Z)(function*(){const S=new X;S.updateFromServerResponse(g);const M=new Ve({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:I});return yield wn(M),M})()}}const st=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(g,I){var S=this;return(0,_.Z)(function*(){S.storage[g]=I})()}_get(g){var I=this;return(0,_.Z)(function*(){const S=I.storage[g];return void 0===S?null:S})()}_remove(g){var I=this;return(0,_.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function Xe(v,p,g){return`firebase:${v}:${p}:${g}`}class Ct{constructor(p,g,I){this.persistence=p,this.auth=g,this.userKey=I;const{config:S,name:M}=this.auth;this.fullUserKey=Xe(this.userKey,S.apiKey,M),this.fullPersistenceKey=Xe("persistence",S.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,_.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Ve._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,_.Z)(function*(){if(g.persistence===p)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,I="authUser"){return(0,_.Z)(function*(){if(!g.length)return new Ct(ae(st),p,I);const S=(yield Promise.all(g.map(function(){var Ut=(0,_.Z)(function*(sn){if(yield sn._isAvailable())return sn});return function(sn){return Ut.apply(this,arguments)}}()))).filter(Ut=>Ut);let M=S[0]||ae(st);const te=Xe(I,p.config.apiKey,p.name);let We=null;for(const Ut of g)try{const sn=yield Ut._get(te);if(sn){const Dn=Ve._fromJSON(p,sn);Ut!==M&&(We=Dn),M=Ut;break}}catch(sn){}const wt=S.filter(Ut=>Ut._shouldAllowMigration);return M._shouldAllowMigration&&wt.length?(M=wt[0],We&&(yield M._set(te,We.toJSON())),yield Promise.all(g.map(function(){var Ut=(0,_.Z)(function*(sn){if(sn!==M)try{yield sn._remove(te)}catch(Dn){}});return function(sn){return Ut.apply(this,arguments)}}())),new Ct(M,p,I)):new Ct(M,p,I)})()}}function Q(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(nt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(B(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Mt(p))return"Blackberry";if(on(p))return"Webos";if(j(p))return"Safari";if((p.includes("chrome/")||be(p))&&!p.includes("edge/"))return"Chrome";if(_t(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function B(v=(0,O.z$)()){return/firefox\//i.test(v)}function j(v=(0,O.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function be(v=(0,O.z$)()){return/crios\//i.test(v)}function nt(v=(0,O.z$)()){return/iemobile/i.test(v)}function _t(v=(0,O.z$)()){return/android/i.test(v)}function Mt(v=(0,O.z$)()){return/blackberry/i.test(v)}function on(v=(0,O.z$)()){return/webos/i.test(v)}function tn(v=(0,O.z$)()){return/iphone|ipad|ipod/i.test(v)}function Xn(v=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function ir(v=(0,O.z$)()){return tn(v)||_t(v)||on(v)||Mt(v)||/windows phone/i.test(v)||nt(v)}function de(v,p=[]){let g;switch(v){case"Browser":g=Q((0,O.z$)());break;case"Worker":g=`${Q((0,O.z$)())}-${v}`;break;default:g=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${N.SDK_VERSION}/${I}`}class ht{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oe(this),this.idTokenSubscription=new Oe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var I=this;return g&&(this._popupRedirectResolver=ae(g)),this._initializationPromise=this.queue((0,_.Z)(function*(){var S,M;if(!I._deleted&&(I.persistenceManager=yield Ct.create(I,p),!I._deleted)){if(null===(S=I._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(te){}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(M=I.currentUser)||void 0===M?void 0:M.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,_.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,_.Z)(function*(){var I;let S=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,te=null==S?void 0:S._redirectEventId,We=yield g.tryRedirectSignIn(p);(!M||M===te)&&(null==We?void 0:We.user)&&(S=We.user)}return S?S._redirectEventId?(J(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,_.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(S){yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,_.Z)(function*(){try{yield wn(p)}catch(I){if("auth/network-request-failed"!==I.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,_.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,_.Z)(function*(){const I=p?(0,O.m9)(p):null;return I&&J(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,_.Z)(function*(){if(!g._deleted)return p&&J(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,_.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,_.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,_.Z)(function*(){yield g.assertedPersistence.setPersistence(ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,g,I){return this.registerStateListener(this.authStateSubscription,p,g,I)}onIdTokenChanged(p,g,I){return this.registerStateListener(this.idTokenSubscription,p,g,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var I=this;return(0,_.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,_.Z)(function*(){if(!g.redirectPersistenceManager){const I=p&&ae(p)||g._popupRedirectResolver;J(I,g,"argument-error"),g.redirectPersistenceManager=yield Ct.create(g,[ae(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,_.Z)(function*(){var I,S;return g._isInitialized&&(yield g.queue((0,_.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,_.Z)(function*(){if(p===g.currentUser)return g.queue((0,_.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,I,S){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),te=this._isInitialized?Promise.resolve():this._initializationPromise;return J(te,this,"internal-error"),te.then(()=>M(this.currentUser)),"function"==typeof g?p.addObserver(g,I,S):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,_.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,_.Z)(function*(){const g={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(g["X-Firebase-gmpid"]=p.app.options.appId),g})()}}function Ke(v){return(0,O.m9)(v)}class Oe{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function L(v,p,g){const I=Ke(v);J(I._canInitEmulator,I,"emulator-config-failed"),J(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),M=re(p),{host:te,port:We}=function Be(v){const p=re(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const M=S[1];return{host:M,port:Ze(I.substr(M.length+1))}}{const[M,te]=I.split(":");return{host:M,port:Ze(te)}}}(p);I.config.emulator={url:`${M}//${te}${null===We?"":`:${We}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:We,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function un(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function re(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Ze(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class dn{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return ct("not implemented")}_getIdTokenResponse(p){return ct("not implemented")}_linkToIdToken(p,g){return ct("not implemented")}_getReauthenticationResolver(p){return ct("not implemented")}}function nn(v,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:resetPassword",kt(v,p))})).apply(this,arguments)}function xi(v,p){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hu(v,p){return to.apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:update",kt(v,p))})).apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPassword",kt(v,p))})).apply(this,arguments)}function Nr(v,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:sendOobCode",kt(v,p))})).apply(this,arguments)}function fu(v,p){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,_.Z)(function*(v,p){return Nr(v,p)})).apply(this,arguments)}function Fn(v,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,_.Z)(function*(v,p){return Nr(v,p)})).apply(this,arguments)}function jd(v,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,_.Z)(function*(v,p){return Nr(v,p)})).apply(this,arguments)}function Bi(v,p){return pu.apply(this,arguments)}function pu(){return(pu=(0,_.Z)(function*(v,p){return Nr(v,p)})).apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithEmailLink",kt(v,p))})).apply(this,arguments)}function Hd(){return(Hd=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithEmailLink",kt(v,p))})).apply(this,arguments)}class $l extends dn{constructor(p,g,I,S=null){super("password",I),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new $l(p,g,"password")}static _fromEmailAndCode(p,g,I=null){return new $l(p,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,_.Z)(function*(){switch(g.signInMethod){case"password":return function Bd(v,p){return no.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function $d(v,p){return Io.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Re(p,"internal-error")}})()}_linkToIdToken(p,g){var I=this;return(0,_.Z)(function*(){switch(I.signInMethod){case"password":return xi(p,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ji(v,p){return Hd.apply(this,arguments)}(p,{idToken:g,email:I._email,oobCode:I._password});default:Re(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function io(v,p){return wi.apply(this,arguments)}function wi(){return(wi=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithIdp",kt(v,p))})).apply(this,arguments)}class xs extends dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new xs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Re("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S}=g,M=(0,oe._T)(g,["providerId","signInMethod"]);if(!I||!S)return null;const te=new xs(I,S);return te.idToken=M.idToken||void 0,te.accessToken=M.accessToken||void 0,te.secret=M.secret,te.nonce=M.nonce,te.pendingToken=M.pendingToken||null,te}_getIdTokenResponse(p){return io(p,this.buildRequest())}_linkToIdToken(p,g){const I=this.buildRequest();return I.idToken=g,io(p,I)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,io(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,O.xO)(g)}return p}}function S0(v,p){return ap.apply(this,arguments)}function ap(){return(ap=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:sendVerificationCode",kt(v,p))})).apply(this,arguments)}function up(){return(up=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",kt(v,p))})).apply(this,arguments)}function lp(){return(lp=(0,_.Z)(function*(v,p){const g=yield Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",kt(v,p));if(g.temporaryProof)throw bn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const x0={USER_NOT_FOUND:"user-not-found"};function cp(){return(cp=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",kt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),x0)})).apply(this,arguments)}class oa extends dn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new oa({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new oa({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function A0(v,p){return up.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function R0(v,p){return lp.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function N0(v,p){return cp.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:I,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:I,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:I,phoneNumber:S,temporaryProof:M}=p;return I||g||S||M?new oa({verificationId:g,verificationCode:I,phoneNumber:S,temporaryProof:M}):null}}class aa{constructor(p){var g,I,S,M,te,We;const wt=(0,O.zd)((0,O.pd)(p)),Ut=null!==(g=wt.apiKey)&&void 0!==g?g:null,sn=null!==(I=wt.oobCode)&&void 0!==I?I:null,Dn=function M0(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=wt.mode)&&void 0!==S?S:null);J(Ut&&sn&&Dn,"argument-error"),this.apiKey=Ut,this.operation=Dn,this.code=sn,this.continueUrl=null!==(M=wt.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(te=wt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(We=wt.tenantId)&&void 0!==We?We:null}static parseLink(p){const g=function P0(v){const p=(0,O.zd)((0,O.pd)(v)).link,g=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,I=(0,O.zd)((0,O.pd)(v)).deep_link_id;return(I?(0,O.zd)((0,O.pd)(I)).link:null)||I||g||p||v}(p);try{return new aa(g)}catch(I){return null}}}let hp=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return $l._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const S=aa.parseLink(I);return J(S,"argument-error"),$l._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ns{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class gu extends Ns{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class $i extends gu{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return J("providerId"in g&&"signInMethod"in g,"argument-error"),xs._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return $i.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return $i.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:M,nonce:te,providerId:We}=p;if(!I&&!S&&!g&&!M||!We)return null;try{return new $i(We)._credential({idToken:g,accessToken:I,nonce:te,pendingToken:M})}catch(wt){return null}}}let Xm=(()=>{class v extends gu{constructor(){super("facebook.com")}static credential(g){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),mu=(()=>{class v extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:S}=g;if(!I&&!S)return null;try{return v.credential(I,S)}catch(M){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Hl=(()=>{class v extends gu{constructor(){super("github.com")}static credential(g){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class _u extends dn{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return io(p,this.buildRequest())}_linkToIdToken(p,g){const I=this.buildRequest();return I.idToken=g,io(p,I)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,io(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S,pendingToken:M}=g;return I&&S&&M&&I===S?new _u(I,M):null}static _create(p,g){return new _u(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ua extends Ns{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ua.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ua.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=_u.fromJSON(p);return J(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:I}=p;if(!g||!I)return null;try{return _u._create(I,g)}catch(S){return null}}}let t_=(()=>{class v extends gu{constructor(){super("twitter.com")}static credential(g,I){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=g;if(!I||!S)return null;try{return v.credential(I,S)}catch(M){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Wl(v,p){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signUp",kt(v,p))})).apply(this,arguments)}class $n{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,I,S=!1){return(0,_.Z)(function*(){const M=yield Ve._fromIdTokenResponse(p,I,S),te=yu(I);return new $n({user:M,providerId:te,_tokenResponse:I,operationType:g})})()}static _forOperation(p,g,I){return(0,_.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const S=yu(I);return new $n({user:p,providerId:S,_tokenResponse:I,operationType:g})})()}}function yu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function O0(v){return zl.apply(this,arguments)}function zl(){return(zl=(0,_.Z)(function*(v){var p;const g=Ke(v);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new $n({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Wl(g,{returnSecureToken:!0}),S=yield $n._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class zd extends O.ZR{constructor(p,g,I,S){var M;super(g.code,g.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,g,I,S){return new zd(p,g,I,S)}}function pp(v,p,g,I){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?zd._fromErrorAndOperation(v,M,p,I):M})}function Gl(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function gp(v,p){return vu.apply(this,arguments)}function vu(){return(vu=(0,_.Z)(function*(v,p){const g=(0,O.m9)(v);yield Eu(!0,g,p);const{providerUserInfo:I}=yield he(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=Gl(I||[]);return g.providerData=g.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function n_(v,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,_.Z)(function*(v,p,g=!1){const I=yield it(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return $n._forOperation(v,"link",I)})).apply(this,arguments)}function Eu(v,p,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,_.Z)(function*(v,p,g){yield wn(p);const S=!1===v?"provider-already-linked":"no-such-provider";J(Gl(p.providerData).has(g)===v,p.auth,S)})).apply(this,arguments)}function Vn(v,p){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,_.Z)(function*(v,p,g=!1){const{auth:I}=v,S="reauthenticate";try{const M=yield it(v,pp(I,S,p,v),g);J(M.idToken,I,"internal-error");const te=yt(M.idToken);J(te,I,"internal-error");const{sub:We}=te;return J(v.uid===We,I,"user-mismatch"),$n._forOperation(v,S,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Re(I,"user-mismatch"),M}})).apply(this,arguments)}function ql(v,p){return la.apply(this,arguments)}function la(){return(la=(0,_.Z)(function*(v,p,g=!1){const I="signIn",S=yield pp(v,I,p),M=yield $n._fromIdTokenResponse(v,I,S);return g||(yield v._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Vr(v,p){return qd.apply(this,arguments)}function qd(){return(qd=(0,_.Z)(function*(v,p){return ql(Ke(v),p)})).apply(this,arguments)}function Kl(v,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(v,p){const g=(0,O.m9)(v);return yield Eu(!1,g,p.providerId),n_(g,p)})).apply(this,arguments)}function si(v,p){return To.apply(this,arguments)}function To(){return(To=(0,_.Z)(function*(v,p){return Vn((0,O.m9)(v),p)})).apply(this,arguments)}function ca(v,p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,_.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithCustomToken",kt(v,p))})).apply(this,arguments)}function Ms(v,p){return so.apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(v,p){const g=Ke(v),I=yield ca(g,{token:p,returnSecureToken:!0}),S=yield $n._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Co{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Lt._fromServerResponse(p,g):Re(p,"internal-error")}}class Lt extends Co{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Lt(g)}}function Iu(v,p,g){var I;J((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),J(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(J(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(J(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function mp(v,p,g){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v),S={requestType:"PASSWORD_RESET",email:p};g&&Iu(I,S,g),yield Fn(I,S)})).apply(this,arguments)}function r_(v,p,g){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,_.Z)(function*(v,p,g){yield nn((0,O.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function i_(v,p){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,_.Z)(function*(v,p){yield hu((0,O.m9)(v),{oobCode:p})})).apply(this,arguments)}function He(v,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,_.Z)(function*(v,p){const g=(0,O.m9)(v),I=yield nn(g,{oobCode:p}),S=I.requestType;switch(J(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(I.mfaInfo,g,"internal-error");default:J(I.email,g,"internal-error")}let M=null;return I.mfaInfo&&(M=Co._fromServerResponse(Ke(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function k0(v,p){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(v,p){const{data:g}=yield He((0,O.m9)(v),p);return g.email})).apply(this,arguments)}function Jl(v,p,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,_.Z)(function*(v,p,g){const I=Ke(v),S=yield Wl(I,{returnSecureToken:!0,email:p,password:g}),M=yield $n._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(M.user),M})).apply(this,arguments)}function Hi(v,p,g){return Vr((0,O.m9)(v),hp.credential(p,g))}function Zd(v,p,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};J(g.handleCodeInApp,I,"argument-error"),g&&Iu(I,S,g),yield jd(I,S)})).apply(this,arguments)}function F0(v,p){const g=aa.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}function _p(v,p,g){return da.apply(this,arguments)}function da(){return(da=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v),S=hp.credentialWithLink(p,g||le());return J(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Vr(I,S)})).apply(this,arguments)}function Xl(v,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:createAuthUri",kt(v,p))})).apply(this,arguments)}function Ps(v,p){return ec.apply(this,arguments)}function ec(){return(ec=(0,_.Z)(function*(v,p){const I={identifier:p,continueUri:Dt()?le():"http://localhost"},{signinMethods:S}=yield Xl((0,O.m9)(v),I);return S||[]})).apply(this,arguments)}function ha(v,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,_.Z)(function*(v,p){const g=(0,O.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Iu(g.auth,S,p);const{email:M}=yield fu(g.auth,S);M!==v.email&&(yield v.reload())})).apply(this,arguments)}function s_(v,p,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&Iu(I.auth,M,g);const{email:te}=yield Bi(I.auth,M);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function o_(v,p){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,_.Z)(function*(v,p){return ze(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Qd(v,p){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,_.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const I=(0,O.m9)(v),M={idToken:yield I.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},te=yield it(I,o_(I.auth,M));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const We=I.providerData.find(({providerId:wt})=>"password"===wt);We&&(We.displayName=I.displayName,We.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)})).apply(this,arguments)}function a_(v,p){return u_((0,O.m9)(v),p,null)}function Jd(v,p){return u_((0,O.m9)(v),null,p)}function u_(v,p,g){return nc.apply(this,arguments)}function nc(){return(nc=(0,_.Z)(function*(v,p,g){const{auth:I}=v,M={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(M.email=p),g&&(M.password=g);const te=yield it(v,xi(I,M));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Do{constructor(p,g,I={}){this.isNewUser=p,this.providerId=g,this.profile=I}}class Xd extends Do{constructor(p,g,I,S){super(p,g,I),this.username=S}}class l_ extends Do{constructor(p,g){super(p,"facebook.com",g)}}class c_ extends Xd{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Du extends Do{constructor(p,g){super(p,"google.com",g)}}class oo extends Xd{constructor(p,g,I){super(p,"twitter.com",g,I)}}function d_(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function bu(v){var p,g;if(!v)return null;const{providerId:I}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},M=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const te=null===(g=null===(p=yt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(te)return new Do(M,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new l_(M,S);case"github.com":return new c_(M,S);case"google.com":return new Du(M,S);case"twitter.com":return new oo(M,S,v.screenName||null);case"custom":case"anonymous":return new Do(M,null);default:return new Do(M,I,S)}}(g)}function Kn(v,p,g,I){return(0,O.m9)(v).onAuthStateChanged(p,g,I)}class So{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new So("enroll",p)}static _fromMfaPendingCredential(p){return new So("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,I;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return So._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return So._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Su{constructor(p,g,I){this.session=p,this.hints=g,this.signInResolver=I}static _fromError(p,g){const I=Ke(p),S=g.customData._serverResponse,M=(S.mfaInfo||[]).map(We=>Co._fromServerResponse(I,We));J(S.mfaPendingCredential,I,"internal-error");const te=So._fromMfaPendingCredential(S.mfaPendingCredential);return new Su(te,M,function(){var We=(0,_.Z)(function*(wt){const Ut=yield wt._process(I,te);delete S.mfaInfo,delete S.mfaPendingCredential;const sn=Object.assign(Object.assign({},S),{idToken:Ut.idToken,refreshToken:Ut.refreshToken});switch(g.operationType){case"signIn":const Dn=yield $n._fromIdTokenResponse(I,g.operationType,sn);return yield I._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return J(g.user,I,"internal-error"),$n._forOperation(g.user,g.operationType,sn);default:Re(I,"internal-error")}});return function(wt){return We.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,_.Z)(function*(){return g.signInResolver(p)})()}}function eh(v,p){var g;const I=(0,O.m9)(v),S=p;return J(p.customData.operationType,I,"argument-error"),J(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Su._fromError(I,S)}function th(v,p){return ze(v,"POST","/v2/accounts/mfaEnrollment:start",kt(v,p))}class vp{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Co._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new vp(p)}getSession(){var p=this;return(0,_.Z)(function*(){return So._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var I=this;return(0,_.Z)(function*(){const S=p,M=yield I.getSession(),te=yield it(I.user,S._process(I.user.auth,M,g));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(p){var g=this;return(0,_.Z)(function*(){const I="string"==typeof p?p:p.uid,S=yield g.user.getIdToken(),M=yield it(g.user,function h_(v,p){return ze(v,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(v,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:te})=>te!==I),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const ks=new WeakMap;function rc(v){const p=(0,O.m9)(v);return ks.has(p)||ks.set(p,vp._fromUser(p)),ks.get(p)}const rh="__sak";class f_{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const wp=(()=>{class v extends f_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ic(){const v=(0,O.z$)();return j(v)||tn(v)}()&&function q(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),M=this.localCache[I];S!==M&&g(I,M,S)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((We,wt,Ut)=>{this.notifyListeners(We,Ut)});const S=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem(S);if(g.newValue!==We)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!I)return}const M=()=>{const We=this.storage.getItem(S);!I&&this.localCache[S]===We||this.notifyListeners(S,We)},te=this.storage.getItem(S);!function an(){return(0,O.w1)()&&10===document.documentMode}()||te===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,I){this.localCache[g]=I;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var S=()=>super._set,M=this;return(0,_.Z)(function*(){yield S().call(M,g,I),M.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,S=this;return(0,_.Z)(function*(){const M=yield I().call(S,g);return S.localCache[g]=JSON.stringify(M),M})()}_remove(g){var I=()=>super._remove,S=this;return(0,_.Z)(function*(){yield I().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),ps=(()=>{class v extends f_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let zi=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(M=>M.isListeningto(g));if(I)return I;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,_.Z)(function*(){const S=g,{eventId:M,eventType:te,data:We}=S.data,wt=I.handlersMap[te];if(!(null==wt?void 0:wt.size))return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:te});const Ut=Array.from(wt).map(function(){var Dn=(0,_.Z)(function*(zs){return zs(S.origin,We)});return function(zs){return Dn.apply(this,arguments)}}()),sn=yield function Ot(v){return Promise.all(v.map(function(){var p=(0,_.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return p.apply(this,arguments)}}()))}(Ut);S.ports[0].postMessage({status:"done",eventId:M,eventType:te,response:sn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function br(v="",p=10){let g="";for(let I=0;I<p;I++)g+=Math.floor(10*Math.random());return v+g}class ai{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,I=50){var S=this;return(0,_.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let te,We;return new Promise((wt,Ut)=>{const sn=br("",20);M.port1.start();const Dn=setTimeout(()=>{Ut(new Error("unsupported_event"))},I);We={messageChannel:M,onMessage(zs){const Ti=zs;if(Ti.data.eventId===sn)switch(Ti.data.status){case"ack":clearTimeout(Dn),te=setTimeout(()=>{Ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),wt(Ti.data.response);break;default:clearTimeout(Dn),clearTimeout(te),Ut(new Error("invalid_response"))}}},S.handlers.add(We),M.port1.addEventListener("message",We.onMessage),S.target.postMessage({eventType:p,eventId:sn,data:g},[M.port2])}).finally(()=>{We&&S.removeMessageHandler(We)})})()}}function ar(){return window}function ih(){return void 0!==ar().WorkerGlobalScope&&"function"==typeof ar().importScripts}function Au(){return(Au=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const rn="firebaseLocalStorageDb",ac="firebaseLocalStorage",Tp="fbase_key";class Fs{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ur(v,p){return v.transaction([ac],p?"readwrite":"readonly").objectStore(ac)}function ga(){const v=indexedDB.open(rn,1);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(ac,{keyPath:Tp})}catch(S){g(S)}}),v.addEventListener("success",(0,_.Z)(function*(){const I=v.result;I.objectStoreNames.contains(ac)?p(I):(I.close(),yield function sh(){const v=indexedDB.deleteDatabase(rn);return new Fs(v).toPromise()}(),p(yield ga()))}))})}function Ru(v,p,g){return uc.apply(this,arguments)}function uc(){return(uc=(0,_.Z)(function*(v,p,g){const I=ur(v,!0).put({[Tp]:p,value:g});return new Fs(I).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,_.Z)(function*(v,p){const g=ur(v,!1).get(p),I=yield new Fs(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ma(v,p){const g=ur(v,!0).delete(p);return new Fs(g).toPromise()}const _a=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,_.Z)(function*(){return g.db||(g.db=yield ga()),g.db})()}_withRetries(g){var I=this;return(0,_.Z)(function*(){let S=0;for(;;)try{const M=yield I._openDb();return yield g(M)}catch(M){if(S++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,_.Z)(function*(){return ih()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,_.Z)(function*(){g.receiver=zi._getInstance(function oc(){return ih()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,_.Z)(function*(S,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(S,M){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,_.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,_.Z)(function*(){var I,S;if(g.activeServiceWorker=yield function pa(){return Au.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ai(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(I=M[0])||void 0===I?void 0:I.fulfilled)&&(null===(S=M[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,_.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function sc(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ga();return yield Ru(g,rh,"1"),yield ma(g,rh),!0}catch(g){}return!1})()}_withPendingWrite(g){var I=this;return(0,_.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var S=this;return(0,_.Z)(function*(){return S._withPendingWrite((0,_.Z)(function*(){return yield S._withRetries(M=>Ru(M,g,I)),S.localCache[g]=I,S.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,_.Z)(function*(){const S=yield I._withRetries(M=>function Cp(v,p){return Ao.apply(this,arguments)}(M,g));return I.localCache[g]=S,S})()}_remove(g){var I=this;return(0,_.Z)(function*(){return I._withPendingWrite((0,_.Z)(function*(){return yield I._withRetries(S=>ma(S,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,_.Z)(function*(){const I=yield g._withRetries(te=>{const We=ur(te,!1).getAll();return new Fs(We).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:te,value:We}of I)M.add(te),JSON.stringify(g.localCache[te])!==JSON.stringify(We)&&(g.notifyListeners(te,We),S.push(te));for(const te of Object.keys(g.localCache))g.localCache[te]&&!M.has(te)&&(g.notifyListeners(te,null),S.push(te));return S})()}notifyListeners(g,I){this.localCache[g]=I;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function gs(v,p){return ze(v,"POST","/v2/accounts/mfaSignIn:start",kt(v,p))}function xu(){return(xu=(0,_.Z)(function*(v){return(yield ze(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Dr(v){return new Promise((p,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=S=>{const M=ue("internal-error");M.customData=S,g(M)},I.type="text/javascript",I.charset="UTF-8",function ya(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function Ro(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ii=1e12;class Br{constructor(p){this.auth=p,this.counter=Ii,this._widgets=new Map}render(p,g){const I=this.counter;return this._widgets.set(I,new Ls(p,this.auth.name,g||{})),this.counter++,I}reset(p){var g;const I=p||Ii;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Ii))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,_.Z)(function*(){var I;return null===(I=g._widgets.get(p||Ii))||void 0===I||I.execute(),""})()}}class Ls{constructor(p,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;J(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yr(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Us=Ro("rcb"),lc=new pt(3e4,6e4);class Zn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ar().grecaptcha}load(p,g=""){return J(function g_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(ar().grecaptcha):new Promise((I,S)=>{const M=ar().setTimeout(()=>{S(ue(p,"network-request-failed"))},lc.get());ar()[Us]=()=>{ar().clearTimeout(M),delete ar()[Us];const We=ar().grecaptcha;if(!We)return void S(ue(p,"internal-error"));const wt=We.render;We.render=(Ut,sn)=>{const Dn=wt(Ut,sn);return this.counter++,Dn},this.hostLanguage=g,I(We)},Dr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Us,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),S(ue(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!ar().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class m_{load(p){return(0,_.Z)(function*(){return new Br(p)})()}clearedOneInstance(){}}const __="recaptcha",Ea={theme:"light",type:"image"};class Ni{constructor(p,g=Object.assign({},Ea),I){this.parameters=g,this.type=__,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ke(I),this.isInvisible="invisible"===this.parameters.size,J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;J(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new m_:new Zn,this.validateStartingState()}verify(){var p=this;return(0,_.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(g)||new Promise(M=>{const te=We=>{!We||(p.tokenChangeListeners.delete(te),M(We))};p.tokenChangeListeners.add(te),p.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof p)p(g);else if("string"==typeof p){const I=ar()[p];"function"==typeof I&&I(g)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,_.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,_.Z)(function*(){J(Dt()&&!ih(),p.auth,"internal-error"),yield function U0(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function Yr(v){return xu.apply(this,arguments)}(p.auth);J(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ms{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=oa._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function No(v,p,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.Z)(function*(v,p,g){const I=Ke(v),S=yield cc(I,p,(0,O.m9)(g));return new ms(S,M=>Vr(I,M))})).apply(this,arguments)}function lr(v,p,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v);yield Eu(!1,I,"phone");const S=yield cc(I.auth,p,(0,O.m9)(g));return new ms(S,M=>Kl(I,M))})).apply(this,arguments)}function Mu(v,p,g){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v),S=yield cc(I.auth,p,(0,O.m9)(g));return new ms(S,M=>si(I,M))})).apply(this,arguments)}function cc(v,p,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,_.Z)(function*(v,p,g){var I;const S=yield g.verify();try{let M;if(J("string"==typeof S,v,"argument-error"),J(g.type===__,v,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const te=M.session;if("phoneNumber"in M)return J("enroll"===te.type,v,"internal-error"),(yield th(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{J("signin"===te.type,v,"internal-error");const We=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return J(We,v,"missing-multi-factor-info"),(yield gs(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield S0(v,{phoneNumber:M.phoneNumber,recaptchaToken:S});return te}}finally{g._reset()}})).apply(this,arguments)}function _s(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,_.Z)(function*(v,p){yield n_((0,O.m9)(v),p)})).apply(this,arguments)}let Ou=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Ke(g)}verifyPhoneNumber(g,I){return cc(this.auth,g,(0,O.m9)(I))}static credential(g,I){return oa._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:S}=g;return I&&S?oa._fromTokenResponse(I,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Gi(v,p){return p?ae(p):(J(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class dc extends dn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return io(p,this._buildIdpRequest())}_linkToIdToken(p,g){return io(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return io(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function y_(v){return ql(v.auth,new dc(v),v.bypassAuthState)}function Ap(v){const{auth:p,user:g}=v;return J(g,p,"internal-error"),Vn(g,new dc(v),v.bypassAuthState)}function v_(v){return ln.apply(this,arguments)}function ln(){return(ln=(0,_.Z)(function*(v){const{auth:p,user:g}=v;return J(g,p,"internal-error"),n_(g,new dc(v),v.bypassAuthState)})).apply(this,arguments)}class lh{constructor(p,g,I,S,M=!1){this.auth=p,this.resolver=I,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,_.Z)(function*(I,S){p.pendingPromise={resolve:I,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(I,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,_.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:M,tenantId:te,error:We,type:wt}=p;if(We)return void g.reject(We);const Ut={auth:g.auth,requestUri:I,sessionId:S,tenantId:te||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(wt)(Ut))}catch(sn){g.reject(sn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return y_;case"linkViaPopup":case"linkViaRedirect":return v_;case"reauthViaPopup":case"reauthViaRedirect":return Ap;default:Re(this.auth,"internal-error")}}resolve(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sr=new pt(2e3,1e4);function hc(v,p,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(v,p,g){const I=Ke(v);ye(v,p,Ns);const S=Gi(I,g);return new pc(I,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function V0(v,p,g){return fc.apply(this,arguments)}function fc(){return(fc=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v);ye(I.auth,p,Ns);const S=Gi(I.auth,g);return new pc(I.auth,"reauthViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}function E_(v,p,g){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v);ye(I.auth,p,Ns);const S=Gi(I.auth,g);return new pc(I.auth,"linkViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}let pc=(()=>{class v extends lh{constructor(g,I,S,M,te){super(g,I,M,te),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,_.Z)(function*(){const I=yield g.execute();return J(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,_.Z)(function*(){Z(1===g.filter.length,"Popup operations only handle one event");const I=br();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ue(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,S;this.pollId=(null===(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Sr.get())};g()}}return v.currentPopupAction=null,v})();const ku=new Map;class w_ extends lh{constructor(p,g,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,_.Z)(function*(){let I=ku.get(g.auth._key());if(!I){try{const M=(yield function vr(v,p){return Qr.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;I=()=>Promise.resolve(M)}catch(S){I=()=>Promise.reject(S)}ku.set(g.auth._key(),I)}return g.bypassAuthState||ku.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,I=this;return(0,_.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(I,p);if("unknown"!==p.type){if(p.eventId){const S=yield I.auth._redirectUserForId(p.eventId);if(S)return I.user=S,g().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Qr(){return(Qr=(0,_.Z)(function*(v,p){const g=Np(p),I=Ia(v);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(g));return yield I._remove(g),S})).apply(this,arguments)}function xp(v,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(v,p){return Ia(v)._set(Np(p),"true")})).apply(this,arguments)}function gc(){ku.clear()}function Ia(v){return ae(v._redirectPersistence)}function Np(v){return Xe("pendingRedirect",v.config.apiKey,v.name)}function Mp(v,p,g){return function I_(v,p,g){return Fu.apply(this,arguments)}(v,p,g)}function Fu(){return(Fu=(0,_.Z)(function*(v,p,g){const I=Ke(v);ye(v,p,Ns);const S=Gi(I,g);return yield xp(S,I),S._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function Pp(v,p,g){return function ao(v,p,g){return vs.apply(this,arguments)}(v,p,g)}function vs(){return(vs=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v);ye(I.auth,p,Ns);const S=Gi(I.auth,g);yield xp(S,I.auth);const M=yield Op(I);return S._openRedirect(I.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function pn(v,p,g){return function sr(v,p,g){return mc.apply(this,arguments)}(v,p,g)}function mc(){return(mc=(0,_.Z)(function*(v,p,g){const I=(0,O.m9)(v);ye(I.auth,p,Ns);const S=Gi(I.auth,g);yield Eu(!1,I,p.providerId),yield xp(S,I.auth);const M=yield Op(I);return S._openRedirect(I.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function Ta(v,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,_.Z)(function*(v,p){return yield Ke(v)._initializationPromise,uo(v,p,!1)})).apply(this,arguments)}function uo(v,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,_.Z)(function*(v,p,g=!1){const I=Ke(v),S=Gi(I,p),te=yield new w_(I,S,g).execute();return te&&!g&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,p)),te})).apply(this,arguments)}function Op(v){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(v){const p=br(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Bs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(g=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ch(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Po(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var I;if(p.error&&!Po(p)){const S=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(ue(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const I=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ba(p))}saveEventToCache(p){this.cachedEventUids.add(ba(p)),this.lastProcessedEventTime=Date.now()}}function ba(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Po({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Da(v){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,_.Z)(function*(v,p={}){return ze(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Uu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kp=/^https?/;function dh(){return(dh=(0,_.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Da(v);for(const g of p)try{if(js(g))return}catch(I){}Re(v,"unauthorized-domain")})).apply(this,arguments)}function js(v){const p=le(),{protocol:g,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&te.hostname===I}if(!kp.test(g))return!1;if(Uu.test(v))return I===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const Vu=new pt(3e4,6e4);function Fp(){const v=ar().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Bu=null;function C_(v){return Bu=Bu||function B0(v){return new Promise((p,g)=>{var I,S,M;function te(){Fp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Fp(),g(ue(v,"network-request-failed"))},timeout:Vu.get()})}if(null===(S=null===(I=ar().gapi)||void 0===I?void 0:I.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(M=ar().gapi)||void 0===M?void 0:M.load)){const We=Ro("iframefcb");return ar()[We]=()=>{gapi.load?te():g(ue(v,"network-request-failed"))},Dr(`https://apis.google.com/js/api.js?onload=${We}`).catch(wt=>g(wt))}te()}}).catch(p=>{throw Bu=null,p})}(v),Bu}const b_=new pt(5e3,15e3),$s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yc(v){const p=v.config;J(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?Gt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:v.name,v:N.SDK_VERSION},S=Hs.get(v.config.apiHost);S&&(I.eid=S);const M=v._getFrameworks();return M.length&&(I.fw=M.join(",")),`${g}?${(0,O.xO)(I).slice(1)}`}function ph(){return ph=(0,_.Z)(function*(v){const p=yield C_(v),g=ar().gapi;return J(g,v,"internal-error"),p.open({where:document.body,url:yc(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$s,dontclear:!0},I=>new Promise(function(){var S=(0,_.Z)(function*(M,te){yield I.restyle({setHideOnLeave:!1});const We=ue(v,"network-request-failed"),wt=ar().setTimeout(()=>{te(We)},b_.get());function Ut(){ar().clearTimeout(wt),M(I)}I.ping(Ut).then(Ut,()=>{te(We)})});return function(M,te){return S.apply(this,arguments)}}()))}),ph.apply(this,arguments)}const Aa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ju{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ko(v,p,g,I,S,M){J(v.config.authDomain,v,"auth-domain-config-required"),J(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:N.SDK_VERSION,eventId:S};if(p instanceof Ns){p.setDefaultLanguage(v.languageCode),te.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(te.customParameters=JSON.stringify(p.getCustomParameters()));for(const[wt,Ut]of Object.entries(M||{}))te[wt]=Ut}if(p instanceof gu){const wt=p.getScopes().filter(Ut=>""!==Ut);wt.length>0&&(te.scopes=wt.join(","))}v.tenantId&&(te.tid=v.tenantId);const We=te;for(const wt of Object.keys(We))void 0===We[wt]&&delete We[wt];return`${function A_({config:v}){return v.emulator?Gt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,O.xO)(We).slice(1)}`}const yh="webStorageSupport",Ws=class lo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ps,this._completeRedirectFn=uo}_openPopup(p,g,I,S){var M=this;return(0,_.Z)(function*(){var te;Z(null===(te=M.eventManagers[p._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const We=ko(p,g,I,le(),S);return function mh(v,p,g,I=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let We="";const wt=Object.assign(Object.assign({},Aa),{width:I.toString(),height:S.toString(),top:M,left:te}),Ut=(0,O.z$)().toLowerCase();g&&(We=be(Ut)?"_blank":g),B(Ut)&&(p=p||"http://localhost",wt.scrollbars="yes");const sn=Object.entries(wt).reduce((zs,[Ti,xa])=>`${zs}${Ti}=${xa},`,"");if(function mr(v=(0,O.z$)()){var p;return tn(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ut)&&"_self"!==We)return function Ec(v,p){const g=document.createElement("a");g.href=v,g.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(p||"",We),new ju(null);const Dn=window.open(p||"",We,sn);J(Dn,v,"popup-blocked");try{Dn.focus()}catch(zs){}return new ju(Dn)}(p,We,br())})()}_openRedirect(p,g,I,S){var M=this;return(0,_.Z)(function*(){return yield M._originValidation(p),function fa(v){ar().location.href=v}(ko(p,g,I,le(),S)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:M}=this.eventManagers[g];return S?Promise.resolve(S):(Z(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(p);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(p){var g=this;return(0,_.Z)(function*(){const I=yield function Oo(v){return ph.apply(this,arguments)}(p),S=new Bs(p);return I.register("authEvent",M=>(J(null==M?void 0:M.authEvent,p,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=I,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(yh,{type:yh},S=>{var M;const te=null===(M=null==S?void 0:S[0])||void 0===M?void 0:M[yh];void 0!==te&&g(!!te),Re(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function T_(v){return dh.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ir()||j()||tn()}};class wc extends class $u{constructor(p){this.factorId=p}_process(p,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,I);case"signin":return this._finalizeSignIn(p,g.credential);default:return ct("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new wc(p)}_finalizeEnroll(p,g,I){return function nh(v,p){return ze(v,"POST","/v2/accounts/mfaEnrollment:finalize",kt(v,p))}(p,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Dp(v,p){return ze(v,"POST","/v2/accounts/mfaSignIn:finalize",kt(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let R_=(()=>{class v{constructor(){}static assertion(g){return wc._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Lp="@firebase/auth";class Up{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,_.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(I=>{var S;p((null===(S=I)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function M_(v=(0,N.getApp)()){const p=(0,N._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function fe(v,p){const g=(0,N._getProvider)(v,"auth");if(g.isInitialized()){const S=g.getImmediate(),M=g.getOptions();if((0,O.vZ)(M,null!=p?p:{}))return S;Re(S,"already-initialized")}return g.initialize({options:p})}(v,{popupRedirectResolver:Ws,persistence:[_a,wp,ps]})}!function N_(v){(0,N._registerComponent)(new _e.wA("auth",(p,{options:g})=>{const I=p.getProvider("app").getImmediate(),{apiKey:S,authDomain:M}=I.options;return(te=>{J(S&&!S.includes(":"),"invalid-api-key",{appName:te.name}),J(!(null==M?void 0:M.includes(":")),"argument-error",{appName:te.name});const We={apiKey:S,authDomain:M,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(v)},wt=new ht(te,We);return function $e(v,p){const g=(null==p?void 0:p.persistence)||[],I=(Array.isArray(g)?g:[g]).map(ae);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(wt,g),wt})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new _e.wA("auth-internal",p=>{const g=Ke(p.getProvider("auth").getImmediate());return new Up(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Lp,"0.19.9",function Vp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(Lp,"0.19.9","esm2017")}("Browser")},2090:(Tt,Me,x)=>{"use strict";x.d(Me,{BH:()=>Ue,LL:()=>le,ZR:()=>$e,gQ:()=>bn,zI:()=>pe,hu:()=>O,g5:()=>N,US:()=>_e,tV:()=>ge,h$:()=>se,$s:()=>Wt,r3:()=>kt,Sg:()=>xe,ne:()=>zn,p$:()=>V,vZ:()=>jt,ZB:()=>U,gK:()=>Je,pd:()=>xn,m9:()=>en,z$:()=>je,GJ:()=>Ht,jU:()=>ie,ru:()=>ke,d:()=>ue,xb:()=>gt,w1:()=>Ce,hl:()=>ct,uI:()=>Le,UG:()=>G,Yr:()=>Qe,b$:()=>Re,G6:()=>J,Mn:()=>ye,w9:()=>Bn,cI:()=>_n,UI:()=>mt,xO:()=>qt,zd:()=>Cn,DV:()=>ze,ug:()=>yt,dS:()=>zt,Pz:()=>ut,eu:()=>Z});const O=function(F,H){if(!F)throw N(H)},N=function(F){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+F)},oe=function(F){const H=[];let z=0;for(let Ie=0;Ie<F.length;Ie++){let ne=F.charCodeAt(Ie);ne<128?H[z++]=ne:ne<2048?(H[z++]=ne>>6|192,H[z++]=63&ne|128):55296==(64512&ne)&&Ie+1<F.length&&56320==(64512&F.charCodeAt(Ie+1))?(ne=65536+((1023&ne)<<10)+(1023&F.charCodeAt(++Ie)),H[z++]=ne>>18|240,H[z++]=ne>>12&63|128,H[z++]=ne>>6&63|128,H[z++]=63&ne|128):(H[z++]=ne>>12|224,H[z++]=ne>>6&63|128,H[z++]=63&ne|128)}return H},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,H){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ne=0;ne<F.length;ne+=3){const ot=F[ne],X=ne+1<F.length,ve=X?F[ne+1]:0,Ve=ne+2<F.length,at=Ve?F[ne+2]:0;let Ct=(15&ve)<<2|at>>6,Q=63&at;Ve||(Q=64,X||(Ct=64)),Ie.push(z[ot>>2],z[(3&ot)<<4|ve>>4],z[Ct],z[Q])}return Ie.join("")},encodeString(F,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(F):this.encodeByteArray(oe(F),H)},decodeString(F,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(F):function(F){const H=[];let z=0,Ie=0;for(;z<F.length;){const ne=F[z++];if(ne<128)H[Ie++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const ot=F[z++];H[Ie++]=String.fromCharCode((31&ne)<<6|63&ot)}else if(ne>239&&ne<365){const Ve=((7&ne)<<18|(63&F[z++])<<12|(63&F[z++])<<6|63&F[z++])-65536;H[Ie++]=String.fromCharCode(55296+(Ve>>10)),H[Ie++]=String.fromCharCode(56320+(1023&Ve))}else{const ot=F[z++],X=F[z++];H[Ie++]=String.fromCharCode((15&ne)<<12|(63&ot)<<6|63&X)}}return H.join("")}(this.decodeStringToByteArray(F,H))},decodeStringToByteArray(F,H){this.init_();const z=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ne=0;ne<F.length;){const ot=z[F.charAt(ne++)],ve=ne<F.length?z[F.charAt(ne)]:0;++ne;const at=ne<F.length?z[F.charAt(ne)]:64;++ne;const Xe=ne<F.length?z[F.charAt(ne)]:64;if(++ne,null==ot||null==ve||null==at||null==Xe)throw Error();Ie.push(ot<<2|ve>>4),64!==at&&(Ie.push(ve<<4&240|at>>2),64!==Xe&&Ie.push(at<<6&192|Xe))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}},se=function(F){const H=oe(F);return _e.encodeByteArray(H,!0)},ce=function(F){return se(F).replace(/\./g,"")},ge=function(F){try{return _e.decodeString(F,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function V(F){return U(void 0,F)}function U(F,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return H}for(const z in H)!H.hasOwnProperty(z)||!Y(z)||(F[z]=U(F[z],H[z]));return F}function Y(F){return"__proto__"!==F}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,z)=>{this.resolve=H,this.reject=z})}wrapCallback(H){return(z,Ie)=>{z?this.reject(z):this.resolve(Ie),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(z):H(z,Ie))}}}function xe(F,H){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=H||"demo-project",ne=F.iat||0,ot=F.sub||F.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const X=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ne,exp:ne+3600,auth_time:ne,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}}},F);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(X)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function G(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(F){return!1}}function ie(){return"object"==typeof self&&self.self===self}function ke(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ue(){return je().indexOf("Electron/")>=0}function Ce(){const F=je();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function ye(){return je().indexOf("MSAppHost/")>=0}function Qe(){return!1}function J(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){return"object"==typeof indexedDB}function Z(){return new Promise((F,H)=>{try{let z=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ie);ne.onsuccess=()=>{ne.result.close(),z||self.indexedDB.deleteDatabase(Ie),F(!0)},ne.onupgradeneeded=()=>{z=!1},ne.onerror=()=>{var ot;H((null===(ot=ne.error)||void 0===ot?void 0:ot.message)||"")}}catch(z){H(z)}})}function pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class $e extends Error{constructor(H,z,Ie){super(z),this.code=H,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(H,z,Ie){this.service=H,this.serviceName=z,this.errors=Ie}create(H,...z){const Ie=z[0]||{},ne=`${this.service}/${H}`,ot=this.errors[H],X=ot?function Dt(F,H){return F.replace(Bt,(z,Ie)=>{const ne=H[Ie];return null!=ne?String(ne):`<${Ie}?>`})}(ot,Ie):"Error";return new $e(ne,`${this.serviceName}: ${X} (${ne}).`,Ie)}}const Bt=/\{\$([^}]+)}/g;function _n(F){return JSON.parse(F)}function ut(F){return JSON.stringify(F)}const pt=function(F){let H={},z={},Ie={},ne="";try{const ot=F.split(".");H=_n(ge(ot[0])||""),z=_n(ge(ot[1])||""),ne=ot[2],Ie=z.d||{},delete z.d}catch(ot){}return{header:H,claims:z,data:Ie,signature:ne}},Bn=function(F){const z=pt(F).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Ht=function(F){const H=pt(F).claims;return"object"==typeof H&&!0===H.admin};function kt(F,H){return Object.prototype.hasOwnProperty.call(F,H)}function ze(F,H){if(Object.prototype.hasOwnProperty.call(F,H))return F[H]}function gt(F){for(const H in F)if(Object.prototype.hasOwnProperty.call(F,H))return!1;return!0}function mt(F,H,z){const Ie={};for(const ne in F)Object.prototype.hasOwnProperty.call(F,ne)&&(Ie[ne]=H.call(z,F[ne],ne,F));return Ie}function jt(F,H){if(F===H)return!0;const z=Object.keys(F),Ie=Object.keys(H);for(const ne of z){if(!Ie.includes(ne))return!1;const ot=F[ne],X=H[ne];if(Xt(ot)&&Xt(X)){if(!jt(ot,X))return!1}else if(ot!==X)return!1}for(const ne of Ie)if(!z.includes(ne))return!1;return!0}function Xt(F){return null!==F&&"object"==typeof F}function qt(F){const H=[];for(const[z,Ie]of Object.entries(F))Array.isArray(Ie)?Ie.forEach(ne=>{H.push(encodeURIComponent(z)+"="+encodeURIComponent(ne))}):H.push(encodeURIComponent(z)+"="+encodeURIComponent(Ie));return H.length?"&"+H.join("&"):""}function Cn(F){const H={};return F.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ne,ot]=Ie.split("=");H[decodeURIComponent(ne)]=decodeURIComponent(ot)}}),H}function xn(F){const H=F.indexOf("?");if(!H)return"";const z=F.indexOf("#",H);return F.substring(H,z>0?z:void 0)}class bn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,z){z||(z=0);const Ie=this.W_;if("string"==typeof H)for(let Xe=0;Xe<16;Xe++)Ie[Xe]=H.charCodeAt(z)<<24|H.charCodeAt(z+1)<<16|H.charCodeAt(z+2)<<8|H.charCodeAt(z+3),z+=4;else for(let Xe=0;Xe<16;Xe++)Ie[Xe]=H[z]<<24|H[z+1]<<16|H[z+2]<<8|H[z+3],z+=4;for(let Xe=16;Xe<80;Xe++){const Ct=Ie[Xe-3]^Ie[Xe-8]^Ie[Xe-14]^Ie[Xe-16];Ie[Xe]=4294967295&(Ct<<1|Ct>>>31)}let at,st,ne=this.chain_[0],ot=this.chain_[1],X=this.chain_[2],ve=this.chain_[3],Ve=this.chain_[4];for(let Xe=0;Xe<80;Xe++){Xe<40?Xe<20?(at=ve^ot&(X^ve),st=1518500249):(at=ot^X^ve,st=1859775393):Xe<60?(at=ot&X|ve&(ot|X),st=2400959708):(at=ot^X^ve,st=3395469782);const Ct=(ne<<5|ne>>>27)+at+Ve+st+Ie[Xe]&4294967295;Ve=ve,ve=X,X=4294967295&(ot<<30|ot>>>2),ot=ne,ne=Ct}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+ot&4294967295,this.chain_[2]=this.chain_[2]+X&4294967295,this.chain_[3]=this.chain_[3]+ve&4294967295,this.chain_[4]=this.chain_[4]+Ve&4294967295}update(H,z){if(null==H)return;void 0===z&&(z=H.length);const Ie=z-this.blockSize;let ne=0;const ot=this.buf_;let X=this.inbuf_;for(;ne<z;){if(0===X)for(;ne<=Ie;)this.compress_(H,ne),ne+=this.blockSize;if("string"==typeof H){for(;ne<z;)if(ot[X]=H.charCodeAt(ne),++X,++ne,X===this.blockSize){this.compress_(ot),X=0;break}}else for(;ne<z;)if(ot[X]=H[ne],++X,++ne,X===this.blockSize){this.compress_(ot),X=0;break}}this.inbuf_=X,this.total_+=z}digest(){const H=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&z,z/=256;this.compress_(this.buf_);let Ie=0;for(let ne=0;ne<5;ne++)for(let ot=24;ot>=0;ot-=8)H[Ie]=this.chain_[ne]>>ot&255,++Ie;return H}}function zn(F,H){const z=new Ae(F,H);return z.subscribe.bind(z)}class Ae{constructor(H,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{H(this)}).catch(Ie=>{this.error(Ie)})}next(H){this.forEachObserver(z=>{z.next(H)})}error(H){this.forEachObserver(z=>{z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,z,Ie){let ne;if(void 0===H&&void 0===z&&void 0===Ie)throw new Error("Missing Observer.");ne=function Pe(F,H){if("object"!=typeof F||null===F)return!1;for(const z of H)if(z in F&&"function"==typeof F[z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:z,complete:Ie},void 0===ne.next&&(ne.next=qe),void 0===ne.error&&(ne.error=qe),void 0===ne.complete&&(ne.complete=qe);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(X){}}),this.observers.push(ne),ot}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,H)}sendOne(H,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{z(this.observers[H])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qe(){}function Je(F,H){return`${F} failed: ${H} argument `}const zt=function(F){const H=[];let z=0;for(let Ie=0;Ie<F.length;Ie++){let ne=F.charCodeAt(Ie);if(ne>=55296&&ne<=56319){const ot=ne-55296;Ie++,O(Ie<F.length,"Surrogate pair missing trail surrogate."),ne=65536+(ot<<10)+(F.charCodeAt(Ie)-56320)}ne<128?H[z++]=ne:ne<2048?(H[z++]=ne>>6|192,H[z++]=63&ne|128):ne<65536?(H[z++]=ne>>12|224,H[z++]=ne>>6&63|128,H[z++]=63&ne|128):(H[z++]=ne>>18|240,H[z++]=ne>>12&63|128,H[z++]=ne>>6&63|128,H[z++]=63&ne|128)}return H},yt=function(F){let H=0;for(let z=0;z<F.length;z++){const Ie=F.charCodeAt(z);Ie<128?H++:Ie<2048?H+=2:Ie>=55296&&Ie<=56319?(H+=4,z++):H+=3}return H};function Wt(F,H=1e3,z=2){const Ie=H*Math.pow(z,F),ne=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ne)}function en(F){return F&&F._delegate?F._delegate:F}},4301:(Tt,Me,x)=>{"use strict";var _=x(5e3);let O=null;function N(){return O}const se=new _.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ge(){return(0,_.LFG)(U)}()},providedIn:"platform"}),n})();const V=new _.OlP("Location Initialized");let U=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ue(){return new U((0,_.LFG)(se))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let G=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ie(n){const e=(0,_.LFG)(se).location;return new Re((0,_.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const ke=new _.OlP("appBaseHref");let Re=(()=>{class n extends G{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Le(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Le(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce),_.LFG(ke,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n extends G{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Le(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Le(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce),_.LFG(ke,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=je(J(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,J(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=xe,n.stripTrailingSlash=je,n.\u0275fac=function(t){return new(t||n)(_.LFG(G),_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ye(){return new Ce((0,_.LFG)(G),(0,_.LFG)(ce))}()},providedIn:"root"}),n})();function J(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const xn=_.kL8;class nn{}let xi=(()=>{class n extends nn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(xn(r||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.soG))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),fp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[{provide:nn,useClass:xi}]}),n})();const ua="browser";function $n(n){return n===ua}function yu(n){return"server"===n}let pp=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Gl((0,_.LFG)(se),window)}),n})();class Gl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gp(this.window.history)||gp(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function gp(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wu extends class Eu extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function me(n){O||(O=n)}(new wu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gd(){return Vn=Vn||document.querySelector("base"),Vn?Vn.getAttribute("href"):null}();return null==t?null:function la(n){ql=ql||document.createElement("a"),ql.setAttribute("href",n);const e=ql.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let ql,Vn=null;const Vr=new _.OlP("TRANSITION_ID"),Kl=[{provide:_.ip1,useFactory:function qd(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Vr,se,_.zs3],multi:!0}];class fs{static init(){(0,_.VLi)(new fs)}addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let si=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new _.OlP("EventManagerPlugins");let ca=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(To),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Zl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ms=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n extends Ms{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Co),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Co))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Co(n){N().remove(n)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Iu=/%COMP%/g;function He(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?He(n,i,t):(i=i.replace(Iu,n),t.push(i))}return t}function fn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Zd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case _.ifc.ShadowDom:return new Tu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=He(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ca),_.LFG(so),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Jl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Lt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Lt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fn(r)):this.eventManager.addEventListener(e,t,fn(r))}}class Zd extends Jl{constructor(e,t,r,i){super(e),this.component=r;const a=He(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function i_(n){return"_ngcontent-%COMP%".replace(Iu,n)}(i+"-"+r.id),this.hostAttr=function Kd(n){return"_nghost-%COMP%".replace(Iu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Tu extends Jl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=He(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const h=document.createElement("style");h.textContent=a[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let F0=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const _p=["alt","control","meta","shift"],Xl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ps={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ec=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(_p.forEach(m=>{const E=r.indexOf(m);E>-1&&(r.splice(E,1),c+=m+".")}),c+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function ha(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Cr.hasOwnProperty(e)&&(e=Cr[e]))}return Xl[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),_p.forEach(a=>{a!=i&&Ps[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Yd=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:ua},{provide:_.g9A,useValue:function Wi(){wu.makeCurrent(),fs.init()},multi:!0},{provide:se,useFactory:function tc(){return(0,_.RDi)(document),document},deps:[]}]),Qd=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function s_(){return new _.qLn},deps:[]},{provide:To,useClass:F0,multi:!0,deps:[se,_.R0b,_.Lbi]},{provide:To,useClass:ec,multi:!0,deps:[se]},{provide:qn,useClass:qn,deps:[ca,so,_.AFp]},{provide:_.FYo,useExisting:qn},{provide:Ms,useExisting:so},{provide:so,useClass:so,deps:[se]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:ca,useClass:ca,deps:[To,_.R0b]},{provide:class Hn{},useClass:si,deps:[]}];let Cu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Vr,useExisting:_.AFp},Kl]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:Qd,imports:[fp,_.hGG]}),n})(),bu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(se))},n.\u0275prov=_.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function nc(){return new bu((0,_.LFG)(se))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var wp=x(655),_r=x(8996),ps=x(7669);function Ot(...n){const e=(0,ps.yG)(n);return(0,_r.D)(n,e)}var zi=x(7579);class br extends zi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ai=x(8306);const{isArray:ar}=Array,{getPrototypeOf:fa,prototype:ih,keys:pa}=Object;var oc=x(4671),rn=x(4004);const{isArray:Ip}=Array;var ur=x(5403),sh=x(9672);function ga(...n){const e=(0,ps.yG)(n),t=(0,ps.jO)(n),{args:r,keys:i}=function Au(n){if(1===n.length){const e=n[0];if(ar(e))return{args:e,keys:null};if(function sc(n){return n&&"object"==typeof n&&fa(n)===ih}(e)){const t=pa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,_r.D)([],e);const a=new ai.y(function Ru(n,e,t=oc.y){return r=>{uc(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let m=0;m<i;m++)uc(e,()=>{const E=(0,_r.D)(n[m],e);let C=!1;E.subscribe((0,ur.x)(r,b=>{a[m]=b,C||(C=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function Fs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):oc.y));return t?a.pipe(function Tp(n){return(0,rn.U)(e=>function ac(n,e){return Ip(e)?n(...e):n(e)}(n,e))}(t)):a}function uc(n,e,t){n?(0,sh.f)(t,n,e):e()}const Ao=(0,x(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ma=x(8189);function oh(...n){return function bp(){return(0,ma.J)(1)}()((0,_r.D)(n,(0,ps.yG)(n)))}var ah=x(8421);function _a(n){return new ai.y(e=>{(0,ah.Xf)(n()).subscribe(e)})}var gs=x(515),Dp=x(727),Yr=x(4482);function xu(){return(0,Yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ur.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ya extends ai.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ur.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dp.w0.EMPTY)}return e}refCount(){return xu()(this)}}function Dr(n,e){return(0,Yr.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,ur.x)(r,m=>{null==i||i.unsubscribe();let E=0;const C=a++;(0,ah.Xf)(n(m,C)).subscribe(i=(0,ur.x)(r,b=>r.next(e?e(m,b,C,E++):b),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Ro=x(5698);function xo(...n){const e=(0,ps.yG)(n);return(0,Yr.e)((t,r)=>{(e?oh(n,t,e):oh(n,t)).subscribe(r)})}function va(n,e,t,r,i){return(a,c)=>{let h=t,m=e,E=0;a.subscribe((0,ur.x)(c,C=>{const b=E++;m=h?n(m,C,b):(h=!0,C),r&&c.next(m)},i&&(()=>{h&&c.next(m),c.complete()})))}}function Ii(n,e){return(0,Yr.e)(va(n,e,arguments.length>=2,!0))}function Br(n,e){return(0,Yr.e)((t,r)=>{let i=0;t.subscribe((0,ur.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Ls(n){return(0,Yr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ur.x)(t,void 0,void 0,c=>{a=(0,ah.Xf)(n(c,Ls(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var yr=x(5577),Us=x(576);function lc(n,e){return(0,Us.m)(e)?(0,yr.z)(n,e,1):(0,yr.z)(n,1)}function uh(n){return n<=0?()=>gs.E:(0,Yr.e)((e,t)=>{let r=[];e.subscribe((0,ur.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zn(n=g_){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function g_(){return new Ao}function m_(n){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):oc.y,(0,Ro.q)(1),t?m_(e):Zn(()=>new Ao))}var Ni=x(8505);class ms{constructor(e,t){this.id=e,this.url=t}}class No extends ms{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wa extends ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lr extends ms{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nu extends ms{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mu extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sp extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cc extends ms{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ui extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _s extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ou{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y_{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ap{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ln="primary";class lh{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sr(n){return new lh(n)}const hc="ngNavigationCancelingError";function ys(n){const e=Error("NavigationCancelingError: "+n);return e[hc]=!0,e}function fc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!pc(n[i],e[i]))return!1;return!0}function pc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Rp(n){return Array.prototype.concat.apply([],n)}function ku(n){return n.length>0?n[n.length-1]:null}function vr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qr(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,_r.D)(Promise.resolve(n)):Ot(n)}const Mo={exact:function Mp(n,e,t){if(!Ta(n.segments,e.segments)||!ao(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Mp(n.children[r],e.children[r],t))return!1;return!0},subset:Fu},gc={exact:function Np(n,e){return Mi(n,e)},subset:function I_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pc(n[t],e[t]))},ignored:()=>!0};function Ia(n,e,t){return Mo[t.paths](n.root,e.root,t.matrixParams)&&gc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fu(n,e,t){return Pp(n,e,e.segments,t)}function Pp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ta(i,t)||e.hasChildren()||!ao(i,t,r))}if(n.segments.length===t.length){if(!Ta(n.segments,t)||!ao(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Fu(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ta(n.segments,i)&&ao(n.segments,i,r)&&n.children[ln])&&Pp(n.children[ln],e,a,r)}}function ao(n,e,t){return e.every((r,i)=>gc[t](n[i].parameters,r.parameters))}class vs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return Op.serialize(this)}}class pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ca(this)}}class sr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sr(this.parameters)),this._parameterMap}toString(){return Uu(this)}}function Ta(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class uo{}class _c{parse(e){const t=new C_(e);return new vs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vs(e.root,!0)}`,r=function T_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ba(t)}=${ba(i)}`).join("&"):`${ba(t)}=${ba(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Po(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Op=new _c;function Ca(n){return n.segments.map(e=>Uu(e)).join("/")}function Vs(n,e){if(!n.hasChildren())return Ca(n);if(e){const t=n.children[ln]?Vs(n.children[ln],!1):"",r=[];return vr(n.children,(i,a)=>{a!==ln&&r.push(`${a}:${Vs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lu(n,e){let t=[];return vr(n.children,(r,i)=>{i===ln&&(t=t.concat(e(r,i)))}),vr(n.children,(r,i)=>{i!==ln&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ln?[Vs(n.children[ln],!1)]:[`${i}:${Vs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${Ca(n)}/${t[0]}`:`${Ca(n)}/(${t.join("//")})`}}function Bs(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ba(n){return Bs(n).replace(/%3B/gi,";")}function ch(n){return Bs(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Da(n){return decodeURIComponent(n)}function Sa(n){return Da(n.replace(/\+/g,"%20"))}function Uu(n){return`${ch(n.path)}${function kp(n){return Object.keys(n).map(e=>`;${ch(e)}=${ch(n[e])}`).join("")}(n.parameters)}`}const dh=/^[^\/()?;=#]+/;function js(n){const e=n.match(dh);return e?e[0]:""}const Vu=/^[^=?&#]+/,B0=/^[^&#]+/;class C_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ln]=new pn(e,t)),r}parseSegment(){const e=js(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new sr(Da(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=js(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=js(this.remaining);i&&(r=i,this.capture(r))}e[Da(t)]=Da(r)}parseQueryParam(e){const t=function Fp(n){const e=n.match(Vu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Bu(n){const e=n.match(B0);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Sa(t),a=Sa(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=js(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=ln);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[ln]:new pn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class b_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fh(e,this._root).map(t=>t.value)}}function hh(n,e){if(n===e.value)return e;for(const t of e.children){const r=hh(n,t);if(r)return r}return null}function fh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fh(n,t);if(r.length)return r.unshift(e),r}return[]}class $s{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Hs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yc extends b_{constructor(e,t){super(e),this.snapshot=t,ju(this,e)}toString(){return this.snapshot.toString()}}function Oo(n,e){const t=function ph(n,e){const c=new Ra([],{},{},"",{},ln,e,null,n.root,-1,{});return new gh("",new $s(c,[]))}(n,e),r=new br([new sr("",{})]),i=new br({}),a=new br({}),c=new br({}),h=new br(""),m=new Aa(r,i,c,h,a,ln,e,t.root);return m.snapshot=t.root,new yc(new $s(m,[]),t)}class Aa{constructor(e,t,r,i,a,c,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rn.U)(e=>Sr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rn.U)(e=>Sr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function D_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function vc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ra{constructor(e,t,r,i,a,c,h,m,E,C,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=m,this._urlSegment=E,this._lastPathIndex=C,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gh extends b_{constructor(e,t){super(t),this.url=e,ju(this,t)}toString(){return mh(this._root)}}function ju(n,e){e.value._routerState=n,e.children.forEach(t=>ju(n,t))}function mh(n){const e=n.children.length>0?` { ${n.children.map(mh).join(", ")} } `:"";return`${n.value}${e}`}function Ec(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mi(e.params,t.params)||n.params.next(t.params),function E_(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _h(n,e){const t=Mi(n.params,e.params)&&function mc(n,e){return Ta(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_h(n.parent,e.parent))}function ko(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function A_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ko(n,r,i);return ko(n,r)})}(n,e,t);return new $s(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>ko(n,h)),c}}const r=function yh(n){return new Aa(new br(n.url),new br(n.params),new br(n.queryParams),new br(n.fragment),new br(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ko(n,a));return new $s(r,i)}}function Ws(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $u(n){return"object"==typeof n&&null!=n&&n.outlets}function wc(n,e,t,r,i){let a={};return r&&vr(r,(c,h)=>{a[h]=Array.isArray(c)?c.map(m=>`${m}`):`${c}`}),new vs(t.root===n?e:R_(t.root,n,e),a,i)}function R_(n,e,t){const r={};return vr(n.children,(i,a)=>{r[a]=i===e?t:R_(i,e,t)}),new pn(n.segments,r)}class Lp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ws(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find($u);if(i&&i!==ku(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Up{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function v(n,e,t){if(n||(n=new pn([],{})),0===n.segments.length&&n.hasChildren())return p(n,e,t);const r=function g(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if($u(h))break;const m=`${h}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&E&&"object"==typeof E&&void 0===E.outlets){if(!te(m,E,c))return a;r+=2}else{if(!te(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new pn(n.segments.slice(0,r.pathIndex),{});return a.children[ln]=new pn(n.segments.slice(r.pathIndex),n.children),p(a,0,i)}return r.match&&0===i.length?new pn(n.segments,{}):r.match&&!n.hasChildren()?I(n,e,t):r.match?p(n,0,i):I(n,e,t)}function p(n,e,t){if(0===t.length)return new pn(n.segments,{});{const r=function M_(n){return $u(n[0])?n[0].outlets:{[ln]:n}}(t),i={};return vr(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=v(n.children[c],e,a))}),vr(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new pn(n.segments,i)}}function I(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if($u(a)){const m=S(a.outlets);return new pn(r,m)}if(0===i&&Ws(t[0])){r.push(new sr(n.segments[e].path,M(t[0]))),i++;continue}const c=$u(a)?a.outlets[ln]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&Ws(h)?(r.push(new sr(c,M(h))),i+=2):(r.push(new sr(c,{})),i++)}return new pn(r,{})}function S(n){const e={};return vr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I(new pn([],{}),0,t))}),e}function M(n){const e={};return vr(n,(t,r)=>e[r]=`${t}`),e}function te(n,e,t){return n==t.path&&Mi(e,t.parameters)}class wt{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ec(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Hs(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),vr(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Hs(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Hs(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Hs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ap(a.value.snapshot))}),e.children.length&&this.forwardEvent(new dc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ec(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Ec(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function Ut(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=m,c.outlet&&c.outlet.activateWith(i,m),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class sn{constructor(e,t){this.routes=e,this.module=t}}function Dn(n){return"function"==typeof n}function Ti(n){return n instanceof vs}const Wu=Symbol("INITIAL_VALUE");function co(){return Dr(n=>ga(n.map(e=>e.pipe((0,Ro.q)(1),xo(Wu)))).pipe(Ii((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Wu?i:(a===Wu&&(r=!0),r||!1!==a&&c!==t.length-1&&!Ti(a)?i:a),e)},Wu),Br(e=>e!==Wu),(0,rn.U)(e=>Ti(e)?e:!0===e),(0,Ro.q)(1)))}class Bp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Na,this.attachRef=null}}class Na{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Bp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Tc=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=a||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new jp(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Na),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class jp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Aa?this.route:e===Na?this.childContexts:this.parent.get(e,t)}}let Cc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[Tc],encapsulation:2}),n})();function Fo(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];O_(r,k_(e,r))}}function O_(n,e){n.children&&Fo(n.children,e)}function k_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function F_(n){const e=n.children&&n.children.map(F_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=Cc),t}function Sn(n){return n.outlet||ln}function j0(n,e){const t=n.filter(r=>Sn(r)===e);return t.push(...n.filter(r=>Sn(r)!==e)),t}const $0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function bc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||fc)(t,n,e);if(!a)return Object.assign({},$0);const c={};vr(a.posParams,(m,E)=>{c[E]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function vh(n,e,t,r,i="corrected"){if(t.length>0&&function Mb(n,e,t){return t.some(r=>$p(n,e,r)&&Sn(r)!==ln)}(n,t,r)){const c=new pn(e,function Nb(n,e,t,r){const i={};i[ln]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Sn(a)!==ln){const c=new pn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Sn(a)]=c}return i}(n,e,r,new pn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Pb(n,e,t){return t.some(r=>$p(n,e,r))}(n,t,r)){const c=new pn(n.segments,function xb(n,e,t,r,i,a){const c={};for(const h of r)if($p(n,t,h)&&!i[Sn(h)]){const m=new pn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[Sn(h)]=m}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new pn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function $p(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ob(n,e,t,r){return!!(Sn(n)===r||r!==ln&&$p(e,t,n))&&("**"===n.path||bc(e,n,t).matched)}function kb(n,e,t){return 0===e.length&&!n.children[t]}class Lo{constructor(e){this.segmentGroup=e||null}}class li{constructor(e){this.urlTree=e}}function Dc(n){return new ai.y(e=>e.error(new Lo(n)))}function L_(n){return new ai.y(e=>e.error(new li(n)))}function H0(n){return new ai.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class U_{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=vh(this.urlTree.root,[],[],this.config).segmentGroup,t=new pn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ln).pipe((0,rn.U)(a=>this.createUrlTree(V_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ls(a=>{if(a instanceof li)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Lo?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ln).pipe((0,rn.U)(i=>this.createUrlTree(V_(i),e.queryParams,e.fragment))).pipe(Ls(i=>{throw i instanceof Lo?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new pn([],{[ln]:e}):e;return new vs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rn.U)(a=>new pn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,_r.D)(i).pipe(lc(a=>{const c=r.children[a],h=j0(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,rn.U)(m=>({segment:m,outlet:a})))}),Ii((a,c)=>(a[c.outlet]=c.segment,a),{}),function __(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):oc.y,uh(1),t?m_(e):Zn(()=>new Ao))}())}expandSegment(e,t,r,i,a,c){return(0,_r.D)(r).pipe(lc(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(Ls(E=>{if(E instanceof Lo)return Ot(null);throw E}))),Ea(h=>!!h),Ls((h,m)=>{if(h instanceof Ao||"EmptyError"===h.name){if(kb(t,i,a))return Ot(new pn([],{}));throw new Lo(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return Ob(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Dc(t):Dc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?L_(a):this.lineralizeSegments(r,a).pipe((0,yr.z)(c=>{const h=new pn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:m,lastChild:E,positionalParamSegments:C}=bc(t,i,a);if(!h)return Dc(t);const b=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?L_(b):this.lineralizeSegments(i,b).pipe((0,yr.z)(R=>this.expandSegment(e,t,r,R.concat(a.slice(E)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ot(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,rn.U)(R=>(r._loadedConfig=R,new pn(i,{})))):Ot(new pn(i,{}));const{matched:c,consumedSegments:h,lastChild:m}=bc(t,r,i);if(!c)return Dc(t);const E=i.slice(m);return this.getChildConfig(e,r,i).pipe((0,yr.z)(b=>{const R=b.module,k=b.routes,{segmentGroup:W,slicedSegments:we}=vh(t,h,E,k),Fe=new pn(W.segments,W.children);if(0===we.length&&Fe.hasChildren())return this.expandChildren(R,k,Fe).pipe((0,rn.U)(Nt=>new pn(h,Nt)));if(0===k.length&&0===we.length)return Ot(new pn(h,{}));const xt=Sn(r)===a;return this.expandSegment(R,Fe,k,we,xt?ln:a,!0).pipe((0,rn.U)(Jt=>new pn(h.concat(Jt.segments),Jt.children)))}))}getChildConfig(e,t,r){return t.children?Ot(new sn(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ot(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,rn.U)(a=>(t._loadedConfig=a,a))):function ci(n){return new ai.y(e=>e.error(ys(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Ot(new sn([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ot(i.map(c=>{const h=e.get(c);let m;if(function xa(n){return n&&Dn(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!Dn(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return Qr(m)})).pipe(co(),(0,Ni.b)(c=>{if(!Ti(c))return;const h=ys(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,rn.U)(c=>!0===c)):Ot(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ot(r);if(i.numberOfChildren>1||!i.children[ln])return H0(e.redirectTo);i=i.children[ln]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new vs(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return vr(t.children,(h,m)=>{c[m]=this.createSegmentGroup(e,h,r,i)}),new pn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function V_(n){const e={};for(const r of Object.keys(n.children)){const a=V_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Fb(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new pn(n.segments.concat(e.segments),e.children)}return n}(new pn(n.segments,e))}class z0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wh{constructor(e,t){this.component=e,this.route=t}}function Lb(n,e,t){const r=n._root;return zu(r,e?e._root:null,t,[r.value])}function Hp(n,e,t){const r=function Ub(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Hs(e);return n.children.forEach(c=>{(function Vb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function Bb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ta(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ta(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_h(n,e)||!Mi(n.queryParams,e.queryParams);default:return!_h(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new z0(r)):(a.data=c.data,a._resolvedData=c._resolvedData),zu(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new wh(h.outlet.component,c))}else c&&Gu(e,h,i),i.canActivateChecks.push(new z0(r)),zu(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),vr(a,(c,h)=>Gu(c,t.getContext(h),i)),i}function Gu(n,e,t){const r=Hs(n),i=n.value;vr(r,(a,c)=>{Gu(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new wh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class q0{}function K0(n){return new ai.y(e=>e.error(n))}class Zb{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=vh(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ln);if(null===t)return null;const r=new Ra([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $s(r,t),a=new gh(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=D_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],h=j0(e,a),m=this.processSegmentGroup(h,c,a);if(null===m)return null;r.push(...m)}const i=Y0(r);return function Yb(n){n.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return kb(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ob(e,t,r,i))return null;let a,c=[],h=[];if("**"===e.path){const k=r.length>0?ku(r).parameters:{};a=new Ra(r,k,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jb(e),Sn(e),e.component,e,qu(t),Gs(t)+r.length,Xb(e))}else{const k=bc(t,e,r);if(!k.matched)return null;c=k.consumedSegments,h=r.slice(k.lastChild),a=new Ra(c,k.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jb(e),Sn(e),e.component,e,qu(t),Gs(t)+c.length,Xb(e))}const m=function Z0(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:C}=vh(t,c,h,m.filter(k=>void 0===k.redirectTo),this.relativeLinkResolution);if(0===C.length&&E.hasChildren()){const k=this.processChildren(m,E);return null===k?null:[new $s(a,k)]}if(0===m.length&&0===C.length)return[new $s(a,[])];const b=Sn(e)===i,R=this.processSegment(m,E,C,b?ln:i);return null===R?null:[new $s(a,R)]}}function Qb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Y0(n){const e=[],t=new Set;for(const r of n){if(!Qb(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Y0(r.children);e.push(new $s(r.value,i))}return e.filter(r=>!t.has(r))}function qu(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Gs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Jb(n){return n.data||{}}function Xb(n){return n.resolve||{}}function Wp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zp(n){return Dr(e=>{const t=n(e);return t?(0,_r.D)(t).pipe((0,rn.U)(()=>e)):Ot(e)})}class X0 extends class J0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ch=new _.OlP("ROUTES");class Gp{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,rn.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new sn(Rp(c.injector.get(Ch,void 0,_.XFs.Self|_.XFs.Optional)).map(F_),c)}),Ls(a=>{throw t._loader$=void 0,a}));return t._loader$=new ya(i,()=>new zi.x).pipe(xu()),t._loader$}loadModuleFactory(e){return Qr(e()).pipe((0,yr.z)(t=>t instanceof _.YKP?Ot(t):(0,_r.D)(this.compiler.compileModuleAsync(t))))}}class Px{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Sc(n){throw n}function j_(n,e,t){return e.parse("/")}function $_(n,e){return Ot(null)}const tD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{constructor(t,r,i,a,c,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new zi.x,this.errorHandler=Sc,this.malformedUriErrorHandler=j_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$_,afterPreactivation:$_},this.urlHandlingStrategy=new Px,this.routeReuseStrategy=new X0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(_.h0i),this.console=c.get(_.c2e);const b=c.get(_.R0b);this.isNgZoneEnabled=b instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function xp(){return new vs(new pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gp(c,h,R=>this.triggerEvent(new Pu(R)),R=>this.triggerEvent(new Ou(R))),this.routerState=Oo(this.currentUrlTree,this.rootComponentType),this.transitions=new br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Br(i=>0!==i.id),(0,rn.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dr(i=>{let a=!1,c=!1;return Ot(i).pipe((0,Ni.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dr(h=>{const m=this.browserUrlTree.toString(),E=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return qp(h.source)&&(this.browserUrlTree=h.extractedUrl),Ot(h).pipe(Dr(b=>{const R=this.transitions.getValue();return r.next(new No(b.id,this.serializeUrl(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions.getValue()?gs.E:Promise.resolve(b)}),function W0(n,e,t,r){return Dr(i=>function Eh(n,e,t,r,i){return new U_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,rn.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ni.b)(b=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:b.urlAfterRedirects})}),function Q0(n,e,t,r,i){return(0,yr.z)(a=>function Kb(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new Zb(n,e,t,r,i,a).recognize();return null===c?K0(new q0):Ot(c)}catch(c){return K0(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,rn.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,b=>this.serializeUrl(b),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ni.b)(b=>{if("eager"===this.urlUpdateStrategy){if(!b.extras.skipLocationChange){const k=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.setBrowserUrl(k,b)}this.browserUrlTree=b.urlAfterRedirects}const R=new Mu(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);r.next(R)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:k,source:W,restoredState:we,extras:Fe}=h,xt=new No(R,this.serializeUrl(k),W,we);r.next(xt);const Vt=Oo(k,this.rootComponentType).snapshot;return Ot(Object.assign(Object.assign({},h),{targetSnapshot:Vt,urlAfterRedirects:k,extras:Object.assign(Object.assign({},Fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),gs.E}),zp(h=>{const{targetSnapshot:m,id:E,extractedUrl:C,rawUrl:b,extras:{skipLocationChange:R,replaceUrl:k}}=h;return this.hooks.beforePreactivation(m,{navigationId:E,appliedUrlTree:C,rawUrlTree:b,skipLocationChange:!!R,replaceUrl:!!k})}),(0,Ni.b)(h=>{const m=new Sp(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,rn.U)(h=>Object.assign(Object.assign({},h),{guards:Lb(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function jb(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?Ot(Object.assign(Object.assign({},t),{guardsResult:!0})):function $b(n,e,t,r){return(0,_r.D)(n).pipe((0,yr.z)(i=>function qb(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ot(a.map(h=>{const m=Hp(h,e,i);let E;if(function P_(n){return n&&Dn(n.canDeactivate)}(m))E=Qr(m.canDeactivate(n,e,t,r));else{if(!Dn(m))throw new Error("Invalid CanDeactivate guard");E=Qr(m(n,e,t,r))}return E.pipe(Ea())})).pipe(co()):Ot(!0)}(i.component,i.route,t,e,r)),Ea(i=>!0!==i,!0))}(c,r,i,n).pipe((0,yr.z)(h=>h&&function zs(n){return"boolean"==typeof n}(h)?function Ih(n,e,t,r){return(0,_r.D)(e).pipe(lc(i=>oh(function Wb(n,e){return null!==n&&e&&e(new Gi(n)),Ot(!0)}(i.route.parent,r),function Hb(n,e){return null!==n&&e&&e(new y_(n)),Ot(!0)}(i.route,r),function Gb(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function G0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>_a(()=>Ot(c.guards.map(m=>{const E=Hp(m,c.node,t);let C;if(function Hu(n){return n&&Dn(n.canActivateChild)}(E))C=Qr(E.canActivateChild(r,n));else{if(!Dn(E))throw new Error("Invalid CanActivateChild guard");C=Qr(E(r,n))}return C.pipe(Ea())})).pipe(co())));return Ot(a).pipe(co())}(n,i.path,t),function zb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ot(!0);const i=r.map(a=>_a(()=>{const c=Hp(a,e,t);let h;if(function Ic(n){return n&&Dn(n.canActivate)}(c))h=Qr(c.canActivate(e,n));else{if(!Dn(c))throw new Error("Invalid CanActivate guard");h=Qr(c(e,n))}return h.pipe(Ea())}));return Ot(i).pipe(co())}(n,i.route,t))),Ea(i=>!0!==i,!0))}(r,a,n,e):Ot(h)),(0,rn.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ni.b)(h=>{if(Ti(h.guardsResult)){const E=ys(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw E.url=h.guardsResult,E}const m=new cc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Br(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),zp(h=>{if(h.guards.canActivateChecks.length)return Ot(h).pipe((0,Ni.b)(m=>{const E=new ui(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),Dr(m=>{let E=!1;return Ot(m).pipe(function Mx(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ot(t);let a=0;return(0,_r.D)(i).pipe(lc(c=>function ho(n,e,t,r){return function B_(n,e,t,r){const i=Wp(n);if(0===i.length)return Ot({});const a={};return(0,_r.D)(i).pipe((0,yr.z)(c=>function eD(n,e,t,r){const i=Hp(n,e,r);return Qr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Ni.b)(h=>{a[c]=h}))),uh(1),(0,yr.z)(()=>Wp(a).length===i.length?Ot(a):gs.E))}(n._resolve,n,e,r).pipe((0,rn.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),D_(n,t).resolve),null)))}(c.route,r,n,e)),(0,Ni.b)(()=>a++),uh(1),(0,yr.z)(c=>a===i.length?Ot(t):gs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ni.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Ni.b)(m=>{const E=new _s(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}))}),zp(h=>{const{targetSnapshot:m,id:E,extractedUrl:C,rawUrl:b,extras:{skipLocationChange:R,replaceUrl:k}}=h;return this.hooks.afterPreactivation(m,{navigationId:E,appliedUrlTree:C,rawUrlTree:b,skipLocationChange:!!R,replaceUrl:!!k})}),(0,rn.U)(h=>{const m=function S_(n,e,t){const r=ko(n,e._root,t?t._root:void 0);return new yc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,Ni.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,rn.U)(r=>(new wt(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ni.b)({next(){a=!0},complete(){a=!0}}),function U0(n){return(0,Yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Ls(h=>{if(c=!0,function V0(n){return n&&n[hc]}(h)){const m=Ti(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const E=new lr(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(E),m?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qp(i.source)};this.scheduleNavigation(C,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Nu(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(E){i.reject(E)}}return gs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const m=Object.assign({},c);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fo(t),this.config=t.map(F_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:m}=r,E=i||this.routerState.root,C=m?this.currentUrlTree.fragment:c;let b=null;switch(h){case"merge":b=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}return null!==b&&(b=this.removeEmptyProps(b)),function lo(n,e,t,r,i){if(0===t.length)return wc(e.root,e.root,e,r,i);const a=function x_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Lp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return vr(a.outlets,(m,E)=>{h[E]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Lp(t,e,r)}(t);if(a.toRoot())return wc(e.root,new pn([],{}),e,r,i);const c=function Vp(n,e,t){if(n.isAbsolute)return new Up(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Up(a,a===e.root,0)}const r=Ws(n.commands[0])?0:1;return function N_(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Up(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=c.processChildren?p(c.segmentGroup,c.index,a.commands):v(c.segmentGroup,c.index,a.commands);return wc(c.segmentGroup,h,e,r,i)}(E,this.currentUrlTree,t,b,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ti(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function nD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},tD):!1===r?Object.assign({},H_):r,Ti(t))return Ia(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ia(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var h,m,E;if(this.disposed)return Promise.resolve(!1);const C=this.transitions.value,b=qp(r)&&C&&!qp(C.source),R=C.rawUrl.toString()===t.toString(),k=C.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(b&&R&&k)return Promise.resolve(!0);let we,Fe,xt;c?(we=c.resolve,Fe=c.reject,xt=c.promise):xt=new Promise((Nt,Pn)=>{we=Nt,Fe=Pn});const Vt=++this.navigationId;let Jt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Jt=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Jt=0,this.setTransition({id:Vt,targetPageId:Jt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:we,reject:Fe,promise:xt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xt.catch(Nt=>Promise.reject(Nt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new lr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function qp(n){return"imperative"!==n}class q_{}class nw{preload(e,t){return Ot(null)}}let rw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Gp(i,r,m=>t.triggerEvent(new Pu(m)),m=>t.triggerEvent(new Ou(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Br(t=>t instanceof wa),lc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,_r.D)(i).pipe((0,ma.J)(),(0,rn.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ot(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Pi),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(q_))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Kp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof No?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof v_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new v_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const qi=new _.OlP("ROUTER_CONFIGURATION"),Z_=new _.OlP("ROUTER_FORROOT_GUARD"),iw=[Ce,{provide:uo,useClass:_c},{provide:Pi,useFactory:function Q_(n,e,t,r,i,a,c={},h,m){const E=new Pi(null,n,e,t,r,i,Rp(a));return h&&(E.urlHandlingStrategy=h),m&&(E.routeReuseStrategy=m),function aw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),c.enableTracing&&E.events.subscribe(C=>{var b,R;null===(b=console.group)||void 0===b||b.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(R=console.groupEnd)||void 0===R||R.call(console)}),E},deps:[uo,Na,Ce,_.zs3,_.Sil,Ch,qi,[class ew{},new _.FiY],[class Th{},new _.FiY]]},Na,{provide:Aa,useFactory:function Zp(n){return n.routerState.root},deps:[Pi]},rw,nw,class K_{preload(e,t){return t().pipe(Ls(()=>Ot(null)))}},{provide:qi,useValue:{enableTracing:!1}}];function iD(){return new _.PXZ("Router",Pi)}let bh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[iw,Y_(t),{provide:Z_,useFactory:ow,deps:[[Pi,new _.FiY,new _.tp0]]},{provide:qi,useValue:r||{}},{provide:G,useFactory:sw,deps:[ce,[new _.tBr(ke),new _.FiY],qi]},{provide:Kp,useFactory:sD,deps:[Pi,pp,qi]},{provide:q_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nw},{provide:_.PXZ,multi:!0,useFactory:iD},[Rc,{provide:_.ip1,multi:!0,useFactory:uw,deps:[Rc]},{provide:X_,useFactory:J_,deps:[Rc]},{provide:_.tb,multi:!0,useExisting:X_}]]}}static forChild(t){return{ngModule:n,providers:[Y_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Z_,8),_.LFG(Pi,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function sD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Kp(n,e,t)}function sw(n,e,t={}){return t.useHash?new ue(n,e):new Re(n,e)}function ow(n){return"guarded"}function Y_(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:Ch,multi:!0,useValue:n}]}let Rc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new zi.x}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Pi),c=this.injector.get(qi);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Ot(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(qi),i=this.injector.get(rw),a=this.injector.get(Kp),c=this.injector.get(Pi),h=this.injector.get(_.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function uw(n){return n.appInitializer.bind(n)}function J_(n){return n.bootstrapListener.bind(n)}const X_=new _.OlP("Router Initializer"),oD=[];let lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[bh.forRoot(oD)],bh]}),n})();var aD=x(4986),lt=x(4027);function Dh(){return(0,Yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,ur.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Qp(n,e=oc.y){return n=null!=n?n:cw,(0,Yr.e)((t,r)=>{let i,a=!0;t.subscribe((0,ur.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function cw(n,e){return n===e}var It,fo=x(2011),lD=(x(5881),x(3942)),Te=x(5861),An=x(9681),Ma=x(4859),cr=x(1877),K=x(2090),dw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Uo={},ty=ty||{},Qt=dw||self;function Sh(){}function ny(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ah(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zt="closure_uid_"+(1e9*Math.random()>>>0),hw=0;function fw(n,e,t){return n.call.apply(n.bind,arguments)}function pw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ar(n,e,t){return(Ar=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fw:pw).apply(null,arguments)}function Oi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function jr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Pa(){this.s=this.s,this.o=this.o}var Vo={};Pa.prototype.s=!1,Pa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function cD(n){return Object.prototype.hasOwnProperty.call(n,Zt)&&n[Zt]||(n[Zt]=++hw)}(this);delete Vo[n]}},Pa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},iy=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function dD(n){return Array.prototype.concat.apply([],arguments)}function Xp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function oy(n){return/^[\s\xa0]*$/.test(n)}var Jr,Rh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $r(n,e){return-1!=n.indexOf(e)}function xh(n,e){return n<e?-1:n>e?1:0}e:{var eg=Qt.navigator;if(eg){var hD=eg.userAgent;if(hD){Jr=hD;break e}}Jr=""}function ay(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gw(n){const e={};for(const t in n)e[t]=n[t];return e}var mw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _w(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<mw.length;a++)t=mw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tg(n){return tg[" "](n),n}tg[" "]=Sh;var cy,n,fD=$r(Jr,"Opera"),Nh=$r(Jr,"Trident")||$r(Jr,"MSIE"),uy=$r(Jr,"Edge"),ng=uy||Nh,yw=$r(Jr,"Gecko")&&!($r(Jr.toLowerCase(),"webkit")&&!$r(Jr,"Edge"))&&!($r(Jr,"Trident")||$r(Jr,"MSIE"))&&!$r(Jr,"Edge"),ly=$r(Jr.toLowerCase(),"webkit")&&!$r(Jr,"Edge");function pD(){var n=Qt.document;return n?n.documentMode:void 0}e:{var vw="",Ew=(n=Jr,yw?/rv:([^\);]+)(\)|;)/.exec(n):uy?/Edge\/([\d\.]+)/.exec(n):Nh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ly?/WebKit\/(\S+)/.exec(n):fD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ew&&(vw=Ew?Ew[1]:""),Nh){var ww=pD();if(null!=ww&&ww>parseFloat(vw)){cy=String(ww);break e}}cy=vw}var kx={};var Lx=Qt.document&&Nh&&(pD()||parseInt(cy,10))||void 0,Oa=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",Sh,e),Qt.removeEventListener("test",Sh,e)}catch(t){}return n}();function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Mh(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yw){e:{try{tg(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Tw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Mh.Z.h.call(this)}}Hr.prototype.h=function(){this.defaultPrevented=!0},jr(Mh,Hr);var Tw={2:"touch",3:"pen",4:"mouse"};Mh.prototype.h=function(){Mh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ku="closure_listenable_"+(1e6*Math.random()|0),Cw=0;function dy(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Cw,this.ca=this.fa=!1}function rg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function qs(n){this.src=n,this.g={},this.h=0}function ig(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Jp(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(rg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hy(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}qs.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=hy(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new dy(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Ph="closure_lm_"+(1e6*Math.random()|0),fy={};function py(n,e,t,r,i){if(r&&r.once)return xc(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)py(n,e[a],t,r,i);return null}return t=sg(t),n&&n[Ku]?n.N(e,t,Ah(r)?!!r.capture:!!r,i):bw(n,e,t,!1,r,i)}function bw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Ah(i)?!!i.capture:!!i,h=ka(n);if(h||(n[Ph]=h=new qs(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function mD(){var e=kh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Oa||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Yu(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function xc(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)xc(n,e[a],t,r,i);return null}return t=sg(t),n&&n[Ku]?n.O(e,t,Ah(r)?!!r.capture:!!r,i):bw(n,e,t,!0,r,i)}function Zu(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Zu(n,e[a],t,r,i);else r=Ah(r)?!!r.capture:!!r,t=sg(t),n&&n[Ku]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hy(a=n.g[e],t,r,i))&&(rg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ka(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hy(e,t,r,i)),(t=-1<n?e[n]:null)&&Oh(t))}function Oh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ku])ig(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Yu(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ka(e))?(ig(t,n),0==t.h&&(t.src=null,e[Ph]=null)):rg(n)}}}function Yu(n){return n in fy?fy[n]:fy[n]="on"+n}function kh(n,e){if(n.ca)n=!0;else{e=new Mh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Oh(n),n=t.call(r,e)}return n}function ka(n){return(n=n[Ph])instanceof qs?n:null}var gy="__closure_events_fn_"+(1e9*Math.random()>>>0);function sg(n){return"function"==typeof n?n:(n[gy]||(n[gy]=function(e){return n.handleEvent(e)}),n[gy])}function Mr(){Pa.call(this),this.i=new qs(this),this.P=this,this.I=null}function Pr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;_w(e=new Hr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Nc(c,r,!0,e)&&i}if(i=Nc(c=e.g=n,r,!0,e)&&i,i=Nc(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Nc(c=e.g=t[a],r,!1,e)&&i}function Nc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var h=c.listener,m=c.ia||c.src;c.fa&&ig(n.i,c),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}jr(Mr,Pa),Mr.prototype[Ku]=!0,Mr.prototype.removeEventListener=function(n,e,t,r){Zu(this,n,e,t,r)},Mr.prototype.M=function(){if(Mr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rg(t[r]);delete n.g[e],n.h--}}this.I=null},Mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var og=Qt.JSON.stringify;function ag(){var n=Aw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _y,my=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ux,n=>n.reset());class Ux{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Dw(n){Qt.setTimeout(()=>{throw n},0)}function ug(n,e){_y||function Sw(){var n=Qt.Promise.resolve(void 0);_y=function(){n.then(Ki)}}(),yy||(_y(),yy=!0),Aw.add(n,e)}var yy=!1,Aw=new class _D{constructor(){this.h=this.g=null}add(e,t){const r=my.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ki(){for(var n;n=ag();){try{n.h.call(n.g)}catch(t){Dw(t)}var e=my;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yy=!1}function lg(n,e){Mr.call(this),this.h=n||1,this.g=e||Qt,this.j=Ar(this.kb,this),this.l=Date.now()}function vy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Rw(n,e,t){if("function"==typeof n)t&&(n=Ar(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ar(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function yD(n){n.g=Rw(()=>{n.g=null,n.i&&(n.i=!1,yD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jr(lg,Mr),(It=lg.prototype).da=!1,It.S=null,It.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pr(this,"tick"),this.da&&(vy(this),this.start()))}},It.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){lg.Z.M.call(this),vy(this),delete this.g};class xw extends Pa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yD(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cg(n){Pa.call(this),this.h=n,this.g={}}jr(cg,Pa);var Nw=[];function dg(n,e,t,r){Array.isArray(t)||(t&&(Nw[0]=t.toString()),t=Nw);for(var i=0;i<t.length;i++){var a=py(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Ey(n){ay(n.g,function(e,t){this.g.hasOwnProperty(t)&&Oh(e)},n),n.g={}}function hg(){this.g=!0}function Qu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Mw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return og(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}cg.prototype.M=function(){cg.Z.M.call(this),Ey(this)},cg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hg.prototype.Aa=function(){this.g=!1},hg.prototype.info=function(){};var Ju={},Pw=null;function Fh(){return Pw=Pw||new Mr}function wy(n){Hr.call(this,Ju.Ma,n)}function Lh(n){const e=Fh();Pr(e,new wy(e,n))}function Ks(n,e){Hr.call(this,Ju.STAT_EVENT,n),this.stat=e}function Xr(n){const e=Fh();Pr(e,new Ks(e,n))}function Ow(n,e){Hr.call(this,Ju.Na,n),this.size=e}function Uh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}Ju.Ma="serverreachability",jr(wy,Hr),Ju.STAT_EVENT="statevent",jr(Ks,Hr),Ju.Na="timingevent",jr(Ow,Hr);var Iy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ty={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Cy(){}function Fw(){}Cy.prototype.h=null;var Mc,Xu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function by(){Hr.call(this,"d")}function Dy(){Hr.call(this,"c")}function Pc(){}function Vh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new cg(this),this.P=Sy,this.W=new lg(n=ng?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}jr(by,Hr),jr(Dy,Hr),jr(Pc,Cy),Pc.prototype.g=function(){return new XMLHttpRequest},Pc.prototype.i=function(){return{}},Mc=new Pc;var Sy=45e3,pg={},gg={};function Ay(n,e,t){n.K=1,n.v=yg(Zs(e)),n.s=t,n.U=!0,mg(n,null)}function mg(n,e){n.F=Date.now(),Oc(n),n.A=Zs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),My(t.h,"t",r),n.C=0,t=n.l.H,n.h=new fg,n.g=Ly(n.l,t?e:null,!n.s),0<n.O&&(n.L=new xw(Ar(n.Ia,n,n.g),n.O)),dg(n.V,n.g,"readystatechange",n.gb),e=n.H?gw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Lh(1),function vD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),m=0;m<h.length;m++){var E=h[m].split("=");if(1<E.length){var C=E[0];E=E[1];var b=C.split("_");c=2<=b.length&&"type"==b[1]?c+(C+"=")+E+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ID(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Lw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Uw(n,t),i==gg){4==e&&(n.o=4,Xr(14),r=!1),Qu(n.j,n.m,null,"[Incomplete Response]");break}if(i==pg){n.o=4,Xr(15),Qu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qu(n.j,n.m,i,null),Fc(n,i)}ID(n)&&i!=gg&&i!=pg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),$a(e),e.L=!0,Xr(11))):(Qu(n.j,n.m,t,"[Invalid Chunked Response]"),Ci(n),kc(n))}function Uw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gg:(t=Number(e.substring(t,r)),isNaN(t)?pg:(r+=1)+t>e.length?gg:(e=e.substr(r,t),n.C=r+t,e))}function Oc(n){n.Y=Date.now()+n.P,Ry(n,n.P)}function Ry(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uh(Ar(n.eb,n),e)}function Bh(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function kc(n){0==n.l.G||n.I||rl(n.l,n)}function Ci(n){Bh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,vy(n.W),Ey(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||zw(t.i,n)))if(t.I=n.N,!n.J&&zw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Uh(Ar(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;jo(t),bg(t)}ja(t),Xr(18)}if(1>=Py(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else ws(t,11)}else if((n.J||t.g==n)&&jo(t),!oy(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const C=E[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const b=E[4];null!=b&&(t.za=b,t.h.info("SVER="+t.za));const R=E[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const W=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;!a.g&&($r(W,"spdy")||$r(W,"quic")||$r(W,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Eg(a,a.h),a.h=null))}if(r.D){const we=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.sa=we,Wn(r.F,r.D,we))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=ol(r,r.H?r.la:null,r.W),c.J){Gw(r.i,c);var h=c,m=r.K;m&&h.setTimeout(m),h.B&&(Bh(h),Oc(h)),r.g=c}else Sg(r);0<t.l.length&&Ua(t)}else"stop"!=E[0]&&"close"!=E[0]||ws(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?ws(t,7):Fy(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Lh(4)}catch(E){}}function xy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ny(n)||"string"==typeof n)iy(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ny(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function TD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ny(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function jh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof jh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $h(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Fa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Fa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Fa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(It=Vh.prototype).setTimeout=function(n){this.P=n},It.gb=function(n){n=n.target;const e=this.L;e&&3==Bo(n)?e.l():this.Ia(n)},It.Ia=function(n){try{if(n==this.g)e:{const C=Bo(this.g);var e=this.g.Da();const b=this.g.ba();if(!(3>C)&&(3!=C||ng||this.g&&(this.h.h||this.g.ga()||nI(this.g)))){this.I||4!=C||7==e||Lh(8==e||0>=b?3:2),Bh(this);var t=this.g.ba();this.N=t;t:if(ID(this)){var r=nI(this.g);n="";var i=r.length,a=4==Bo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ci(this),kc(this);var c="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function ED(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oy(h)){var E=h;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Xr(12),Ci(this),kc(this);break e}Qu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fc(this,t)}this.U?(Lw(this,C,c),ng&&this.i&&3==C&&(dg(this.V,this.W,"tick",this.fb),this.W.start())):(Qu(this.j,this.m,c,null),Fc(this,c)),4==C&&Ci(this),this.i&&!this.I&&(4==C?rl(this.l,this):(this.i=!1,Oc(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Xr(12)):(this.o=0,Xr(13)),Ci(this),kc(this)}}}catch(C){}},It.fb=function(){if(this.g){var n=Bo(this.g),e=this.g.ga();this.C<e.length&&(Bh(this),Lw(this,n,e),this.i&&4!=n&&Oc(this))}},It.cancel=function(){this.I=!0,Ci(this)},It.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function wD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lh(3),Xr(17)),Ci(this),this.o=2,kc(this)):Ry(this,this.Y-n)},(It=jh.prototype).R=function(){$h(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},It.T=function(){return $h(this),this.g.concat()},It.get=function(n,e){return Fa(this.h,n)?this.h[n]:e},It.set=function(n,e){Fa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},It.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var _g=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function el(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof el){this.g=void 0!==e?e:n.g,Wh(this,n.j),this.s=n.s,zh(this,n.i),Gh(this,n.m),this.l=n.l,e=n.h;var t=new qh;t.i=e.i,e.g&&(t.g=new jh(e.g),t.h=e.h),Vw(this,t),this.o=n.o}else n&&(t=String(n).match(_g))?(this.g=!!e,Wh(this,t[1]||"",!0),this.s=po(t[2]||""),zh(this,t[3]||"",!0),Gh(this,t[4]),this.l=po(t[5]||"",!0),Vw(this,t[6]||"",!0),this.o=po(t[7]||"")):(this.g=!!e,this.h=new qh(null,this.g))}function Zs(n){return new el(n)}function Wh(n,e,t){n.j=t?po(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zh(n,e,t){n.i=t?po(e,!0):e}function Gh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Vw(n,e,t){e instanceof qh?(n.h=e,function $w(n,e){e&&!n.j&&(Or(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(vg(this,r),My(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Lc(e,SD)),n.h=new qh(e,n.g))}function Wn(n,e,t){n.h.set(e,t)}function yg(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function po(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}el.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lc(e,jw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lc(e,jw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lc(t,"/"==t.charAt(0)?DD:Uc,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lc(t,AD)),n.join("")};var jw=/[#\/\?@]/g,Uc=/[#\?:]/g,DD=/[#\?]/g,SD=/[#\?@]/g,AD=/#/g;function qh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Or(n){n.g||(n.g=new jh,n.h=0,n.i&&function Hh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vg(n,e){Or(n),e=tl(n,e),Fa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Fa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$h(n)))}function Ny(n,e){return Or(n),e=tl(n,e),Fa(n.g.h,e)}function My(n,e,t){vg(n,e),0<t.length&&(n.i=null,n.g.set(tl(n,e),Xp(t)),n.h+=t.length)}function tl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Hw(n){this.l=n||xD,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ea&&Qt.g.Ea()&&Qt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=qh.prototype).add=function(n,e){Or(this),this.i=null,n=tl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){Or(this),this.g.forEach(function(t,r){iy(t,function(i){n.call(e,i,r,this)},this)},this)},It.T=function(){Or(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},It.R=function(n){Or(this);var e=[];if("string"==typeof n)Ny(this,n)&&(e=dD(e,this.g.get(tl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=dD(e,n[t])}return e},It.set=function(n,e){return Or(this),this.i=null,Ny(this,n=tl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var xD=10;function Ww(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Py(n){return n.h?1:n.g?n.g.size:0}function zw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Eg(n,e){n.g?n.g.add(e):n.h=e}function Gw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Xp(n.i)}function Kw(){}function Vx(){this.g=new Kw}function Oy(n,e,t){const r=t||"";try{xy(n,function(i,a){let c=i;Ah(i)&&(c=og(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Vc(n){this.l=n.$b||null,this.j=n.ib||!1}function ky(n,e){Mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Zi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hw.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Kw.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},Kw.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},jr(Vc,Cy),Vc.prototype.g=function(){return new ky(this.l,this.j)},Vc.prototype.i=function(n){return function(){return n}}({}),jr(ky,Mr);var Zi=0;function MD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function wg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bc(n)}function Bc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=ky.prototype).open=function(n,e){if(this.readyState!=Zi)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Bc(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Qt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wg(this)),this.readyState=Zi},It.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bc(this)),this.g&&(this.readyState=3,Bc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Qt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},It.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?wg(this):Bc(this),3==this.readyState&&MD(this)}},It.Ua=function(n){this.g&&(this.response=this.responseText=n,wg(this))},It.Ta=function(n){this.g&&(this.response=n,wg(this))},It.ha=function(){this.g&&wg(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ky.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Zw=Qt.JSON.parse;function Er(n){Mr.call(this),this.headers=new jh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yw,this.K=this.L=!1}jr(Er,Mr);var Yw="",Bx=/^https?$/i,Qw=["POST","PUT"];function PD(n){return"content-type"==n.toLowerCase()}function Ig(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Xw(n),Tg(n)}function Xw(n){n.D||(n.D=!0,Pr(n,"complete"),Pr(n,"error"))}function eI(n){if(n.h&&void 0!==ty&&(!n.C[1]||4!=Bo(n)||2!=n.ba()))if(n.v&&4==Bo(n))Rw(n.Fa,0,n);else if(Pr(n,"readystatechange"),4==Bo(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(_g)[1]||null;if(!i&&Qt.self&&Qt.self.location){var a=Qt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Bx.test(i?i.toLowerCase():"")}t=r}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var c=2<Bo(n)?n.g.statusText:""}catch(m){c=""}n.j=c+" ["+n.ba()+"]",Xw(n)}}finally{Tg(n)}}}function Tg(n,e){if(n.g){tI(n);const t=n.g,r=n.C[0]?Sh:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function tI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function Bo(n){return n.g?n.g.readyState:0}function nI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function La(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Cg(n){let e="";return ay(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function Zh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jc(n){this.za=0,this.l=[],this.h=new hg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zh("baseRetryDelayMs",5e3,n),this.$a=Zh("retryDelaySeedMs",1e4,n),this.Ya=Zh("forwardChannelMaxRetries",2,n),this.ra=Zh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Hw(n&&n.concurrentRequestLimit),this.Ca=new Vx,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Fy(n){if(Dg(n),3==n.G){var e=n.V++,t=Zs(n.F);Wn(t,"SID",n.J),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),Ba(n,t),(e=new Vh(n,n.h,e,void 0)).K=2,e.v=yg(Zs(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ly(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Oc(e)}sl(n)}function bg(n){n.g&&($a(n),n.g.cancel(),n.g=null)}function Dg(n){bg(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),jo(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function Es(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ua(n)}function Ua(n){Ww(n.i)||n.m||(n.m=!0,ug(n.Ha,n),n.C=0)}function Va(n,e){var t;t=e?e.m:n.V++;const r=Zs(n.F);Wn(r,"SID",n.J),Wn(r,"RID",t),Wn(r,"AID",n.U),Ba(n,r),n.o&&n.s&&La(r,n.o,n.s),t=new Vh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Yi(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Eg(n.i,t),Ay(t,r,e)}function Ba(n,e){n.j&&xy({},function(t,r){Wn(e,r,t)})}function Yi(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ar(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let E=i[m].h;const C=i[m].g;if(E-=a,0>E)a=Math.max(0,i[m].h-100),h=!1;else try{Oy(C,c,"req"+E+"_")}catch(b){r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Sg(n){n.g||n.u||(n.Y=1,ug(n.Ga,n),n.A=0)}function ja(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uh(Ar(n.Ga,n),il(n,n.A)),n.A++,0))}function $a(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function nl(n){n.g=new Vh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Zs(n.oa);Wn(e,"RID","rpc"),Wn(e,"SID",n.J),Wn(e,"CI",n.N?"0":"1"),Wn(e,"AID",n.U),Ba(n,e),Wn(e,"TYPE","xmlhttp"),n.o&&n.s&&La(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=yg(Zs(e)),t.s=null,t.U=!0,mg(t,n)}function jo(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function rl(n,e){var t=null;if(n.g==e){jo(n),$a(n),n.g=null;var r=2}else{if(!zw(n.i,e))return;t=e.D,Gw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Pr(r=Fh(),new Ow(r,t,e,i)),Ua(n)}else Sg(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function di(n,e){return!(Py(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uh(Ar(n.Ha,n,e),il(n,n.C)),n.C++,0)))}(n,e)||2==r&&ja(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ws(n,5);break;case 4:ws(n,10);break;case 3:ws(n,6);break;default:ws(n,2)}}function il(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ws(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ar(n.jb,n);t||(t=new el("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||Wh(t,"https"),yg(t)),function ND(n,e){const t=new hg;if(Qt.Image){const r=new Image;r.onload=Oi(Kh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Oi(Kh,t,r,"TestLoadImage: error",!1,e),r.onabort=Oi(Kh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oi(Kh,t,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xr(2);n.G=0,n.j&&n.j.va(e),sl(n),Dg(n)}function sl(n){n.G=0,n.I=-1,n.j&&((0!=qw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Xp(n.l),n.l.length=0),n.j.ua())}function ol(n,e,t){let r=function CD(n){return n instanceof el?Zs(n):new el(n,void 0)}(t);if(""!=r.i)e&&zh(r,e+"."+r.i),Gh(r,r.m);else{const i=Qt.location;r=function Bw(n,e,t,r){var i=new el(null,void 0);return n&&Wh(i,n),e&&zh(i,e),t&&Gh(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&ay(n.aa,function(i,a){Wn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Wn(r,e,t),Wn(r,"VER",n.ma),Ba(n,r),r}function Ly(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new Vc({ib:!0}):n.qa)).L=n.H,e}function Uy(){}function Yh(){if(Nh&&!(10<=Number(Lx)))throw Error("Environmental error: no available transport.")}function ki(n,e){Mr.call(this),this.g=new jc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!oy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new al(this)}function Vy(n){by.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function By(){Dy.call(this),this.status=1}function al(n){this.g=n}(It=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mc.g(),this.C=function kw(n){return n.h||(n.h=n.i())}(this.u?this.u:Mc),this.g.onreadystatechange=Ar(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Ig(this,a)}n=t||"";const i=new jh(this.headers);r&&xy(r,function(a,c){i.set(c,a)}),r=function sy(n){e:{var e=PD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Qt.FormData&&n instanceof Qt.FormData,!(0<=Jp(Qw,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tI(this),0<this.B&&((this.K=function Jw(n){return Nh&&function Fx(){return function Ox(n){var e=kx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Rh(String(cy)).split("."),t=Rh("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=xh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||xh(0==i[2].length,0==a[2].length)||xh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ar(this.pa,this)):this.A=Rw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Ig(this,a)}},It.pa=function(){void 0!==ty&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),Tg(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tg(this,!0)),Er.Z.M.call(this)},It.Fa=function(){this.s||(this.F||this.v||this.l?eI(this):this.cb())},It.cb=function(){eI(this)},It.ba=function(){try{return 2<Bo(this)?this.g.status:-1}catch(n){return-1}},It.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},It.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Zw(e)}},It.Da=function(){return this.m},It.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=jc.prototype).ma=8,It.G=1,It.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},It.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Vh(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=gw(a),_w(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Yi(this,i,e),Wn(t=Zs(this.F),"RID",n),Wn(t,"CVER",22),this.D&&Wn(t,"X-HTTP-Session-Id",this.D),Ba(this,t),this.o&&a&&La(t,this.o,a),Eg(this.i,i),this.Ra&&Wn(t,"TYPE","init"),this.ja?(Wn(t,"$req",e),Wn(t,"SID","null"),i.$=!0,Ay(i,t,null)):Ay(i,t,e),this.G=2}}else 3==this.G&&(n?Va(this,n):0==this.l.length||Ww(this.i)||Va(this))},It.Ga=function(){if(this.u=null,nl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uh(Ar(this.bb,this),n)}},It.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xr(10),bg(this),nl(this))},It.ab=function(){null!=this.v&&(this.v=null,bg(this),ja(this),Xr(19))},It.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Xr(2)):(this.h.info("Failed to ping google.com"),Xr(1))},(It=Uy.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Oa=function(){},Yh.prototype.g=function(n,e){return new ki(n,e)},jr(ki,Mr),ki.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ug(Ar(n.hb,n,e))),Xr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ol(n,null,n.W),Ua(n)},ki.prototype.close=function(){Fy(this.g)},ki.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Es(this.g,e)}else this.v?((e={}).__data__=og(n),Es(this.g,e)):Es(this.g,n)},ki.prototype.M=function(){this.g.j=null,delete this.j,Fy(this.g),delete this.g,ki.Z.M.call(this)},jr(Vy,by),jr(By,Dy),jr(al,Uy),al.prototype.xa=function(){Pr(this.g,"a")},al.prototype.wa=function(n){Pr(this.g,new Vy(n))},al.prototype.va=function(n){Pr(this.g,new By(n))},al.prototype.ua=function(){Pr(this.g,"b")},Yh.prototype.createWebChannel=Yh.prototype.g,ki.prototype.send=ki.prototype.u,ki.prototype.open=ki.prototype.m,ki.prototype.close=ki.prototype.close,Iy.NO_ERROR=0,Iy.TIMEOUT=8,Iy.HTTP_ERROR=6,Ty.COMPLETE="complete",Fw.EventType=Xu,Xu.OPEN="a",Xu.CLOSE="b",Xu.ERROR="c",Xu.MESSAGE="d",Mr.prototype.listen=Mr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var rI=Uo.createWebChannelTransport=function(){return new Yh},iI=Uo.getStatEventTarget=function(){return Fh()},jy=Uo.ErrorCode=Iy,OD=Uo.EventType=Ty,kD=Uo.Event=Ju,sI=Uo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oI=Uo.FetchXmlHttpFactory=Vc,Ag=Uo.WebChannel=Fw,FD=Uo.XhrIo=Er;const $y="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let ul="9.6.7";const Ha=new cr.Yd("@firebase/firestore");function Hy(){return Ha.logLevel}function et(n,...e){if(Ha.logLevel<=cr.in.DEBUG){const t=e.map(Wy);Ha.debug(`Firestore (${ul}): ${n}`,...t)}}function dr(n,...e){if(Ha.logLevel<=cr.in.ERROR){const t=e.map(Wy);Ha.error(`Firestore (${ul}): ${n}`,...t)}}function ll(n,...e){if(Ha.logLevel<=cr.in.WARN){const t=e.map(Wy);Ha.warn(`Firestore (${ul}): ${n}`,...t)}}function Wy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Rt(n="Unexpected state"){const e=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function Yt(n,e){n||Rt()}function ft(n,e){return n}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends K.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class aI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UD{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const E=c;e.enqueueRetryable((0,Te.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},m=E=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(E=>m(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?m(E):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt("string"==typeof r.accessToken),new cl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yt(null===e||"string"==typeof e),new ei(e)}}class uI{constructor(e,t,r){this.type="FirstParty",this.user=ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Rg{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new uI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,et("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Yt("string"==typeof t.token),this.p=t.token,new lI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Qi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function VD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Qi.A=-1;class dI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function vn(n,e){return n<e?-1:n>e?1:0}function dl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hI(n){return n+"\0"}class kr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kr.fromMillis(Date.now())}static fromDate(e){return kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vn(this.nanoseconds,e.nanoseconds):vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new kr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function xg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $c(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ng(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Qh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Rt(),void 0===r?r=e.length-t:r>e.length-t&&Rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Qh{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const Jh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends Qh{construct(e,t,r){return new Fr(e,t,r)}static isValidIdentifier(e){return Jh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ge(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ge(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Ge(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class hl{constructor(e){this.fields=e,e.sort(Fr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const Mg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(Yt(!!n),"string"==typeof n){let e=0;const t=Mg.exec(n);if(Yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hc(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function Gy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pg(n){const e=n.mapValue.fields.__previous_value__;return Gy(e)?Pg(e):e}function fl(n){const e=Ys(n.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}class fI{constructor(e,t,r,i,a,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class pl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}function $o(n){return null==n}function Wc(n){return 0===n&&1/n==-1/0}function qy(n){return"number"==typeof n&&Number.isInteger(n)&&!Wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class vt{constructor(e){this.path=e}static fromPath(e){return new vt(Rn.fromString(e))}static fromName(e){return new vt(Rn.fromString(e).popFirst(5))}static empty(){return new vt(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new Rn(e.slice()))}}const pI={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:10:Rt()}function Is(n,e){if(n===e)return!0;const t=gl(n);if(t!==gl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fl(n).isEqual(fl(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ys(r.timestampValue),c=Ys(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Hc(n.bytesValue).isEqual(Hc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return er(r.geoPointValue.latitude)===er(i.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return er(r.integerValue)===er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=er(r.doubleValue),c=er(i.doubleValue);return a===c?Wc(a)===Wc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(xg(a)!==xg(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!Is(a[h],c[h])))return!1;return!0}(n,e);default:return Rt()}var i}function zc(n,e){return void 0!==(n.values||[]).find(t=>Is(t,e))}function Wa(n,e){if(n===e)return 0;const t=gl(n),r=gl(e);if(t!==r)return vn(t,r);switch(t){case 0:return 0;case 1:return vn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=er(i.integerValue||i.doubleValue),h=er(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return gI(n.timestampValue,e.timestampValue);case 4:return gI(fl(n),fl(e));case 5:return vn(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Hc(i),h=Hc(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let m=0;m<c.length&&m<h.length;m++){const E=vn(c[m],h[m]);if(0!==E)return E}return vn(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=vn(er(i.latitude),er(a.latitude));return 0!==c?c:vn(er(i.longitude),er(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let m=0;m<c.length&&m<h.length;++m){const E=Wa(c[m],h[m]);if(E)return E}return vn(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},h=Object.keys(c),m=a.fields||{},E=Object.keys(m);h.sort(),E.sort();for(let C=0;C<h.length&&C<E.length;++C){const b=vn(h[C],E[C]);if(0!==b)return b;const R=Wa(c[h[C]],m[E[C]]);if(0!==R)return R}return vn(h.length,E.length)}(n.mapValue,e.mapValue);default:throw Rt()}}function gI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return vn(n,e);const t=Ys(n),r=Ys(e),i=vn(t.seconds,r.seconds);return 0!==i?i:vn(t.nanos,r.nanos)}function Gc(n){return Ky(n)}function Ky(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ys(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hc(n.bytesValue).toBase64():"referenceValue"in n?vt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Ky(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${Ky(r.fields[h])}`;return a+"}"}(n.mapValue):Rt();var e}function Og(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function qc(n){return!!n&&"arrayValue"in n}function Zy(n){return!!n&&"nullValue"in n}function Yy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xh(n){return!!n&&"mapValue"in n}function Kc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $c(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kc(n.arrayValue.values[t]);return e}return Object.assign({},n)}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Kc(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$c(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ti(Kc(this.value))}}function Qy(n){const e=[];return $c(n.fields,(t,r)=>{const i=new Fr([t]);if(Xh(r)){const a=Qy(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new hl(e)}class tr{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new tr(e,0,$t.min(),$t.min(),ti.empty(),0)}static newFoundDocument(e,t,r){return new tr(e,1,t,$t.min(),r,0)}static newNoDocument(e,t){return new tr(e,2,t,$t.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,$t.min(),ti.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Fg=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class Jy{constructor(e,t){this.fieldPath=e,this.kind=t}}class ef{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ef(0,Lg.min())}}class Lg{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Lg($t.min(),vt.empty(),-1)}}class mI{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.P=null}}function _I(n,e=null,t=[],r=[],i=null,a=null,c=null){return new mI(n,e,t,r,i,a,c)}function or(n){const e=ft(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Gc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),$o(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gc(r)).join(",")),e.P=t}return e.P}function Ug(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!II(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Is(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qs(n.startAt,e.startAt)&&Qs(n.endAt,e.endAt)}function Vg(n){return vt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class hi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new BD(e,t,r):"array-contains"===t?new jD(e,r):"in"===t?new $D(e,r):"not-in"===t?new wI(e,r):"array-contains-any"===t?new HD(e,r):new hi(e,t,r)}static v(e,t,r){return"in"===t?new vI(e,r):new EI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Wa(t,this.value)):null!==t&&gl(this.value)===gl(t)&&this.V(Wa(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class BD extends hi{constructor(e,t,r){super(e,t,r),this.key=vt.fromName(r.referenceValue)}matches(e){const t=vt.comparator(e.key,this.key);return this.V(t)}}class vI extends hi{constructor(e,t){super(e,"in",t),this.keys=ml(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EI extends hi{constructor(e,t){super(e,"not-in",t),this.keys=ml(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ml(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>vt.fromName(r.referenceValue))}class jD extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qc(t)&&zc(t.arrayValue,this.value)}}class $D extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zc(this.value.arrayValue,t)}}class wI extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zc(this.value.arrayValue,t)}}class HD extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}class tf{constructor(e,t="asc"){this.field=e,this.dir=t}}function II(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Xy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?vt.comparator(vt.fromName(c.referenceValue),t.key):Wa(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Qs(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Is(n.position[t],e.position[t]))return!1;return!0}class Ho{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function TI(n,e,t,r,i,a,c,h){return new Ho(n,e,t,r,i,a,c,h)}function bi(n){return new Ho(n)}function Fi(n){return!$o(n.limit)&&"F"===n.limitType}function Li(n){return!$o(n.limit)&&"L"===n.limitType}function Bg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jg(n){for(const e of n.filters)if(e.S())return e.field;return null}function ev(n){return null!==n.collectionGroup}function Zc(n){const e=ft(n);if(null===e.D){e.D=[];const t=jg(e),r=Bg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new tf(t)),e.D.push(new tf(Fr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new tf(Fr.keyField(),a))}}}return e.D}function Ts(n){const e=ft(n);if(!e.C)if("F"===e.limitType)e.C=_I(e.path,e.collectionGroup,Zc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Zc(e))t.push(new tf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new _l(e.startAt.position,!e.startAt.inclusive):null;e.C=_I(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function CI(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yl(n,e){return Ug(Ts(n),Ts(e))&&n.limitType===e.limitType}function Yc(n){return`${or(Ts(n))}|lt:${n.limitType}`}function tv(n){return`Query(target=${function yI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Gc(r.value)}`;var r}).join(", ")}]`),$o(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Gc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Gc(t)).join(",")),`Target(${e})`}(Ts(n))}; limitType=${n.limitType})`}function $g(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):vt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=Xy(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,Zc(t),r)||t.endAt&&!function(i,a,c){const h=Xy(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,Zc(t),r)));var t,r}function bI(n){return(e,t)=>{let r=!1;for(const i of Zc(n)){const a=DI(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function DI(n,e,t){const r=n.field.isKeyField()?vt.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),m=c.data.field(i);return null!==h&&null!==m?Wa(h,m):Rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Rt()}}function nv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function nf(n){return{integerValue:""+n}}function SI(n,e){return qy(e)?nf(e):nv(n,e)}class rf{constructor(){this._=void 0}}function AI(n,e,t){return n instanceof vl?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof za?rv(n,e):n instanceof Ga?iv(n,e):function(r,i){const a=sf(r,i),c=sv(a)+sv(r.k);return kg(a)&&kg(r.k)?nf(c):nv(r.O,c)}(n,e)}function RI(n,e,t){return n instanceof za?rv(n,e):n instanceof Ga?iv(n,e):t}function sf(n,e){return n instanceof El?kg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vl extends rf{}class za extends rf{constructor(e){super(),this.elements=e}}function rv(n,e){const t=ov(e);for(const r of n.elements)t.some(i=>Is(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ga extends rf{constructor(e){super(),this.elements=e}}function iv(n,e){let t=ov(e);for(const r of n.elements)t=t.filter(i=>!Is(i,r));return{arrayValue:{values:t}}}class El extends rf{constructor(e,t){super(),this.O=e,this.k=t}}function sv(n){return er(n.integerValue||n.doubleValue)}function ov(n){return qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class af{constructor(e,t){this.field=e,this.transform=t}}class zD{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wg{}function GD(n,e,t){n instanceof uf?function(r,i,a){const c=r.value.clone(),h=PI(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof wl?function(r,i,a){if(!Hg(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=PI(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(MI(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function av(n,e,t){var i;n instanceof uf?function(r,i,a){if(!Hg(r.precondition,i))return;const c=r.value.clone(),h=OI(r.fieldTransforms,a,i);c.setAll(h),i.convertToFoundDocument(NI(i),c).setHasLocalMutations()}(n,e,t):n instanceof wl?function(r,i,a){if(!Hg(r.precondition,i))return;const c=OI(r.fieldTransforms,a,i),h=i.data;h.setAll(MI(r)),h.setAll(c),i.convertToFoundDocument(NI(i),h).setHasLocalMutations()}(n,e,t):Hg(n.precondition,i=e)&&i.convertToNoDocument($t.min())}function qD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=sf(r.transform,i||null);null!=a&&(null==t&&(t=ti.empty()),t.set(r.field,a))}return t||null}function xI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&dl(t,r,(i,a)=>function WD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof za&&r instanceof za||t instanceof Ga&&r instanceof Ga?dl(t.elements,r.elements,Is):t instanceof El&&r instanceof El?Is(t.k,r.k):t instanceof vl&&r instanceof vl);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function NI(n){return n.isFoundDocument()?n.version:$t.min()}class uf extends Wg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class wl extends Wg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function MI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PI(n,e,t){const r=new Map;Yt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,RI(c,h,t[i]))}return r}function OI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,AI(a,c,e))}return r}class lf extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class uv extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kI{constructor(e){this.count=e}}var wr,In;function lv(n){switch(n){default:return Rt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function cv(n){if(void 0===n)return dr("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case wr.OK:return Ee.OK;case wr.CANCELLED:return Ee.CANCELLED;case wr.UNKNOWN:return Ee.UNKNOWN;case wr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case wr.INTERNAL:return Ee.INTERNAL;case wr.UNAVAILABLE:return Ee.UNAVAILABLE;case wr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case wr.NOT_FOUND:return Ee.NOT_FOUND;case wr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case wr.ABORTED:return Ee.ABORTED;case wr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case wr.DATA_LOSS:return Ee.DATA_LOSS;default:return Rt()}}(In=wr||(wr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class hr{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:zr.RED,this.left=null!=i?i:zr.EMPTY,this.right=null!=a?a:zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return zr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const e=this.left.check();if(e!==this.right.check())throw Rt();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Yn(this.comparator);return t.data=e,t}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Il(n){return n.hasNext()?n.getNext():void 0}const Tl=new hr(vt.comparator);function Cs(){return Tl}const KD=new hr(vt.comparator);function qa(){return KD}const Wx=new hr(vt.comparator),hv=new Yn(vt.comparator);function On(...n){let e=hv;for(const t of n)e=e.add(t);return e}const FI=new Yn(vn);function df(){return FI}class zg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Pt.createSynthesizedTargetChangeForCurrentChange(e,t)),new zg($t.min(),r,df(),Cs(),On())}}class Pt{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pt(Lr.EMPTY_BYTE_STRING,t,On(),On(),On())}}class Gg{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class LI{constructor(e,t){this.targetId=e,this.F=t}}class UI{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class hf{constructor(){this.B=0,this.L=pf(),this.U=Lr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=On(),t=On(),r=On();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Rt()}}),new Pt(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=pf()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ZD{constructor(e){this.nt=e,this.st=new Map,this.it=Cs(),this.rt=ff(),this.ot=new Yn(vn)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(Vg(a))if(0===r){const c=new vt(a.path);this.at(t,c,tr.newNoDocument(c,$t.min()))}else Yt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const h=this.wt(c);if(h){if(a.current&&Vg(h.target)){const m=new vt(h.target.path);null!==this.it.get(m)||this.It(c,m)||this.at(c,m,tr.newNoDocument(m,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=On();this.rt.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const E=this.wt(m);return!E||2===E.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new zg(e,t,this.ot,this.it,r);return this.it=Cs(),this.rt=ff(),this.ot=new Yn(vn),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new hf,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Yn(vn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||et("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new hf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ff(){return new hr(vt.comparator)}function pf(){return new hr(vt.comparator)}const fr={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VI{constructor(e,t){this.databaseId=e,this.N=t}}function gf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BI(n,e){return n.N?e.toBase64():e.toUint8Array()}function jI(n,e){return gf(n,e.toTimestamp())}function Ur(n){return Yt(!!n),$t.fromTimestamp(function(e){const t=Ys(e);return new kr(t.seconds,t.nanos)}(n))}function qg(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fv(n){const e=Rn.fromString(n);return Yt(XD(e)),e}function mf(n,e){return qg(n.databaseId,e.path)}function go(n,e){const t=fv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new vt($I(t))}function pv(n,e){return qg(n.databaseId,e)}function Qc(n){const e=fv(n);return 4===e.length?Rn.emptyPath():$I(e)}function _f(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $I(n){return Yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HI(n,e,t){return{name:mf(n,e),fields:t.value.mapValue.fields}}function yf(n,e,t){const r=go(n,e.name),i=Ur(e.updateTime),a=new ti({mapValue:{fields:e.fields}}),c=tr.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Jc(n,e){let t;if(e instanceof uf)t={update:HI(n,e.key,e.value)};else if(e instanceof lf)t={delete:mf(n,e.key)};else if(e instanceof wl)t={update:HI(n,e.key,e.data),updateMask:Gx(e.fieldMask)};else{if(!(e instanceof uv))return Rt();t={verify:mf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof vl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ga)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof El)return{fieldPath:a.field.canonicalString(),increment:c.k};throw Rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:jI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Rt()),t;var i}function gv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Rr.updateTime(Ur(i.updateTime)):void 0!==i.exists?Rr.exists(i.exists):Rr.none():Rr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Yt("REQUEST_TIME"===c.setToServerValue),h=new vl):"appendMissingElements"in c?h=new za(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Ga(c.removeAllFromArray.values||[]):"increment"in c?h=new El(a,c.increment):Rt();const m=Fr.fromServerFormat(c.fieldPath);return new af(m,h)}(n,i)):[];var i;if(e.update){const i=go(n,e.update.name),a=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new hl((e.updateMask.fieldPaths||[]).map(E=>Fr.fromServerFormat(E)));return new wl(i,a,c,t,r)}return new uf(i,a,t,r)}if(e.delete){const i=go(n,e.delete);return new lf(i,t)}if(e.verify){const i=go(n,e.verify);return new uv(i,t)}return Rt()}function Xc(n,e){return{documents:[pv(n,e.path)]}}function GI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const E=m.map(C=>function(b){if("=="===b.op){if(Yy(b.value))return{unaryFilter:{field:ed(b.field),op:"IS_NAN"}};if(Zy(b.value))return{unaryFilter:{field:ed(b.field),op:"IS_NULL"}}}else if("!="===b.op){if(Yy(b.value))return{unaryFilter:{field:ed(b.field),op:"IS_NOT_NAN"}};if(Zy(b.value))return{unaryFilter:{field:ed(b.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(b.field),op:ZI(b.op),value:b.value}}}(C));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(E=>{return{field:ed((C=E).field),direction:KI(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(E=e.limit,n.N||$o(E)?E:{value:E});var E,h,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function qI(n){let e=Qc(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Yt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=mv(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new tf(Cl((b=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let h=null;t.limit&&(h=function(C){let b;return b="object"==typeof C?C.value:C,$o(b)?null:b}(t.limit));let m=null;var C;t.startAt&&(m=new _l((C=t.startAt).values||[],!!C.before));let E=null;return t.endAt&&(E=function(C){return new _l(C.values||[],!C.before)}(t.endAt)),TI(e,i,c,a,h,"F",m,E)}function mv(n){return n?void 0!==n.unaryFilter?[JD(n)]:void 0!==n.fieldFilter?[QD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>mv(e)).reduce((e,t)=>e.concat(t)):Rt():[]}function KI(n){return fr[n]}function ZI(n){return zx[n]}function ed(n){return{fieldPath:n.canonicalString()}}function Cl(n){return Fr.fromServerFormat(n.fieldPath)}function QD(n){return hi.create(Cl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function JD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Cl(n.unaryFilter.field);return hi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Cl(n.unaryFilter.field);return hi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cl(n.unaryFilter.field);return hi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cl(n.unaryFilter.field);return hi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}}function Gx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ni(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_v(e)),e=qx(n.get(t),e);return _v(e)}function qx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function _v(n){return n+"\x01\x01"}function Ji(n){const e=n.length;if(Yt(e>=2),2===e)return Yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&Rt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:Rt()}a=c+2}return new Rn(r)}class eS{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Xi{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Xi.store="owner",Xi.key="owner";class Wo{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Wo.store="mutationQueues",Wo.keyPath="userId";class kn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}kn.store="mutations",kn.keyPath="batchId",kn.userMutationsIndex="userMutationsIndex",kn.userMutationsKeyPath=["userId","batchId"];class fi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ni(t)]}static key(e,t,r){return[e,ni(t),r]}}fi.store="documentMutations",fi.PLACEHOLDER=new fi;class tS{constructor(e,t){this.path=e,this.readTime=t}}class nS{constructor(e,t){this.path=e,this.version=t}}class pr{constructor(e,t,r,i,a,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=c}}pr.store="remoteDocuments",pr.readTimeIndex="readTimeIndex",pr.readTimeIndexPath="readTime",pr.collectionReadTimeIndex="collectionReadTimeIndex",pr.collectionReadTimeIndexPath=["parentPath","readTime"];class mo{constructor(e){this.byteSize=e}}mo.store="remoteDocumentGlobal",mo.key="remoteDocumentGlobalKey";class Di{constructor(e,t,r,i,a,c,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=h}}Di.store="targets",Di.keyPath="targetId",Di.queryTargetsIndexName="queryTargetsIndex",Di.queryTargetsKeyPath=["canonicalId","targetId"];class ri{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ri.store="targetDocuments",ri.keyPath=["targetId","path"],ri.documentTargetsIndex="documentTargetsIndex",ri.documentTargetsKeyPath=["path","targetId"];class es{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}es.key="targetGlobalKey",es.store="targetGlobal";class bs{constructor(e,t){this.collectionId=e,this.parent=t}}bs.store="collectionParents",bs.keyPath=["collectionId","parent"];class zo{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}zo.store="clientMetadata",zo.keyPath="clientId";class bl{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}bl.store="bundles",bl.keyPath="bundleId";class td{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}td.store="namedQueries",td.keyPath="name";class Ui{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Ui.store="indexConfiguration",Ui.keyPath="indexId",Ui.collectionGroupIndex="collectionGroupIndex",Ui.collectionGroupIndexPath="collectionGroup";class Ds{constructor(e,t,r,i,a,c){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=c}}Ds.store="indexState",Ds.keyPath=["indexId","uid"],Ds.sequenceNumberIndex="sequenceNumberIndex",Ds.sequenceNumberIndexPath=["uid","sequenceNumber"];class ts{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}ts.store="indexEntries",ts.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],ts.documentKeyIndex="documentKeyIndex",ts.documentKeyIndexPath=["indexId","uid","documentKey"];class Gr{constructor(e,t,r,i,a,c){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=c}}Gr.store="documentOverlays",Gr.keyPath=["userId","collectionPath","documentId"],Gr.collectionPathOverlayIndex="collectionPathOverlayIndex",Gr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Gr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Gr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Kg=[Wo.store,kn.store,fi.store,pr.store,Di.store,Xi.store,es.store,ri.store,zo.store,mo.store,bs.store,bl.store,td.store],YI=[...Kg,Gr.store],QI=[...YI,Ui.store,Ds.store,ts.store],yv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,r)=>{t(e)})}static reject(e){return new De((t,r)=>{r(e)})}static waitFor(e){return new De((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=De.resolve(!1);for(const r of e)t=t.next(i=>i?De.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Zg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Wr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new nd(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=vv(r.target.error);this.At.reject(new nd(e,i))}}static open(e,t,r,i){try{return new Zg(t,e.transaction(i,r))}catch(a){throw new nd(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iS(t)}}class ns{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===ns.vt((0,K.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return et("SimpleDb","Removing database:",e),Sl(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,K.hl)())return!1;if(ns.St())return!0;const e=(0,K.z$)(),t=ns.vt(e),r=0<t&&t<10,i=ns.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,Te.Z)(function*(){return t.db||(et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new nd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ge(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ge(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new nd(e,h))},a.onupgradeneeded=c=>{et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Te.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const m=Zg.open(a.db,e,c?"readonly":"readwrite",r),E=i(m).next(C=>(m.Pt(),C)).catch(C=>(m.abort(C),De.reject(C))).toPromise();return E.catch(()=>{}),yield m.Rt,E}catch(m){const E="FirebaseError"!==m.name&&h<3;if(et("SimpleDb","Transaction failed with error:",m.message,"Retrying:",E),a.close(),!E)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rS{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Sl(this.$t.delete())}}class nd extends Ge{constructor(e,t){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class iS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(et("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sl(r)}add(e){return et("SimpleDb","ADD",this.store.name,e,e),Sl(this.store.add(e))}get(e){return Sl(this.store.get(e)).next(t=>(void 0===t&&(t=null),et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return et("SimpleDb","DELETE",this.store.name,e),Sl(this.store.delete(e))}count(){return et("SimpleDb","COUNT",this.store.name),Sl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new De((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,c,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new De((r,i)=>{t.onerror=a=>{const c=vv(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new De((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new rS(h),E=t(h.primaryKey,h.value,m);if(E instanceof De){const C=E.catch(b=>(m.done(),De.reject(b)));r.push(C)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>De.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sl(n){return new De((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vv(r.target.error);t(i)}})}let XI=!1;function vv(n){const e=ns.vt((0,K.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XI||(XI=!0,setTimeout(()=>{throw r},0)),r}}return n}class eT extends JI{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function qr(n,e){const t=ft(n);return ns.Nt(t.zt,e)}class Ev{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&GD(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&av(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&av(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument($t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),On())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(t,r)=>xI(t,r))&&dl(this.baseMutations,e.baseMutations,(t,r)=>xI(t,r))}}class Yg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Yt(e.mutations.length===r.length);let i=Wx;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Yg(e,t,r,i)}}class Qg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ka{constructor(e,t,r,i,a=$t.min(),c=$t.min(),h=Lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tT{constructor(e){this.Ht=e}}function wv(n,e){let t;if(e.document)t=yf(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=vt.fromSegments(e.noDocument.path),i=qo(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rt();{const r=vt.fromSegments(e.unknownDocument.path),i=qo(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(Tv(e.readTime)),t}function nT(n,e){const t=Iv(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:mf(c=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:gf(c,h.version.toTimestamp())};return new pr(null,null,i,e.hasCommittedMutations,t,r)}var c,h;if(e.isNoDocument()){const i=e.key.path.toArray(),a=Go(e.version),c=e.hasCommittedMutations;return new pr(null,new tS(i,a),null,c,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=Go(e.version);return new pr(new nS(i,a),null,null,!0,t,r)}return Rt()}function Iv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tv(n){const e=new kr(n[0],n[1]);return $t.fromTimestamp(e)}function Go(n){const e=n.toTimestamp();return new eS(e.seconds,e.nanoseconds)}function qo(n){const e=new kr(n.seconds,n.nanoseconds);return $t.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(a=>gv(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>gv(n.Ht,a)),i=kr.fromMillis(e.localWriteTimeMs);return new Ev(e.batchId,i,t,r)}function Rl(n){const e=qo(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qo(n.lastLimboFreeSnapshotVersion):$t.min();let r;var i;return void 0!==n.query.documents?(Yt(1===(i=n.query).documents.length),r=Ts(bi(Qc(i.documents[0])))):r=Ts(qI(n.query)),new Ka(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function rT(n,e){const t=Go(e.snapshotVersion),r=Go(e.lastLimboFreeSnapshotVersion);let i;i=Vg(e.target)?Xc(n.Ht,e.target):GI(n.Ht,e.target);const a=e.resumeToken.toBase64();return new Di(e.targetId,or(e.target),t,a,e.sequenceNumber,r,i)}function Cv(n){const e=qI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?CI(e,e.limit,"L"):e}function Ef(n,e){return new Qg(e.largestBatchId,gv(n.Ht,e.overlayMutation))}function iT(n,e){const t=e.path.lastSegment();return[n,ni(e.path.popLast()),t]}class sS{getBundleMetadata(e,t){return sT(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:qo(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sT(e).put({bundleId:(r=t).id,createTime:Go(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Cv(i.bundledQuery),readTime:qo(i.readTime)};var i})}saveNamedQuery(e,t){return bv(e).put({name:(r=t).name,readTime:Go(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sT(n){return qr(n,bl.store)}function bv(n){return qr(n,td.store)}class Dv{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new Dv(e,t.uid||"")}getOverlay(e,t){return rd(e).get(iT(this.userId,t)).next(r=>r?Ef(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const c=new Qg(t,a);i.push(this.Yt(e,c))}),De.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ni(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(rd(e).Gt(Gr.collectionPathOverlayIndex,h))}),De.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=ni(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return rd(e).qt(Gr.collectionPathOverlayIndex,c).next(h=>{for(const m of h){const E=Ef(this.O,m);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rd(e).Qt({index:Gr.collectionGroupOverlayIndex,range:h},(m,E,C)=>{const b=Ef(this.O,E);a.size<i||b.largestBatchId===c?(a.set(b.getKey(),b),c=b.largestBatchId):C.done()}).next(()=>a)}Yt(e,t){return rd(e).put(function(r,i,a){const[c,h,m]=iT(i,a.mutation.key);return new Gr(i,h,m,a.mutation.key.getCollectionGroup(),a.largestBatchId,Jc(r.Ht,a.mutation))}(this.O,this.userId,t))}}function rd(n){return qr(n,Gr.store)}class Sv{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),Wc(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Hc(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Is(e,pI)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):Rt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),vt.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function oS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function id(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=oS(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Sv.le=new Sv;class aS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=id(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=id(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sd{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class wf{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class oT{constructor(){this.Se=new aS,this.De=new sd(this.Se),this.Ce=new wf(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class aT{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function Jg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=vt.comparator(n.documentKey,e.documentKey),0!==t?t:(t=uT(n.arrayValue,e.arrayValue),0!==t?t:uT(n.directionalValue,e.directionalValue)))}function uT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uS{constructor(){this.xe=new Av}addToCollectionParentIndex(e,t){return this.xe.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t,r){return De.resolve(On())}getFieldIndex(e,t){return De.resolve(null)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}updateCollectionGroup(e,t,r){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class Av{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Yn(Rn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Yn(Rn.comparator)).toArray()}}class lS{constructor(e){this.user=e,this.ke=new Av,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:ni(i)};return Rv(e).put(a)}return De.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hI(t),""],!1,!0);return Rv(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Ji(c.parent))}return r})}addFieldIndex(e,t){const r=od(e),i=new Ui((a=t).indexId,a.collectionGroup,a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=od(e),i=xl(e),a=If(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return De.resolve(On())}getFieldIndex(e,t){return De.resolve(null)}Oe(e,t){const r=new oT;for(const i of e.fields.filter(c=>2!==c.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);Sv.le.Xt(a,c)}return r.Ve()}Me(e){const t=new oT;return Sv.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=od(e),i=xl(e);return(t?r.qt(Ui.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return De.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(E,C){const b=C?new ef(C.sequenceNumber,new Lg(qo(C.readTime),new vt(Ji(C.documentKey)),C.largestBatchId)):ef.empty(),R=E.fields.map(([k,W])=>new Jy(Fr.fromServerFormat(k),W));return new Fg(E.indexId,E.collectionGroup,R,b)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=od(e),a=xl(e);return this.$e(e).next(c=>i.qt(Ui.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>De.forEach(h,m=>{return a.put(new Ds(m.indexId,this.user.uid||"",c,Go((R=r).readTime),ni(R.documentKey.path),R.largestBatchId));var R})))}updateIndexEntries(e,t){const r=new Map;return De.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?De.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),De.forEach(h,m=>this.Fe(e,i,m).next(E=>{const C=this.Be(a,m);return E.isEqual(C)?De.resolve():this.Le(e,a,E,C)}))))})}Ue(e,t,r){return If(e).put(new ts(r.indexId,this.uid,r.arrayValue,r.directionalValue,ni(t.key.path)))}qe(e,t,r){return If(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,ni(t.key.path)])}Fe(e,t,r){const i=If(e);let a=new Yn(Jg);return i.Qt({index:ts.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,ni(t.path)])},(c,h)=>{a=a.add(new aT(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let r=new Yn(Jg);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(h=>2===h.kind);if(null!=a){const c=e.data.field(a.fieldPath);if(qc(c))for(const h of c.arrayValue.values||[])r=r.add(new aT(t.indexId,e.key,this.Me(h),i))}else r=r.add(new aT(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,h,m,E,C){const b=c.getIterator(),R=h.getIterator();let k=Il(b),W=Il(R);for(;k||W;){let we=!1,Fe=!1;if(k&&W){const xt=m(k,W);xt<0?Fe=!0:xt>0&&(we=!0)}else null!=k?Fe=!0:we=!0;we?(E(W),W=Il(R)):Fe?(C(k),k=Il(b)):(k=Il(b),W=Il(R))}}(r,i,Jg,c=>{a.push(this.Ue(e,t,c))},c=>{a.push(this.qe(e,t,c))}),De.waitFor(a)}$e(e){let t=1;return xl(e).Qt({index:Ds.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function Rv(n){return qr(n,bs.store)}function If(n){return qr(n,ts.store)}function od(n){return qr(n,Ui.store)}function xl(n){return qr(n,Ds.store)}const ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xv(n,e,t){const r=n.store(kn.store),i=n.store(fi.store),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.Qt({range:c},(C,b,R)=>(h++,R.delete()));a.push(m.next(()=>{Yt(1===h)}));const E=[];for(const C of t.mutations){const b=fi.key(e,C.key.path,t.batchId);a.push(i.delete(b)),E.push(C.key)}return De.waitFor(a).next(()=>E)}function Tf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Rt();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class Nv{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Yt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Nv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).Qt({index:kn.userMutationsIndex,range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ya(e),c=Za(e);return c.add({}).next(h=>{Yt("number"==typeof h);const m=new Ev(h,t,r,i),E=function(R,k,W){const we=W.baseMutations.map(xt=>Jc(R.Ht,xt)),Fe=W.mutations.map(xt=>Jc(R.Ht,xt));return new kn(k,W.batchId,W.localWriteTime.toMillis(),we,Fe)}(this.O,this.userId,m),C=[];let b=new Yn((R,k)=>vn(R.canonicalString(),k.canonicalString()));for(const R of i){const k=fi.key(this.userId,R.key.path,h);b=b.add(R.key.path.popLast()),C.push(c.put(E)),C.push(a.put(k,fi.PLACEHOLDER))}return b.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Ke[h]=m.keys()}),De.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Za(e).get(t).next(r=>r?(Yt(r.userId===this.userId),Al(this.O,r)):null)}Ge(e,t){return this.Ke[t]?De.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Za(e).Qt({index:kn.userMutationsIndex,range:i},(c,h,m)=>{h.userId===this.userId&&(Yt(h.batchId>=r),a=Al(this.O,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Za(e).Qt({index:kn.userMutationsIndex,range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).qt(kn.userMutationsIndex,t).next(r=>r.map(i=>Al(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ya(e).Qt({range:i},(c,h,m)=>{const[E,C,b]=c,R=Ji(C);if(E===this.userId&&t.path.isEqual(R))return Za(e).get(b).next(k=>{if(!k)throw Rt();Yt(k.userId===this.userId),a.push(Al(this.O,k))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Yn(vn);const i=[];return t.forEach(a=>{const c=fi.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(c),m=Ya(e).Qt({range:h},(E,C,b)=>{const[R,k,W]=E,we=Ji(k);R===this.userId&&a.path.isEqual(we)?r=r.add(W):b.done()});i.push(m)}),De.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=fi.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new Yn(vn);return Ya(e).Qt({range:c},(m,E,C)=>{const[b,R,k]=m,W=Ji(R);b===this.userId&&r.isPrefixOf(W)?W.length===i&&(h=h.add(k)):C.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Za(e).get(a).next(c=>{if(null===c)throw Rt();Yt(c.userId===this.userId),r.push(Al(this.O,c))}))}),De.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xv(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),De.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return De.resolve();const r=IDBKeyRange.lowerBound(fi.prefixForUser(this.userId)),i=[];return Ya(e).Qt({range:r},(a,c,h)=>{if(a[0]===this.userId){const m=Ji(a[1]);i.push(m)}else h.done()}).next(()=>{Yt(0===i.length)})})}containsKey(e,t){return lT(e,this.userId,t)}We(e){return cT(e).get(this.userId).next(t=>t||new Wo(this.userId,-1,""))}}function lT(n,e,t){const r=fi.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Ya(n).Qt({range:a,jt:!0},(h,m,E)=>{const[C,b,R]=h;C===e&&b===i&&(c=!0),E.done()}).next(()=>c)}function Za(n){return qr(n,kn.store)}function Ya(n){return qr(n,fi.store)}function cT(n){return qr(n,Wo.store)}class ud{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new ud(0)}static Je(){return new ud(-1)}}class cS{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new ud(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>$t.fromTimestamp(new kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ld(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Yt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ld(e).Qt((c,h)=>{const m=Rl(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>De.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ld(e).Qt((r,i)=>{const a=Rl(i);t(a)})}Ye(e){return Nl(e).get(es.key).next(t=>(Yt(null!==t),t))}Xe(e,t){return Nl(e).put(es.key,t)}Ze(e,t){return ld(e).put(rT(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=or(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ld(e).Qt({range:i,index:Di.queryTargetsIndexName},(c,h,m)=>{const E=Rl(h);Ug(t,E.target)&&(a=E,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ko(e);return t.forEach(c=>{const h=ni(c.path);i.push(a.put(new ri(r,h))),i.push(this.referenceDelegate.addReference(e,r,c))}),De.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ko(e);return De.forEach(t,a=>{const c=ni(a.path);return De.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ko(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ko(e);let a=On();return i.Qt({range:r,jt:!0},(c,h,m)=>{const E=Ji(c[1]),C=new vt(E);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=ni(t.path),i=IDBKeyRange.bound([r],[hI(r)],!1,!0);let a=0;return Ko(e).Qt({index:ri.documentTargetsIndex,jt:!0,range:i},([c,h],m,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}Tt(e,t){return ld(e).get(t).next(r=>r?Rl(r):null)}}function ld(n){return qr(n,Di.store)}function Nl(n){return qr(n,es.store)}function Ko(n){return qr(n,ri.store)}function Ss(n){return dT.apply(this,arguments)}function dT(){return dT=(0,Te.Z)(function*(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==yv)throw n;et("LocalStore","Unexpectedly lost primary lease")}),dT.apply(this,arguments)}function Mv([n,e],[t,r]){const i=vn(n,t);return 0===i?vn(e,r):i}class dS{constructor(e){this.en=e,this.buffer=new Yn(Mv),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Mv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kx{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;et("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Te.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Dl(i)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ss(i)}yield t.un(e)}))}}class hT{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return De.resolve(Qi.A);const r=new dS(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(ad)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ad):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,c,h,m,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,c=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(r=b,h=Date.now(),this.removeTargets(e,r,t))).next(b=>(a=b,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(E=Date.now(),Hy()<=cr.in.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${b} documents in `+(E-m)+`ms\nTotal Duration: ${E-C}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:b})))}}class Zx{constructor(e,t){this.db=e,this.garbageCollector=new hT(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return Cf(e,r)}removeReference(e,t,r){return Cf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Cf(e,t)}wn(e,t){return function(r,i){let a=!1;return cT(r).Wt(c=>lT(r,c,i).next(h=>(h&&(a=!0),De.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(c,h)=>{if(h<=t){const m=this.wn(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,$t.min()),Ko(e).delete([0,ni(c.path)])))});i.push(m)}}).next(()=>De.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Cf(e,t)}_n(e,t){const r=Ko(e);let i,a=Qi.A;return r.Qt({index:ri.documentTargetsIndex},([c,h],{path:m,sequenceNumber:E})=>{0===c?(a!==Qi.A&&t(new vt(Ji(i)),a),a=E,i=m):a=Qi.A}).next(()=>{a!==Qi.A&&t(new vt(Ji(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cf(n,e){return Ko(n).put((r=n.currentSequenceNumber,new ri(0,ni(e.path),r)));var r}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){$c(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Ng(this.inner)}}class fT{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?De.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hS{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ja(e).put(Xg(t),r)}removeEntry(e,t){const r=Ja(e),i=Xg(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Ja(e).get(Xg(t)).next(r=>this.gn(t,r))}yn(e,t){return Ja(e).get(Xg(t)).next(r=>({document:this.gn(t,r),size:Tf(r)}))}getEntries(e,t){let r=Cs();return this.pn(e,t,(i,a)=>{const c=this.gn(i,a);r=r.insert(i,c)}).next(()=>r)}In(e,t){let r=Cs(),i=new hr(vt.comparator);return this.pn(e,t,(a,c)=>{const h=this.gn(a,c);r=r.insert(a,h),i=i.insert(a,Tf(c))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return De.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let c=a.getNext();return Ja(e).Qt({range:i},(h,m,E)=>{const C=vt.fromSegments(h);for(;c&&vt.comparator(c,C)<0;)r(c,null),c=a.getNext();c&&c.isEqual(C)&&(r(c,m),c=a.hasNext()?a.getNext():null),c?E.Ut(c.path.toArray()):E.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=Cs();const a=t.length+1,c={};if(r.isEqual($t.min())){const h=t.toArray();c.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),m=Iv(r);c.range=IDBKeyRange.lowerBound([h,m],!0),c.index=pr.collectionReadTimeIndex}return Ja(e).Qt(c,(h,m,E)=>{if(h.length!==a)return;const C=this.gn(vt.fromSegments(h),m);t.isPrefixOf(C.key.path)?i=i.insert(C.key,C):E.done()}).next(()=>i)}newChangeBuffer(e){return new fS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pT(e).get(mo.key).next(t=>(Yt(!!t),t))}mn(e,t){return pT(e).put(mo.key,t)}gn(e,t){if(t){const r=wv(this.O,t);if(!r.isNoDocument()||!r.version.isEqual($t.min()))return r}return tr.newInvalidDocument(e)}}class fS extends fT{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Qa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Yn((a,c)=>vn(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.An.get(a);if(c.isValidDocument()){const m=nT(this.Tn.O,c);i=i.add(a.path.popLast()),r+=Tf(m)-h,t.push(this.Tn.addEntry(e,a,m))}else if(r-=h,this.trackRemovals){const m=nT(this.Tn.O,c.convertToNoDocument($t.min()));t.push(this.Tn.addEntry(e,a,m))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),De.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,c)=>{this.An.set(a,c)}),r))}}function pT(n){return qr(n,mo.store)}function Ja(n){return qr(n,pr.store)}function Xg(n){return n.path.toArray()}class pS{constructor(e){this.O=e}kt(e,t,r,i){const a=new Zg("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(Xi.store),(h=e).createObjectStore(Wo.store,{keyPath:Wo.keyPath}),h.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(fi.store),gT(e),function(h){h.createObjectStore(pr.store)}(e));let c=De.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(ri.store),h.deleteObjectStore(Di.store),h.deleteObjectStore(es.store)}(e),gT(e)),c=c.next(()=>function(h){const m=h.store(es.store),E=new es(0,0,$t.min().toTimestamp(),0);return m.put(es.key,E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,m){return m.store(kn.store).qt().next(E=>{h.deleteObjectStore(kn.store),h.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0});const C=m.store(kn.store),b=E.map(R=>C.put(R));return De.waitFor(b)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore(zo.store,{keyPath:zo.keyPath})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Rn(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore(mo.store)}(e),this.Pn(a)))),r<7&&i>=7&&(c=c.next(()=>this.bn(a))),r<8&&i>=8&&(c=c.next(()=>this.vn(e,a))),r<9&&i>=9&&(c=c.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const m=h.objectStore(pr.store);m.createIndex(pr.readTimeIndex,pr.readTimeIndexPath,{unique:!1}),m.createIndex(pr.collectionReadTimeIndex,pr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Vn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore(bl.store,{keyPath:bl.keyPath})})(e),function(h){h.createObjectStore(td.store,{keyPath:td.keyPath})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const m=h.createObjectStore(Gr.store,{keyPath:Gr.keyPath});m.createIndex(Gr.collectionPathOverlayIndex,Gr.collectionPathOverlayIndexPath,{unique:!1}),m.createIndex(Gr.collectionGroupOverlayIndex,Gr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>{!function(h){h.createObjectStore(Ui.store,{keyPath:Ui.keyPath,autoIncrement:!0}).createIndex(Ui.collectionGroupIndex,Ui.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(Ds.store,{keyPath:Ds.keyPath}).createIndex(Ds.sequenceNumberIndex,Ds.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(ts.store,{keyPath:ts.keyPath}).createIndex(ts.documentKeyIndex,ts.documentKeyIndexPath,{unique:!1})}(e)})),c}Pn(e){let t=0;return e.store(pr.store).Qt((r,i)=>{t+=Tf(i)}).next(()=>{const r=new mo(t);return e.store(mo.store).put(mo.key,r)})}Rn(e){const t=e.store(Wo.store),r=e.store(kn.store);return t.qt().next(i=>De.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(kn.userMutationsIndex,c).next(h=>De.forEach(h,m=>{Yt(m.userId===a.userId);const E=Al(this.O,m);return xv(e,a.userId,E).next(()=>{})}))}))}bn(e){const t=e.store(ri.store),r=e.store(pr.store);return e.store(es.store).get(es.key).next(i=>{const a=[];return r.Qt((c,h)=>{const m=new Rn(c),E=[0,ni(m)];a.push(t.get(E).next(C=>C?De.resolve():t.put(new ri(0,ni(m),i.highestListenSequenceNumber))))}).next(()=>De.waitFor(a))})}vn(e,t){e.createObjectStore(bs.store,{keyPath:bs.keyPath});const r=t.store(bs.store),i=new Av,a=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:ni(m)})}};return t.store(pr.store).Qt({jt:!0},(c,h)=>{const m=new Rn(c);return a(m.popLast())}).next(()=>t.store(fi.store).Qt({jt:!0},([c,h,m],E)=>{const C=Ji(h);return a(C.popLast())}))}Vn(e){const t=e.store(Di.store);return t.Qt((r,i)=>{const a=Rl(i),c=rT(this.O,a);return t.put(c)})}}function gT(n){n.createObjectStore(ri.store,{keyPath:ri.keyPath}).createIndex(ri.documentTargetsIndex,ri.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Di.store,{keyPath:Di.keyPath}).createIndex(Di.queryTargetsIndexName,Di.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(es.store)}const Pv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ov{constructor(e,t,r,i,a,c,h,m,E,C,b=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=c,this.document=h,this.Dn=E,this.Cn=C,this.schemaVersion=b,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=R=>Promise.resolve(),!Ov.Vt())throw new Ge(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zx(this,i),this.Bn=t+"main",this.O=new tT(m),this.Ln=new ns(this.Bn,this.schemaVersion,new pS(this.O)),this.Un=new cS(this.referenceDelegate,this.O),this.qn=new hS(this.O),this.Kn=new sS,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===C&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(Ee.FAILED_PRECONDITION,Pv);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Qi(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bf(e).put(new zo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(Dl(e))return et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Zo(e).get(Xi.key).next(t=>De.resolve(this.ts(t)))}es(e){return bf(e).delete(this.clientId)}ns(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,zo.store);return i.qt().next(a=>{const c=e.rs(a,18e5),h=a.filter(m=>-1===c.indexOf(m));return De.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?De.resolve(!0):Zo(e).get(Xi.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Ge(Ee.FAILED_PRECONDITION,Pv);return!1}}return!(!this.networkEnabled||!this.inForeground)||bf(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Xi.store,zo.store],t=>{const r=new eT(t,Qi.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>bf(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return Nv.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new lS(e)}getDocumentOverlayCache(e){return Dv.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){et("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(c=this.schemaVersion)?QI:12===c?YI:11===c?Kg:void Rt();var c;let h;return this.Ln.runTransaction(e,i,a,m=>(h=new eT(m,this.Nn?this.Nn.next():Qi.A),"readwrite-primary"===t?this.Jn(h).next(E=>!!E||this.Yn(h)).next(E=>{if(!E)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Ge(Ee.FAILED_PRECONDITION,yv);return r(h)}).next(E=>this.Zn(h).next(()=>E)):this._s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}_s(e){return Zo(e).get(Xi.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(Ee.FAILED_PRECONDITION,Pv)})}Zn(e){const t=new Xi(this.clientId,this.allowTabSynchronization,Date.now());return Zo(e).put(Xi.key,t)}static Vt(){return ns.Vt()}Xn(e){const t=Zo(e);return t.get(Xi.key).next(r=>this.ts(r)?(et("IndexedDbPersistence","Releasing primary lease."),t.delete(Xi.key)):De.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,K.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return et("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zo(n){return qr(n,Xi.store)}function bf(n){return qr(n,zo.store)}function em(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mT{constructor(e,t){this.progress=e,this.ws=t}}class _T{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return vt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):ev(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new vt(t)).next(r=>{let i=qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=qa();return this.indexManager.getCollectionParents(e,i).next(c=>De.forEach(c,h=>{const m=(E=t,C=h.child(i),new Ho(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,C;return this.bs(e,m,r).next(E=>{E.forEach((C,b)=>{a=a.insert(C,b)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const h of c.mutations){const m=h.key;let E=i.get(m);null==E&&(E=tr.newInvalidDocument(m),i=i.insert(m,E)),av(h,E,c.localWriteTime),E.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,c)=>{$g(t,c)||(i=i.remove(a))}),i))}}class tm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=On(),i=On();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new tm(e,t.fromCache,r,i)}}class kv{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual($t.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const c=this.xs(t,a);return(Fi(t)||Li(t))&&this.ks(t.limitType,c,i,r)?this.Ns(e,t):(Hy()<=cr.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tv(t)),this.Cs.As(e,t,r).next(h=>(c.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}xs(e,t){let r=new Yn(bI(e));return t.forEach((i,a)=>{$g(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return Hy()<=cr.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",tv(t)),this.Cs.As(e,t,$t.min())}}class gS{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new hr(vn),this.$s=new Qa(a=>or(a),Ug),this.Fs=$t.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new _T(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Fv(n,e,t,r){return new gS(n,e,t,r)}function yT(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Te.Z)(function*(n,e){const t=ft(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let m=On();for(const E of i){c.push(E.batchId);for(const C of E.mutations)m=m.add(C.key)}for(const E of a){h.push(E.batchId);for(const C of E.mutations)m=m.add(C.key)}return t.Us.Es(r,m).next(E=>({qs:E,removedBatchIds:c,addedBatchIds:h}))})})}),Lv.apply(this,arguments)}function mS(n,e){const t=ft(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,h,m,E){const C=m.batch,b=C.keys();let R=De.resolve();return b.forEach(k=>{R=R.next(()=>E.getEntry(h,k)).next(W=>{const we=m.docVersions.get(k);Yt(null!==we),W.version.compareTo(we)<0&&(C.applyToRemoteDocument(W,m),W.isValidDocument()&&(W.setReadTime(m.commitVersion),E.addEntry(W)))})}),R.next(()=>c.gs.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function vT(n){const e=ft(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function Df(n,e){const t=ft(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((E,C)=>{const b=i.get(C);if(!b)return;h.push(t.Un.removeMatchingKeys(a,E.removedDocuments,C).next(()=>t.Un.addMatchingKeys(a,E.addedDocuments,C)));let R=b.withSequenceNumber(a.currentSequenceNumber);var k,W,we;e.targetMismatches.has(C)?R=R.withResumeToken(Lr.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(C,R),W=R,we=E,(0===(k=b).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,R))});let m=Cs();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),h.push(ET(a,c,e.documentUpdates).next(E=>{m=E})),!r.isEqual($t.min())){const E=t.Un.getLastRemoteSnapshotVersion(a).next(C=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(E)}return De.waitFor(h).next(()=>c.apply(a)).next(()=>t.Us.Ts(a,m)).next(()=>m)}).then(a=>(t.Ms=i,a))}function ET(n,e,t){let r=On();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Cs();return t.forEach((c,h)=>{const m=i.get(c);h.isNoDocument()&&h.version.isEqual($t.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):et("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",h.version)}),a})}function Uv(n,e){const t=ft(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Si(n,e){const t=ft(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,De.resolve(i)):t.Un.allocateTargetId(r).next(c=>(i=new Ka(e,c,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function cd(n,e,t){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,Te.Z)(function*(n,e,t){const r=ft(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dl(c))throw c;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),Sf.apply(this,arguments)}function Xa(n,e,t){const r=ft(n);let i=$t.min(),a=On();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,m,E){const C=ft(h),b=C.$s.get(E);return void 0!==b?De.resolve(C.Ms.get(b)):C.Un.getTargetData(m,E)}(r,c,Ts(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>r.Os.As(c,e,t?i:$t.min(),t?a:On())).next(h=>({documents:h,Ks:a})))}function wT(n,e){const t=ft(n),r=ft(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(c=>c?c.target:null))}function IT(n){const e=ft(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const c=ft(r);let h=Cs(),m=Iv(a);const E=Ja(i),C=IDBKeyRange.lowerBound(m,!0);return E.Qt({index:pr.readTimeIndex,range:C},(b,R)=>{const k=wv(c.O,R);h=h.insert(k.key,k),m=R.readTime}).next(()=>({ws:h,readTime:Tv(m)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function dd(){return dd=(0,Te.Z)(function*(n){const e=ft(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Ja(r);let a=$t.min();return i.Qt({index:pr.readTimeIndex,reverse:!0},(c,h,m)=>{h.readTime&&(a=Tv(h.readTime)),m.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),dd.apply(this,arguments)}function Vv(){return Vv=(0,Te.Z)(function*(n,e,t,r){const i=ft(n);let a=On(),c=Cs();for(const E of t){const C=e.Gs(E.metadata.name);E.document&&(a=a.add(C));const b=e.js(E);b.setReadTime(e.Qs(E.metadata.readTime)),c=c.insert(C,b)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),m=yield Si(i,(E=r,Ts(bi(Rn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>ET(E,h,c).next(C=>(h.apply(E),C)).next(C=>i.Un.removeMatchingKeysForTargetId(E,m.targetId).next(()=>i.Un.addMatchingKeys(E,a,m.targetId)).next(()=>i.Us.Ts(E,C)).next(()=>C)))}),Vv.apply(this,arguments)}function yS(n,e){return rm.apply(this,arguments)}function rm(){return rm=(0,Te.Z)(function*(n,e,t=On()){const r=yield Si(n,Ts(Cv(e.bundledQuery))),i=ft(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Ur(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Kn.saveNamedQuery(a,e);const h=r.withResumeToken(Lr.EMPTY_BYTE_STRING,c);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(a,h).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),rm.apply(this,arguments)}class TT{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return De.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),De.resolve()}getNamedQuery(e,t){return De.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:Cv(r.bundledQuery),readTime:Ur(r.readTime)}),De.resolve();var r}}class Bv{constructor(){this.overlays=new hr(vt.comparator),this.Hs=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),De.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),De.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,c=new vt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,E=m.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return De.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new hr((E,C)=>E-C);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let C=a.get(E.largestBatchId);null===C&&(C=new Map,a=a.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const h=new Map,m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((E,C)=>h.set(C,E)),!(h.size>=i)););return De.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new Qg(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class im{constructor(){this.Js=new Yn(Kr.Ys),this.Xs=new Yn(Kr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Kr(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new vt(new Rn([])),r=new Kr(t,e),i=new Kr(t,e+1),a=[];return this.Xs.forEachInRange([r,i],c=>{this.ei(c),a.push(c.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new vt(new Rn([])),r=new Kr(t,e),i=new Kr(t,e+1);let a=On();return this.Xs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Kr(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return vt.comparator(e.key,t.key)||vn(e.oi,t.oi)}static Zs(e,t){return vn(e.oi,t.oi)||vt.comparator(e.key,t.key)}}class vS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Yn(Kr.Ys)}checkEmpty(e){return De.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const c=new Ev(a,t,r,i);this.gs.push(c);for(const h of i)this.ui=this.ui.add(new Kr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return De.resolve(c)}lookupMutationBatch(e,t){return De.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return De.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return De.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),i=new Kr(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],c=>{const h=this.ai(c.oi);a.push(h)}),De.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Yn(vn);return t.forEach(i=>{const a=new Kr(i,0),c=new Kr(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,c],h=>{r=r.add(h.oi)})}),De.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;vt.isDocumentKey(a)||(a=a.child(""));const c=new Kr(new vt(a),0);let h=new Yn(vn);return this.ui.forEachWhile(m=>{const E=m.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(h=h.add(m.oi)),!0)},c),De.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Yt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return De.forEach(t.mutations,i=>{const a=new Kr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Kr(t,0),i=this.ui.firstAfterOrEqual(r);return De.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return De.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class Yx{constructor(e){this.di=e,this.docs=new hr(vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return De.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Cs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),De.resolve(r)}getAll(e,t,r){let i=Cs();const a=new vt(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||m.readTime.compareTo(r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return De.resolve(i)}_i(e,t){return De.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jv(this)}getSize(e){return De.resolve(this.size)}}class jv extends fT{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),De.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class $v{constructor(e){this.persistence=e,this.wi=new Qa(t=>or(t),Ug),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.mi=0,this.gi=new im,this.targetCount=0,this.yi=ud.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),De.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.Ze(t),De.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),De.waitFor(a).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return De.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),De.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),De.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),De.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return De.resolve(r)}containsKey(e,t){return De.resolve(this.gi.containsKey(t))}}class CT{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Qi(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new $v(this),this.indexManager=new uS,this.qn=new Yx(r=>this.referenceDelegate.Ii(r)),this.O=new tT(t),this.Kn=new TT(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new vS(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){et("MemoryPersistence","Starting transaction:",e);const i=new Hv(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return De.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class Hv extends JI{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new im,this.Pi=null}static bi(e){return new Af(e)}get vi(){if(this.Pi)return this.Pi;throw Rt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),De.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),De.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.vi,r=>{const i=vt.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,$t.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return De.or([()=>De.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function bT(n,e){return`firestore_clients_${n}_${e}`}function DT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Wv(n,e){return`firestore_targets_${n}_${e}`}class sm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ge(i.error.code,i.error.message))),c?new sm(e,t,i.state,a):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ge(r.error.code,r.error.message))),a?new hd(e,r.state,i):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=df();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=qy(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new fd(e,a):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class om{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new om(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zv{constructor(){this.activeTargetIds=df()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class am{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new hr(vn),this.started=!1,this.$i=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=bT(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new zv),this.Li=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(bT(e.persistenceKey,i));if(a){const c=fd.Si(i,a);c&&(e.Mi=e.Mi.insert(c.clientId,c))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Wv(this.persistenceKey,e));if(r){const i=hd.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return et("SharedClientState","READ",e,t),t}setItem(e,t){et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let c=Qi.A;if(null!=a)try{const h=JSON.parse(a);Yt("number"==typeof h),c=h}catch(h){dr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Qi.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new sm(this.currentUser,e,t,r),a=DT(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=DT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=Wv(this.persistenceKey,e),a=new hd(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return fd.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return sm.Si(new ei(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return hd.Si(i,t)}Qi(e){return om.Si(e)}rr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),c=[],h=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.dr(c,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=df();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Gv{constructor(){this._r=new zv,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new zv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class ES{mr(e){}shutdown(){}}class qv{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ST={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class wS{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class AT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const c=this.$r(e,t);et("RestConnection","Sending: ",c,r);const h={};return this.Fr(h,i,a),this.Br(e,c,h,r).then(m=>(et("RestConnection","Received: ",m),m),m=>{throw ll("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${ST[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,c)=>{const h=new FD;h.listenOnce(OD.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case jy.NO_ERROR:const E=h.getResponseJson();et("Connection","XHR received:",JSON.stringify(E)),a(E);break;case jy.TIMEOUT:et("Connection",'RPC "'+e+'" timed out'),c(new Ge(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case jy.HTTP_ERROR:const C=h.getStatus();if(et("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const b=h.getResponseJson().error;if(b&&b.status&&b.message){const R=function(k){const W=k.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(W)>=0?W:Ee.UNKNOWN}(b.status);c(new Ge(R,b.message))}else c(new Ge(Ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ge(Ee.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{et("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=rI(),c=iI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new oI({})),this.Fr(h.initMessageHeaders,t,r),(0,K.uI)()||(0,K.b$)()||(0,K.d)()||(0,K.w1)()||(0,K.Mn)()||(0,K.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");et("Connection","Creating WebChannel: "+m,h);const E=a.createWebChannel(m,h);let C=!1,b=!1;const R=new wS({Ar:W=>{b?et("Connection","Not sending because WebChannel is closed:",W):(C||(et("Connection","Opening WebChannel transport."),E.open(),C=!0),et("Connection","WebChannel sending:",W),E.send(W))},Rr:()=>E.close()}),k=(W,we,Fe)=>{W.listen(we,xt=>{try{Fe(xt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return k(E,Ag.EventType.OPEN,()=>{b||et("Connection","WebChannel transport opened.")}),k(E,Ag.EventType.CLOSE,()=>{b||(b=!0,et("Connection","WebChannel transport closed"),R.Cr())}),k(E,Ag.EventType.ERROR,W=>{b||(b=!0,ll("Connection","WebChannel transport errored:",W),R.Cr(new Ge(Ee.UNAVAILABLE,"The operation could not be completed")))}),k(E,Ag.EventType.MESSAGE,W=>{var we;if(!b){const Fe=W.data[0];Yt(!!Fe);const xt=Fe,Vt=xt.error||(null===(we=xt[0])||void 0===we?void 0:we.error);if(Vt){et("Connection","WebChannel received error:",Vt);const Jt=Vt.status;let Nt=function(vi){const Vd=wr[vi];if(void 0!==Vd)return cv(Vd)}(Jt),Pn=Vt.message;void 0===Nt&&(Nt=Ee.INTERNAL,Pn="Unknown error status: "+Jt+" with message "+Vt.message),b=!0,R.Cr(new Ge(Nt,Pn)),E.close()}else et("Connection","WebChannel received:",Fe),R.Nr(Fe)}}),k(c,kD.STAT_EVENT,W=>{W.stat===sI.PROXY?et("Connection","Detected buffering proxy"):W.stat===sI.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.Dr()},0),R}}function RT(){return"undefined"!=typeof window?window:null}function Zr(){return"undefined"!=typeof document?document:null}function _o(n){return new VI(n,!0)}class Kv{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class xT{constructor(e,t,r,i,a,c,h,m){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Kv(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,Te.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,Te.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===Ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Ge(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,Te.Z)(function*(){e.state=0,e.start()}))}Io(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qx extends xT{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function zI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Rt(),i=e.targetChange.targetIds||[],a=function(m,E){return m.N?(Yt(void 0===E||"string"==typeof E),Lr.fromBase64String(E||"")):(Yt(void 0===E||E instanceof Uint8Array),Lr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const E=void 0===m.code?Ee.UNKNOWN:cv(m.code);return new Ge(E,m.message||"")}(c);t=new UI(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=go(n,r.document.name),a=Ur(r.document.updateTime),c=new ti({mapValue:{fields:r.document.fields}}),h=tr.newFoundDocument(i,a,c);t=new Gg(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=go(n,r.document),a=r.readTime?Ur(r.readTime):$t.min(),c=tr.newNoDocument(i,a);t=new Gg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=go(n,r.document);t=new Gg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Rt();{const r=e.filter,a=new kI(r.count||0);t=new LI(r.targetId,a)}}var m;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return $t.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?$t.min():a.readTime?Ur(a.readTime):$t.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=_f(this.O),t.addTarget=function(i,a){let c;const h=a.target;return c=Vg(h)?{documents:Xc(i,h)}:{query:GI(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=BI(i,a.resumeToken):a.snapshotVersion.compareTo($t.min())>0&&(c.readTime=gf(i,a.snapshotVersion.toTimestamp())),c}(this.O,e);const r=function YD(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=_f(this.O),t.removeTarget=e,this.fo(t)}}class Rf extends xT{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function vf(n,e){return n&&n.length>0?(Yt(void 0!==e),n.map(t=>function(r,i){let a=Ur(r.updateTime?r.updateTime:i);return a.isEqual($t.min())&&(a=Ur(i)),new zD(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Vo(r,t)}return Yt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=_f(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jc(this.O,r))};this.fo(t)}}class IS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Ge(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ge(Ee.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ge(Ee.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class Zv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(dr(t),this.Oo=!1):et("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class TS{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{r.enqueueAndForget((0,Te.Z)(function*(){var m;eu(c)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Te.Z)(function*(E){const C=ft(E);C.Ko.add(4),yield gd(C),C.Qo.set("Unknown"),C.Ko.delete(4),yield pd(C)}),function(E){return m.apply(this,arguments)})(c))}))}),this.Qo=new Zv(r,i)}}function pd(n){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Te.Z)(function*(n){if(eu(n))for(const e of n.Go)yield e(!0)}),Yv.apply(this,arguments)}function gd(n){return xf.apply(this,arguments)}function xf(){return xf=(0,Te.Z)(function*(n){for(const e of n.Go)yield e(!1)}),xf.apply(this,arguments)}function Nf(n,e){const t=ft(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),lm(t)?NT(t):Pf(t).co()&&_d(t,e))}function md(n,e){const t=ft(n),r=Pf(t);t.qo.delete(e),r.co()&&um(t,e),0===t.qo.size&&(r.co()?r.ho():eu(t)&&t.Qo.set("Unknown"))}function _d(n,e){n.Wo.Z(e.targetId),Pf(n).Ao(e)}function um(n,e){n.Wo.Z(e),Pf(n).Ro(e)}function NT(n){n.Wo=new ZD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Pf(n).start(),n.Qo.Mo()}function lm(n){return eu(n)&&!Pf(n).oo()&&n.qo.size>0}function eu(n){return 0===ft(n).Ko.size}function Qv(n){n.Wo=void 0}function cm(n){return dm.apply(this,arguments)}function dm(){return dm=(0,Te.Z)(function*(n){n.qo.forEach((e,t)=>{_d(n,e)})}),dm.apply(this,arguments)}function CS(n,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,Te.Z)(function*(n,e){Qv(n),lm(n)?(n.Qo.Bo(e),NT(n)):n.Qo.set("Unknown")}),Mf.apply(this,arguments)}function Jv(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,Te.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof UI&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hm(n,r)}else if(e instanceof Gg?n.Wo.ct(e):e instanceof LI?n.Wo._t(e):n.Wo.ht(e),!t.isEqual($t.min()))try{const r=yield vT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Wo.yt(a);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const E=i.qo.get(m);E&&i.qo.set(m,E.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const m=i.qo.get(h);if(!m)return;i.qo.set(h,m.withResumeToken(Lr.EMPTY_BYTE_STRING,m.snapshotVersion)),um(i,h);const E=new Ka(m.target,h,1,m.sequenceNumber);_d(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield hm(n,r)}var r}),MT.apply(this,arguments)}function hm(n,e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,Te.Z)(function*(n,e,t){if(!Dl(e))throw e;n.Ko.add(1),yield gd(n),n.Qo.set("Offline"),t||(t=()=>vT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield pd(n)}))}),Xv.apply(this,arguments)}function eE(n,e){return e().catch(t=>hm(n,t,e))}function Ml(n){return tE.apply(this,arguments)}function tE(){return tE=(0,Te.Z)(function*(n){const e=ft(n),t=Pl(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;PT(e);)try{const i=yield Uv(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,OT(e,i)}catch(i){yield hm(e,i)}kT(e)&&FT(e)}),tE.apply(this,arguments)}function PT(n){return eu(n)&&n.Uo.length<10}function OT(n,e){n.Uo.push(e);const t=Pl(n);t.co()&&t.bo&&t.vo(e.mutations)}function kT(n){return eu(n)&&!Pl(n).oo()&&n.Uo.length>0}function FT(n){Pl(n).start()}function LT(n){return nE.apply(this,arguments)}function nE(){return nE=(0,Te.Z)(function*(n){Pl(n).Do()}),nE.apply(this,arguments)}function UT(n){return fm.apply(this,arguments)}function fm(){return fm=(0,Te.Z)(function*(n){const e=Pl(n);for(const t of n.Uo)e.vo(t.mutations)}),fm.apply(this,arguments)}function VT(n,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,Te.Z)(function*(n,e,t){const r=n.Uo.shift(),i=Yg.from(r,e,t);yield eE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ml(n)}),pm.apply(this,arguments)}function bS(n,e){return rE.apply(this,arguments)}function rE(){return rE=(0,Te.Z)(function*(n,e){var t;e&&Pl(n).bo&&(yield(t=(0,Te.Z)(function*(r,i){if(lv(a=i.code)&&a!==Ee.ABORTED){const c=r.Uo.shift();Pl(r).ao(),yield eE(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Ml(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),kT(n)&&FT(n)}),rE.apply(this,arguments)}function DS(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Te.Z)(function*(n,e){const t=ft(n);t.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=eu(t);t.Ko.add(3),yield gd(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield pd(t)}),gm.apply(this,arguments)}function BT(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,Te.Z)(function*(n,e){const t=ft(n);e?(t.Ko.delete(2),yield pd(t)):e||(t.Ko.add(2),yield gd(t),t.Qo.set("Unknown"))}),jT.apply(this,arguments)}function Pf(n){return n.zo||(n.zo=function(e,t,r){const i=ft(e);return i.No(),new Qx(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:cm.bind(null,n),vr:CS.bind(null,n),To:Jv.bind(null,n)}),n.Go.push(function(){var e=(0,Te.Z)(function*(t){t?(n.zo.ao(),lm(n)?NT(n):n.Qo.set("Unknown")):(yield n.zo.stop(),Qv(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Pl(n){return n.Ho||(n.Ho=function(e,t,r){const i=ft(e);return i.No(),new Rf(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:LT.bind(null,n),vr:bS.bind(null,n),So:UT.bind(null,n),Vo:VT.bind(null,n)}),n.Go.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Ho.ao(),yield Ml(n)):(yield n.Ho.stop(),n.Uo.length>0&&(et("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class $T{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new $T(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Of(n,e){if(dr("AsyncQueue",`${e}: ${n}`),Dl(n))return new Ge(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}class kf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||vt.comparator(t.key,r.key):(t,r)=>vt.comparator(t.key,r.key),this.keyedMap=qa(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new kf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HT{constructor(){this.Jo=new hr(vt.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):Rt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yo{constructor(e,t,r,i,a,c,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Yo(e,t,kf.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Jx{constructor(){this.Xo=void 0,this.listeners=[]}}class iE{constructor(){this.queries=new Qa(e=>Yc(e),yl),this.onlineState="Unknown",this.Zo=new Set}}function tu(n,e){return mm.apply(this,arguments)}function mm(){return mm=(0,Te.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Jx),i)try{a.Xo=yield t.onListen(r)}catch(c){const h=Of(c,`Initialization of query '${tv(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&_m(t)}),mm.apply(this,arguments)}function sE(n,e){return oE.apply(this,arguments)}function oE(){return oE=(0,Te.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),oE.apply(this,arguments)}function aE(n,e){const t=ft(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.ec(i)&&(r=!0);c.Xo=i}}r&&_m(t)}function WT(n,e,t){const r=ft(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function _m(n){n.Zo.forEach(e=>{e.next()})}class ym{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class Xx{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class uE{constructor(e){this.O=e}Gs(e){return go(this.O,e)}js(e){return e.metadata.exists?yf(this.O,e.document,!1):tr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Ur(e)}}class vm{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=lE(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new uE(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||On()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function nm(n,e,t,r){return Vv.apply(this,arguments)}(e.localStore,new uE(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield yS(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new mT(Object.assign({},e.progress),t)})()}}function lE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SS{constructor(e){this.key=e}}class AS{constructor(e){this.key=e}}class RS{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=On(),this.mutatedKeys=On(),this.mc=bI(e),this.gc=new kf(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new HT,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m=Fi(this.query)&&i.size===this.query.limit?i.last():null,E=Li(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,b)=>{const R=i.get(C),k=$g(this.query,b)?b:null,W=!!R&&this.mutatedKeys.has(R.key),we=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Fe=!1;R&&k?R.data.isEqual(k.data)?W!==we&&(r.track({type:3,doc:k}),Fe=!0):this.Tc(R,k)||(r.track({type:2,doc:k}),Fe=!0,(m&&this.mc(k,m)>0||E&&this.mc(k,E)<0)&&(h=!0)):!R&&k?(r.track({type:0,doc:k}),Fe=!0):R&&!k&&(r.track({type:1,doc:R}),Fe=!0,(m||E)&&(h=!0)),Fe&&(k?(c=c.add(k),a=we?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),Fi(this.query)||Li(this.query))for(;c.size>this.query.limit;){const C=Fi(this.query)?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{gc:c,Ec:r,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((E,C)=>function(b,R){const k=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return k(b)-k(R)}(E.type,C.type)||this.mc(E.doc,C.doc)),this.Ac(r);const c=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,m=h!==this._c;return this._c=h,0!==a.length||m?{snapshot:new Yo(this.query,e.gc,i,a,e.mutatedKeys,0===h,m,!1),Pc:c}:{Pc:c}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new HT,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=On(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new AS(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new SS(r))}),t}vc(e){this.dc=e.Ks,this.wc=On();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Yo.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class xS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cE{constructor(e){this.key=e,this.Sc=!1}}class NS{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Dc={},this.Cc=new Qa(h=>Yc(h),yl),this.Nc=new Map,this.xc=new Set,this.kc=new hr(vt.comparator),this.Oc=new Map,this.Mc=new im,this.$c={},this.Fc=new Map,this.Bc=ud.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function eN(n,e){return dE.apply(this,arguments)}function dE(){return dE=(0,Te.Z)(function*(n,e){const t=tC(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const c=yield Si(t.localStore,Ts(e));t.isPrimaryClient&&Nf(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Ff(t,e,r,"current"===h)}return i}),dE.apply(this,arguments)}function Ff(n,e,t,r){return hE.apply(this,arguments)}function hE(){return hE=(0,Te.Z)(function*(n,e,t,r){n.Uc=(C,b,R)=>{return(k=(0,Te.Z)(function*(W,we,Fe,xt){let Vt=we.view.Ic(Fe);Vt.ks&&(Vt=yield Xa(W.localStore,we.query,!1).then(({documents:Pn})=>we.view.Ic(Pn,Vt)));const Jt=xt&&xt.targetChanges.get(we.targetId),Nt=we.view.applyChanges(Vt,W.isPrimaryClient,Jt);return IE(W,we.targetId,Nt.Pc),Nt.snapshot}),function(W,we,Fe,xt){return k.apply(this,arguments)})(n,C,b,R);var k};const i=yield Xa(n.localStore,e,!0),a=new RS(e,i.Ks),c=a.Ic(i.documents),h=Pt.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(c,n.isPrimaryClient,h);IE(n,t,m.Pc);const E=new xS(e,t,a);return n.Cc.set(e,E),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),m.snapshot}),hE.apply(this,arguments)}function rs(n,e){return fE.apply(this,arguments)}function fE(){return fE=(0,Te.Z)(function*(n,e){const t=ft(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!yl(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),md(t.remoteStore,r.targetId),yd(t,r.targetId)}).catch(Ss))):(yd(t,r.targetId),yield cd(t.localStore,r.targetId,!0))}),fE.apply(this,arguments)}function gE(){return gE=(0,Te.Z)(function*(n,e,t){const r=nC(n);try{const i=yield function(a,c){const h=ft(a),m=kr.now(),E=c.reduce((b,R)=>b.add(R.key),On());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>h.Us.Es(b,E).next(R=>{C=R;const k=[];for(const W of c){const we=qD(W,C.get(W.key));null!=we&&k.push(new wl(W.key,we,Qy(we.value.mapValue),Rr.exists(!0)))}return h.gs.addMutationBatch(b,m,k,c)})).then(b=>(b.applyToLocalDocumentSet(C),{batchId:b.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let m=a.$c[a.currentUser.toKey()];m||(m=new hr(vn)),m=m.insert(c,h),a.$c[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Qo(r,i.changes),yield Ml(r.remoteStore)}catch(i){const a=Of(i,"Failed to persist write");t.reject(a)}}),gE.apply(this,arguments)}function zT(n,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Te.Z)(function*(n,e){const t=ft(n);try{const r=yield Df(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Oc.get(a);c&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Sc=!0:i.modifiedDocuments.size>0?Yt(c.Sc):i.removedDocuments.size>0&&(Yt(c.Sc),c.Sc=!1))}),yield Qo(t,r,e)}catch(r){yield Ss(r)}}),Lf.apply(this,arguments)}function mE(n,e,t){const r=ft(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,c)=>{const h=c.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=ft(a);h.onlineState=c;let m=!1;h.queries.forEach((E,C)=>{for(const b of C.listeners)b.tc(c)&&(m=!0)}),m&&_m(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GT(n,e,t){return _E.apply(this,arguments)}function _E(){return _E=(0,Te.Z)(function*(n,e,t){const r=ft(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let c=new hr(vt.comparator);c=c.insert(a,tr.newNoDocument(a,$t.min()));const h=On().add(a),m=new zg($t.min(),new Map,new Yn(vn),c,h);yield zT(r,m),r.kc=r.kc.remove(a),r.Oc.delete(e),wm(r)}else yield cd(r.localStore,e,!1).then(()=>yd(r,e,t)).catch(Ss)}),_E.apply(this,arguments)}function qT(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,Te.Z)(function*(n,e){const t=ft(n),r=e.batch.batchId;try{const i=yield mS(t.localStore,e);KT(t,r,null),EE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qo(t,i)}catch(i){yield Ss(i)}}),Em.apply(this,arguments)}function MS(n,e,t){return yE.apply(this,arguments)}function yE(){return yE=(0,Te.Z)(function*(n,e,t){const r=ft(n);try{const i=yield function(a,c){const h=ft(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let E;return h.gs.lookupMutationBatch(m,c).next(C=>(Yt(null!==C),E=C.keys(),h.gs.removeMutationBatch(m,C))).next(()=>h.gs.performConsistencyCheck(m)).next(()=>h.Us.Es(m,E))})}(r.localStore,e);KT(r,e,t),EE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qo(r,i)}catch(i){yield Ss(i)}}),yE.apply(this,arguments)}function is(){return is=(0,Te.Z)(function*(n,e){const t=ft(n);eu(t.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=ft(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=Of(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),is.apply(this,arguments)}function EE(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function KT(n,e,t){const r=ft(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function yd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||wE(n,r)})}function wE(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(md(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),wm(n))}function IE(n,e,t){for(const r of t)r instanceof SS?(n.Mc.addReference(r.key,e),PS(n,r)):r instanceof AS?(et("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||wE(n,r.key)):Rt()}function PS(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(et("SyncEngine","New document in limbo: "+t),n.xc.add(r),wm(n))}function wm(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new vt(Rn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new cE(t)),n.kc=n.kc.insert(t,r),Nf(n.remoteStore,new Ka(Ts(bi(t.path)),r,2,Qi.A))}}function Qo(n,e,t){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Te.Z)(function*(n,e,t){const r=ft(n),i=[],a=[],c=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,m)=>{c.push(r.Uc(m,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,E.fromCache?"not-current":"current"),i.push(E);const C=tm.Ss(m.targetId,E);a.push(C)}}))}),yield Promise.all(c),r.Dc.To(i),yield(h=(0,Te.Z)(function*(m,E){const C=ft(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>De.forEach(E,R=>De.forEach(R.vs,k=>C.persistence.referenceDelegate.addReference(b,R.targetId,k)).next(()=>De.forEach(R.Vs,k=>C.persistence.referenceDelegate.removeReference(b,R.targetId,k)))))}catch(b){if(!Dl(b))throw b;et("LocalStore","Failed to update sequence numbers: "+b)}for(const b of E){const R=b.targetId;if(!b.fromCache){const k=C.Ms.get(R),we=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);C.Ms=C.Ms.insert(R,we)}}}),function(m,E){return h.apply(this,arguments)})(r.localStore,a))}),ZT.apply(this,arguments)}function YT(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,Te.Z)(function*(n,e){const t=ft(n);if(!t.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=yield yT(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(c=>{c.forEach(h=>{h.reject(new Ge(Ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qo(t,r.qs)}var i}),Im.apply(this,arguments)}function OS(n,e){const t=ft(n),r=t.Oc.get(e);if(r&&r.Sc)return On().add(r.key);{let i=On();const a=t.Nc.get(e);if(!a)return i;for(const c of a){const h=t.Cc.get(c);i=i.unionWith(h.view.yc)}return i}}function kS(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Te.Z)(function*(n,e){const t=ft(n),r=yield Xa(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&IE(t,e.targetId,i.Pc),i}),Tm.apply(this,arguments)}function Uf(n){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Te.Z)(function*(n){const e=ft(n);return IT(e.localStore).then(t=>Qo(e,t))}),Vf.apply(this,arguments)}function QT(n,e,t,r){return TE.apply(this,arguments)}function TE(){return TE=(0,Te.Z)(function*(n,e,t,r){const i=ft(n),a=yield function(c,h){const m=ft(c),E=ft(m.gs);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>E.Ge(C,h).next(b=>b?m.Us.Es(C,b):De.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Ml(i.remoteStore):"acknowledged"===t||"rejected"===t?(KT(i,e,r||null),EE(i,e),h=e,ft(ft(i.localStore).gs).Qe(h)):Rt(),yield Qo(i,a)):et("SyncEngine","Cannot apply mutation batch with id: "+e)}),TE.apply(this,arguments)}function Cm(){return Cm=(0,Te.Z)(function*(n,e){const t=ft(n);if(tC(t),nC(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XT(t,r.toArray());t.Lc=!0,yield BT(t.remoteStore,!0);for(const a of i)Nf(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(yd(t,c),cd(t.localStore,c,!0))),md(t.remoteStore,c)}),yield i,yield XT(t,r),function(a){const c=ft(a);c.Oc.forEach((h,m)=>{md(c.remoteStore,m)}),c.Mc.ii(),c.Oc=new Map,c.kc=new hr(vt.comparator)}(t),t.Lc=!1,yield BT(t.remoteStore,!1)}}),Cm.apply(this,arguments)}function XT(n,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,Te.Z)(function*(n,e,t){const r=ft(n),i=[],a=[];for(const c of e){let h;const m=r.Nc.get(c);if(m&&0!==m.length){h=yield Si(r.localStore,Ts(m[0]));for(const E of m){const C=r.Cc.get(E),b=yield kS(r,C);b.snapshot&&a.push(b.snapshot)}}else{const E=yield wT(r.localStore,c);h=yield Si(r.localStore,E),yield Ff(r,FS(E),c,!1)}i.push(h)}return r.Dc.To(a),i}),CE.apply(this,arguments)}function FS(n){return TI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tN(n){const e=ft(n);return ft(ft(e.localStore).persistence).ds()}function eC(n,e,t,r){return bE.apply(this,arguments)}function bE(){return bE=(0,Te.Z)(function*(n,e,t,r){const i=ft(n);if(i.Lc)et("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield IT(i.localStore),c=zg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qo(i,a,c);break}case"rejected":yield cd(i.localStore,e,!0),yd(i,e,r);break;default:Rt()}}),bE.apply(this,arguments)}function LS(n,e,t){return DE.apply(this,arguments)}function DE(){return DE=(0,Te.Z)(function*(n,e,t){const r=tC(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){et("SyncEngine","Adding an already active target "+i);continue}const a=yield wT(r.localStore,i),c=yield Si(r.localStore,a);yield Ff(r,FS(a),c.targetId,!1),Nf(r.remoteStore,c)}for(const i of t)r.Nc.has(i)&&(yield cd(r.localStore,i,!1).then(()=>{md(r.remoteStore,i),yd(r,i)}).catch(Ss))}}),DE.apply(this,arguments)}function tC(n){const e=ft(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GT.bind(null,e),e.Dc.To=aE.bind(null,e.eventManager),e.Dc.qc=WT.bind(null,e.eventManager),e}function nC(n){const e=ft(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MS.bind(null,e),e}class US{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.O=_o(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return Fv(this.persistence,new kv,e.initialUser,this.O)}jc(e){return new CT(Af.bi,this.O)}Gc(e){return new Gv}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VS extends US{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield function _S(n){return dd.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield nC(r.zc.syncEngine),yield Ml(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return Fv(this.persistence,new kv,e.initialUser,this.O)}Qc(e){return new Kx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=em(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new Ov(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RT(),Zr(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Gv}}class BS extends VS{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof am&&(r.sharedClientState.syncEngine={hr:QT.bind(null,i),lr:eC.bind(null,i),dr:LS.bind(null,i),ds:tN.bind(null,i),ar:Uf.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,Te.Z)(function*(c){yield function JT(n,e){return Cm.apply(this,arguments)}(r.zc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Gc(e){const t=RT();if(!am.Vt(t))throw new Ge(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=em(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new am(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class vd{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mE(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YT.bind(null,r.syncEngine),yield BT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iE}createDatastore(e){const t=_o(e.databaseInfo.databaseId),r=new AT(e.databaseInfo);return new IS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>mE(this.syncEngine,h,0),c=qv.Vt()?new qv:new ES,new TS(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,m,E){const C=new NS(r,i,a,c,h,m);return E&&(C.Lc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=ft(t);et("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield gd(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rC(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class iC{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new Xx(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,Te.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ol{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ge(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(a,c){const h=ft(a),m=_f(h.O)+"/documents",E={documents:c.map(k=>mf(h.O,k))},C=yield h.Lr("BatchGetDocuments",m,E),b=new Map;C.forEach(k=>{const W=function WI(n,e){return"found"in e?function(t,r){Yt(!!r.found);const i=go(t,r.found.name),a=Ur(r.found.updateTime),c=new ti({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Yt(!!r.missing),Yt(!!r.readTime);const i=go(t,r.missing),a=Ur(r.readTime);return tr.newNoDocument(i,a)}(n,e):Rt()}(h.O,k);b.set(W.key.toString(),W)});const R=[];return c.forEach(k=>{const W=b.get(k.toString());Yt(!!W),R.push(W)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=vt.fromPath(i);e.mutations.push(new uv(a,e.precondition(a)))}),yield(r=(0,Te.Z)(function*(i,a){const c=ft(i),h=_f(c.O)+"/documents",m={writes:a.map(E=>Jc(c.O,E))};yield c.Mr("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Rt();t=$t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ge(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Rr.updateTime(t):Rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($t.min()))throw new Ge(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rr.updateTime(t)}return Rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sC{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new Kv(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,Te.Z)(function*(){const t=new Ol(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!$o(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!lv(t)}return!1}}class SE{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=dI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(h){et("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(et("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Of(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Dm(n,e){return AE.apply(this,arguments)}function AE(){return AE=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(a){r.isEqual(a)||(yield yT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),AE.apply(this,arguments)}function Sm(n,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ed(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>DS(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>DS(e.remoteStore,a)),n.onlineComponents=e}),Bf.apply(this,arguments)}function Ed(n){return oC.apply(this,arguments)}function oC(){return oC=(0,Te.Z)(function*(n){return n.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),yield Dm(n,new US)),n.offlineComponents}),oC.apply(this,arguments)}function RE(n){return aC.apply(this,arguments)}function aC(){return aC=(0,Te.Z)(function*(n){return n.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),yield Sm(n,new vd)),n.onlineComponents}),aC.apply(this,arguments)}function jS(n){return Ed(n).then(e=>e.persistence)}function Am(n){return Ed(n).then(e=>e.localStore)}function uC(n){return RE(n).then(e=>e.remoteStore)}function xE(n){return RE(n).then(e=>e.syncEngine)}function wd(n){return NE.apply(this,arguments)}function NE(){return NE=(0,Te.Z)(function*(n){const e=yield RE(n),t=e.eventManager;return t.onListen=eN.bind(null,e.syncEngine),t.onUnlisten=rs.bind(null,e.syncEngine),t}),NE.apply(this,arguments)}function hC(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,a,c,h,m){const E=new bm({next:b=>{a.enqueueAndForget(()=>sE(i,C));const R=b.docs.has(c);!R&&b.fromCache?m.reject(new Ge(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&h&&"server"===h.source?m.reject(new Ge(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),C=new ym(bi(c.path),E,{includeMetadataChanges:!0,uc:!0});return tu(i,C)}(yield wd(n),n.asyncQueue,e,t,r)})),r.promise}function ME(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,a,c,h,m){const E=new bm({next:b=>{a.enqueueAndForget(()=>sE(i,C)),b.fromCache&&"server"===h.source?m.reject(new Ge(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),C=new ym(c,E,{includeMetadataChanges:!0,uc:!0});return tu(i,C)}(yield wd(n),n.asyncQueue,e,t,r)})),r.promise}const pC=new Map;function PE(n,e,t){if(!t)throw new Ge(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gC(n,e,t,r){if(!0===e&&!0===r)throw new Ge(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mC(n){if(!vt.isDocumentKey(n))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HS(n){if(vt.isDocumentKey(n))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Rt()}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nm(n);throw new Ge(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _C(n,e){if(e<=0)throw new Ge(Ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yC{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yC({}),this._settingsFrozen=!1,e instanceof pl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ge(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ge(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yC(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new LD;switch(t.type){case"gapi":const r=t.client;return Yt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Rg(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ge(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pC.get(e);t&&(et("ComponentProvider","Removing Datastore"),pC.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class Jo extends pi{constructor(e,t,r){super(e,t,bi(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new vt(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function zS(n,e,...t){if(n=(0,K.m9)(n),PE("collection","path",e),n instanceof jf){const r=Rn.fromString(e,...t);return HS(r),new Jo(n,null,r)}{if(!(n instanceof Qn||n instanceof Jo))throw new Ge(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return HS(r),new Jo(n.firestore,null,r)}}function OE(n,e,...t){if(n=(0,K.m9)(n),1===arguments.length&&(e=dI.R()),PE("doc","path",e),n instanceof jf){const r=Rn.fromString(e,...t);return mC(r),new Qn(n,null,new vt(r))}{if(!(n instanceof Qn||n instanceof Jo))throw new Ge(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return mC(r),new Qn(n.firestore,n instanceof Jo?n.converter:null,new vt(r))}}function GS(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),(n instanceof Qn||n instanceof Jo)&&(e instanceof Qn||e instanceof Jo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vC(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),n instanceof pi&&e instanceof pi&&n.firestore===e.firestore&&yl(n._query,e._query)&&n.converter===e.converter}class sN{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Kv(this,"async_queue_retry"),this.yu=()=>{const t=Zr();t&&et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Zr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Zr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Wr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,Te.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!Dl(t))throw t;et("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,dr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=$T.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&Rt()}verifyOperationInProgress(){}Au(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function EC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class oN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class s extends jf{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new sN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||d(this),this._firestoreClient.terminate()}}function u(n=(0,An.getApp)()){return(0,An._getProvider)(n,"firestore").getImmediate()}function l(n){return n._firestoreClient||d(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function d(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new fI(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new SE(n._authCredentials,n._appCheckCredentials,n._queue,r)}function w(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield Dm(n,t),yield Sm(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===Ee.FAILED_PRECONDITION||a.code===Ee.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function Ye(n){if(n._initialized||n._terminated)throw new Ge(Ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rt{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ge(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ne{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ne(Lr.fromBase64String(e))}catch(t){throw new Ge(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ne(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class At{constructor(e){this._methodName=e}}class hn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vn(this._lat,e._lat)||vn(this._long,e._long)}}const Nn=/^__.*__$/;class ss{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new uf(e,this.data,t,this.fieldTransforms)}}class nu{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class Id{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new Id(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return IC(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Mm(this.Vu)&&Nn.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class kE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||_o(e)}Fu(e,t,r,i=!1){return new Id({Vu:e,methodName:t,$u:r,path:Fr.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Xo(n){const e=n._freezeSettings(),t=_o(n._databaseId);return new kE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Td(n,e,t,r,i,a={}){const c=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);ZS("Data must be an object, but it was:",c,r);const h=lN(r,c);let m,E;if(a.merge)m=new hl(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const b of a.mergeFields){const R=YS(e,b,t);if(!c.contains(R))throw new Ge(Ee.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);dN(C,R)||C.push(R)}m=new hl(C),E=c.fieldTransforms.filter(b=>m.covers(b.field))}else m=null,E=c.fieldTransforms;return new ss(new ti(h),m,E)}class kl extends At{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kl}}function Pm(n,e,t){return new Id({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class $f extends At{_toFieldTransform(e){return new af(e.path,new vl)}isEqual(e){return e instanceof $f}}class FE extends At{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=Pm(this,e,!0),r=this.Bu.map(a=>Hf(a,t)),i=new za(r);return new af(e.path,i)}isEqual(e){return this===e}}class Fk extends At{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=Pm(this,e,!0),r=this.Bu.map(a=>Hf(a,t)),i=new Ga(r);return new af(e.path,i)}isEqual(e){return this===e}}class Lk extends At{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new El(e.O,SI(e.O,this.Lu));return new af(e.path,t)}isEqual(e){return this===e}}function qS(n,e,t,r){const i=n.Fu(1,e,t);ZS("Data must be an object, but it was:",i,r);const a=[],c=ti.empty();$c(r,(m,E)=>{const C=wC(e,m,t);E=(0,K.m9)(E);const b=i.xu(C);if(E instanceof kl)a.push(C);else{const R=Hf(E,b);null!=R&&(a.push(C),c.set(C,R))}});const h=new hl(a);return new nu(c,h,i.fieldTransforms)}function KS(n,e,t,r,i,a){const c=n.Fu(1,e,t),h=[YS(e,r,t)],m=[i];if(a.length%2!=0)throw new Ge(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)h.push(YS(e,a[R])),m.push(a[R+1]);const E=[],C=ti.empty();for(let R=h.length-1;R>=0;--R)if(!dN(E,h[R])){const k=h[R];let W=m[R];W=(0,K.m9)(W);const we=c.xu(k);if(W instanceof kl)E.push(k);else{const Fe=Hf(W,we);null!=Fe&&(E.push(k),C.set(k,Fe))}}const b=new hl(E);return new nu(C,b,c.fieldTransforms)}function uN(n,e,t,r=!1){return Hf(t,n.Fu(r?4:3,e))}function Hf(n,e){if(cN(n=(0,K.m9)(n)))return ZS("Unsupported field value:",e,n),lN(n,e);if(n instanceof At)return function(t,r){if(!Mm(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=Hf(c,r.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,K.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return SI(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=kr.fromDate(t);return{timestampValue:gf(r.O,i)}}if(t instanceof kr){const i=new kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gf(r.O,i)}}if(t instanceof hn)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ne)return{bytesValue:BI(r.O,t._byteString)};if(t instanceof Qn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${Nm(t)}`)}(n,e)}function lN(n,e){const t={};return Ng(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(n,(r,i)=>{const a=Hf(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function cN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kr||n instanceof hn||n instanceof Ne||n instanceof Qn||n instanceof At)}function ZS(n,e,t){if(!cN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Nm(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function YS(n,e,t){if((e=(0,K.m9)(e))instanceof rt)return e._internalPath;if("string"==typeof e)return wC(n,e);throw IC("Field path arguments must be of type string or ",n,!1,void 0,t)}const Uk=new RegExp("[~\\*/\\[\\]]");function wC(n,e,t){if(e.search(Uk)>=0)throw IC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rt(...e.split("."))._internalPath}catch(r){throw IC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function IC(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Ge(Ee.INVALID_ARGUMENT,h+n+m)}function dN(n,e){return n.some(t=>t.isEqual(e))}class LE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Vk extends LE{data(){return super.data()}}function TC(n,e){return"string"==typeof e?wC(n,e):e instanceof rt?e._internalPath:e._delegate._internalPath}class Wf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fl extends LE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new UE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class UE extends Fl{data(e={}){return super.data(e)}}class Cd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new UE(this._firestore,this._userDataWriter,r.key,r,new Wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new UE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new UE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,E=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:Bk(c.type),doc:h,oldIndex:m,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}function hN(n,e){return n instanceof Fl&&e instanceof Fl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cd&&e instanceof Cd&&n._firestore===e._firestore&&vC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function fN(n){if(Li(n)&&0===n.explicitOrderBy.length)throw new Ge(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VE{}function bd(n,...e){for(const t of e)n=t._apply(n);return n}class jk extends VE{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Xo(e.firestore),r=function(i,a,c,h,m,E,C){let b;if(m.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){vN(C,E);const k=[];for(const W of C)k.push(yN(h,i,W));b={arrayValue:{values:k}}}else b=yN(h,i,C)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||vN(C,E),b=uN(c,"where",C,"in"===E||"not-in"===E);const R=hi.create(m,E,b);return function(k,W){if(W.S()){const Fe=jg(k);if(null!==Fe&&!Fe.isEqual(W.field))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${W.field.toString()}'`);const xt=Bg(k);null!==xt&&EN(0,W.field,xt)}const we=function(Fe,xt){for(const Vt of Fe.filters)if(xt.indexOf(Vt.op)>=0)return Vt.op;return null}(k,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==we)throw new Ge(Ee.INVALID_ARGUMENT,we===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${we.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new pi(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Ho(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Hk extends VE{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ge(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ge(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new tf(i,a);return function(h,m){if(null===Bg(h)){const E=jg(h);null!==E&&EN(0,E,m.field)}}(r,c),c}(e._query,this.Uu,this.Gu);return new pi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ho(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pN extends VE{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new pi(e.firestore,e.converter,CI(e._query,this.ju,this.Qu))}}class gN extends VE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=_N(e,this.type,this.Wu,this.zu);return new pi(e.firestore,e.converter,(i=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mN extends VE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=_N(e,this.type,this.Wu,this.zu);return new pi(e.firestore,e.converter,(i=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function _N(n,e,t,r){if(t[0]=(0,K.m9)(t[0]),t[0]instanceof LE)return function(i,a,c,h,m){if(!h)throw new Ge(Ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const C of Zc(i))if(C.field.isKeyField())E.push(Og(a,h.key));else{const b=h.data.field(C.field);if(Gy(b))throw new Ge(Ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===b){const R=C.field.canonicalString();throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}E.push(b)}return new _l(E,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Xo(n.firestore);return function(a,c,h,m,E,C){const b=a.explicitOrderBy;if(E.length>b.length)throw new Ge(Ee.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let k=0;k<E.length;k++){const W=E[k];if(b[k].field.isKeyField()){if("string"!=typeof W)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof W}`);if(!ev(a)&&-1!==W.indexOf("/"))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${W}' contains a slash.`);const we=a.path.child(Rn.fromString(W));if(!vt.isDocumentKey(we))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Fe=new vt(we);R.push(Og(c,Fe))}else{const we=uN(h,m,W);R.push(we)}}return new _l(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yN(n,e,t){if("string"==typeof(t=(0,K.m9)(t))){if(""===t)throw new Ge(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ev(e)&&-1!==t.indexOf("/"))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!vt.isDocumentKey(r))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Og(n,new vt(r))}if(t instanceof Qn)return Og(n,t._key);throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(t)}.`)}function vN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function EN(n,e,t){if(!t.isEqual(e))throw new Ge(Ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QS{convertValue(e,t="none"){switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rt()}}convertObject(e,t){const r={};return $c(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new hn(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);Yt(XD(r));const i=new pl(r.get(1),r.get(3)),a=new vt(r.popFirst(5));return i.isEqual(t)||dr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function CC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qk extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ne(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class wN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xo(e)}set(e,t,r){this._verifyNotCommitted();const i=Dd(e,this._firestore),a=CC(i.converter,t,r),c=Td(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Rr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Dd(e,this._firestore);let c;return c="string"==typeof(t=(0,K.m9)(t))||t instanceof rt?KS(this._dataReader,"WriteBatch.update",a._key,t,r,i):qS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dd(e,this._firestore);return this._mutations=this._mutations.concat(new lf(t._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dd(n,e){if((n=(0,K.m9)(n)).firestore!==e)throw new Ge(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zf extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ne(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function IN(n,e,t){n=Tn(n,Qn);const r=Tn(n.firestore,s),i=CC(n.converter,e,t);return Om(r,[Td(Xo(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rr.none())])}function TN(n,e,t,...r){n=Tn(n,Qn);const i=Tn(n.firestore,s),a=Xo(i);let c;return c="string"==typeof(e=(0,K.m9)(e))||e instanceof rt?KS(a,"updateDoc",n._key,e,t,r):qS(a,"updateDoc",n._key,e),Om(i,[c.toMutation(n._key,Rr.exists(!0))])}function CN(n,...e){var t,r,i;n=(0,K.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||EC(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(EC(e[c])){const b=e[c];e[c]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[c+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[c+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let m,E,C;if(n instanceof Qn)E=Tn(n.firestore,s),C=bi(n._key.path),m={next:b=>{e[c]&&e[c](JS(E,n,b))},error:e[c+1],complete:e[c+2]};else{const b=Tn(n,pi);E=Tn(b.firestore,s),C=b._query;const R=new zf(E);m={next:k=>{e[c]&&e[c](new Cd(E,R,b,k))},error:e[c+1],complete:e[c+2]},fN(n._query)}return function(b,R,k,W){const we=new bm(W),Fe=new ym(R,we,k);return b.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return tu(yield wd(b),Fe)})),()=>{we.Jc(),b.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return sE(yield wd(b),Fe)}))}}(l(E),C,h,m)}function Om(n,e){return function(t,r){const i=new Wr;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function pE(n,e,t){return gE.apply(this,arguments)}(yield xE(t),r,i)})),i.promise}(l(n),e)}function JS(n,e,t){const r=t.docs.get(e._key),i=new zf(n);return new Fl(n,i,e._key,r,new Wf(t.hasPendingWrites,t.fromCache),e.converter)}class a1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xo(e)}get(e){const t=Dd(e,this._firestore),r=new Qk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Rt();const a=i[0];if(a.isFoundDocument())return new LE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new LE(this._firestore,r,t._key,null,t.converter);throw Rt()})}set(e,t,r){const i=Dd(e,this._firestore),a=CC(i.converter,t,r),c=Td(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Dd(e,this._firestore);let c;return c="string"==typeof(t=(0,K.m9)(t))||t instanceof rt?KS(this._dataReader,"Transaction.update",a._key,t,r,i):qS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Dd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dd(e,this._firestore),r=new zf(this._firestore);return super.get(e).then(i=>new Fl(this._firestore,r,t._key,i._document,new Wf(!1,!1),t.converter))}}function XS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function DN(){if("undefined"==typeof Uint8Array)throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function SN(){if(!function zy(){return"undefined"!=typeof atob}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ul=An.SDK_VERSION,(0,An._registerComponent)(new Ma.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new s(i,new UD(t.getProvider("auth-internal")),new cI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,An.registerVersion)($y,"3.4.5",n),(0,An.registerVersion)($y,"3.4.5","esm2017")}();class BE{constructor(e){this._delegate=e}static fromBase64String(e){return SN(),new BE(Ne.fromBase64String(e))}static fromUint8Array(e){return DN(),new BE(Ne.fromUint8Array(e))}toBase64(){return SN(),this._delegate.toBase64()}toUint8Array(){return DN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(n){return function m1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _1{enableIndexedDbPersistence(e,t){return function f(n,e){Ye(n=Tn(n,s));const t=l(n),r=n._freezeSettings(),i=new vd;return w(t,i,new VS(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function y(n){Ye(n=Tn(n,s));const e=l(n),t=n._freezeSettings(),r=new vd;return w(e,r,new BS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function T(n){if(n._initialized&&!n._terminated)throw new Ge(Ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!ns.Vt())return Promise.resolve();const i=r+"main";yield ns.delete(i)}),function(r){return t.apply(this,arguments)})(em(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof pl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ll("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function WS(n,e,t,r={}){var i;const a=(n=Tn(n,jf))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ll("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=ei.MOCK_USER;else{c=(0,K.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ge(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ei(m)}n._authCredentials=new aI(new cl(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function A(n){return function lC(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield jS(n),t=yield uC(n);return e.setNetworkEnabled(!0),function(r){const i=ft(r);return i.Ko.delete(0),pd(i)}(t)}))}(l(n=Tn(n,s)))}(this._delegate)}disableNetwork(){return function P(n){return function cC(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield jS(n),t=yield uC(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const a=ft(i);a.Ko.add(0),yield gd(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(l(n=Tn(n,s)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function D(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function vE(n,e){return is.apply(this,arguments)}(yield xE(e),t)})),t.promise}(l(n=Tn(n,s)))}(this._delegate)}onSnapshotsInSync(e){return function o1(n,e){return function Rm(n,e){const t=new bm(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield wd(n),i=t,ft(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield wd(n),i=t,void ft(r).Zo.delete(i);var r,i}))}}(l(n=Tn(n,s)),EC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new km(this,zS(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new yo(this,OE(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function iN(n,e){if(n=Tn(n,jf),PE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ge(Ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pi(n,null,(t=e,new Ho(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function u1(n,e){return function rN(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const r=yield(i=n,RE(i).then(a=>a.datastore));var i;new sC(n.asyncQueue,r,e,t).run()})),t.promise}(l(n=Tn(n,s)),t=>e(new a1(n,t)))}(this._delegate,t=>e(new RN(this,t)))}batch(){return l(this._delegate),new xN(new wN(this._delegate,e=>Om(this._delegate,e)))}loadBundle(e){return function ee(n,e){const t=l(n=Tn(n,s)),r=new oN;return function fC(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,E){if(m instanceof Uint8Array)return rC(m,E);if(m instanceof ArrayBuffer)return rC(new Uint8Array(m),E);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new iC(m,c);var m}(t,_o(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function nN(n,e,t){const r=ft(n);var i;(i=(0,Te.Z)(function*(a,c,h){try{const m=yield c.getMetadata();if(yield function(R,k){const W=ft(R),we=Ur(k.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",Fe=>W.Kn.getBundleMetadata(Fe,k.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(we)>=0)}(a.localStore,m))return yield c.close(),void h._completeWith((R=m,{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}));h._updateProgress(lE(m));const E=new vm(m,a.localStore,c.O);let C=yield c.Kc();for(;C;){const R=yield E.lc(C);R&&h._updateProgress(R),C=yield c.Kc()}const b=yield E.complete();yield Qo(a,b.ws,void 0),yield function(R,k){const W=ft(R);return W.persistence.runTransaction("Save bundle","readwrite",we=>W.Kn.saveBundleMetadata(we,k))}(a.localStore,m),h._completeWith(b.progress)}catch(m){ll("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m)}var R}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield xE(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Se(n,e){return function xm(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=ft(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield Am(n),e)}))}(l(n=Tn(n,s)),e).then(t=>t?new pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class bC extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new BE(new Ne(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yo.forKey(t,this.firestore,null)}}class RN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}get(e){const t=qf(e);return this._delegate.get(t).then(r=>new jE(this._firestore,new Fl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=qf(e);return r?(XS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=qf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=qf(e);return this._delegate.delete(t),this}}class xN{constructor(e){this._delegate=e}set(e,t,r){const i=qf(e);return r?(XS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=qf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=qf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new UE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $E(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Gf(e,new bC(e),t),i.set(t,a)),a}}Gf.INSTANCES=new WeakMap;class yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yo(t,new Qn(t._delegate,r,new vt(e)))}static forKey(e,t,r){return new yo(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new km(this.firestore,zS(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,K.m9)(e))instanceof Qn&&GS(this._delegate,e)}set(e,t){t=XS("DocumentReference.set",t);try{return t?IN(this._delegate,e,t):IN(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TN(this._delegate,e):TN(this._delegate,e,t,...r)}catch(i){throw os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function i1(n){return Om(Tn(n.firestore,s),[new lf(n._key,Rr.none())])}(this._delegate)}onSnapshot(...e){const t=NN(e),r=MN(e,i=>new jE(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Xk(n){n=Tn(n,Qn);const e=Tn(n.firestore,s),t=l(e),r=new zf(e);return function dC(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,a,c){try{const h=yield function(m,E){const C=ft(m);return C.persistence.runTransaction("read document","readonly",b=>C.Us.ys(b,E))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ge(Ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Of(h,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield Am(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Fl(e,r,n._key,i,new Wf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function e1(n){n=Tn(n,Qn);const e=Tn(n.firestore,s);return hC(l(e),n._key,{source:"server"}).then(t=>JS(e,n,t))}(this._delegate):function Jk(n){n=Tn(n,Qn);const e=Tn(n.firestore,s);return hC(l(e),n._key).then(t=>JS(e,n,t))}(this._delegate),t.then(r=>new jE(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new yo(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function NN(n){for(const e of n)if("object"==typeof e&&!eA(e))return e;return{}}function MN(n,e){var t,r;let i;return i=eA(n[0])?n[0]:eA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hN(this._delegate,e._delegate)}}class $E extends jE{data(e){const t=this._delegate.data(e);return function $x(n,e){n||Rt()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}where(e,t,r){try{return new as(this.firestore,bd(this._delegate,function $k(n,e,t){const r=e,i=TC("where",n);return new jk(i,r,t)}(e,t,r)))}catch(i){throw os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,bd(this._delegate,function Wk(n,e="asc"){const t=e,r=TC("orderBy",n);return new Hk(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,bd(this._delegate,function zk(n){return _C("limit",n),new pN("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,bd(this._delegate,function Gk(n){return _C("limitToLast",n),new pN("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,bd(this._delegate,function qk(...n){return new gN("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,bd(this._delegate,function Kk(...n){return new gN("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,bd(this._delegate,function Zk(...n){return new mN("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,bd(this._delegate,function Yk(...n){return new mN("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return vC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function n1(n){n=Tn(n,pi);const e=Tn(n.firestore,s),t=l(e),r=new zf(e);return function $S(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,a,c){try{const h=yield Xa(i,a,!0),m=new RS(a,h.Ks),E=m.Ic(h.documents),C=m.applyChanges(E,!1);c.resolve(C.snapshot)}catch(h){const m=Of(h,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield Am(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Cd(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function r1(n){n=Tn(n,pi);const e=Tn(n.firestore,s),t=l(e),r=new zf(e);return ME(t,n._query,{source:"server"}).then(i=>new Cd(e,r,n,i))}(this._delegate):function t1(n){n=Tn(n,pi);const e=Tn(n.firestore,s),t=l(e),r=new zf(e);return fN(n._query),ME(t,n._query).then(i=>new Cd(e,r,n,i))}(this._delegate),t.then(r=>new tA(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NN(e),r=MN(e,i=>new tA(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CN(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}class v1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $E(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $E(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new v1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $E(this._firestore,r))})}isEqual(e){return hN(this._delegate,e._delegate)}}class km extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yo(this.firestore,e):null}doc(e){try{return new yo(this.firestore,void 0===e?OE(this._delegate):OE(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function s1(n,e){const t=Tn(n.firestore,s),r=OE(n),i=CC(n.converter,e);return Om(t,[Td(Xo(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new yo(this.firestore,t))}isEqual(e){return GS(this._delegate,e._delegate)}withConverter(e){return new km(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function qf(n){return Tn(n,Qn)}class nA{constructor(...e){this._delegate=new rt(...e)}static documentId(){return new nA(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,K.m9)(e))instanceof rt&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c1(){return new $f("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kf(e)}static delete(){const e=function l1(){return new kl("deleteField")}();return e._methodName="FieldValue.delete",new Kf(e)}static arrayUnion(...e){const t=function d1(...n){return new FE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kf(t)}static arrayRemove(...e){const t=function h1(...n){return new Fk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kf(t)}static increment(e){const t=function f1(n){return new Lk("increment",n)}(e);return t._methodName="FieldValue.increment",new Kf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const E1={Firestore:AN,GeoPoint:hn,Timestamp:kr,Blob:BE,Transaction:RN,WriteBatch:xN,DocumentReference:yo,DocumentSnapshot:jE,Query:as,QueryDocumentSnapshot:$E,QuerySnapshot:tA,CollectionReference:km,FieldPath:nA,FieldValue:Kf,setLogLevel:function y1(n){!function jx(n){Ha.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function I1(n){(function w1(n,e){n.INTERNAL.registerComponent(new Ma.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},E1)))})(n,(e,t)=>new AN(e,t,new _1)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(lD.Z);var T1=x(6451),DC=x(5363),C1=x(6063);class b1 extends zi.x{constructor(e=1/0,t=1/0,r=C1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)h=m;h&&r.splice(0,h+1)}}}var D1=x(3099);function PN(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,D1.B)({connector:()=>new b1(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function ON(n,e){return(0,Us.m)(e)?Dr(()=>n,e):Dr(()=>n)}var rA=x(9468),Ai=x(5867);class Js{constructor(e){return e}}class ru{constructor(){return(0,Ai.C6)()}}const iA=new _.OlP("angularfire2._apps"),A1={provide:Js,useFactory:function S1(n){return n&&1===n.length?n[0]:new Js((0,Ai.Mq)())},deps:[[new _.FiY,iA]]},R1={provide:ru,deps:[[new _.FiY,iA]]};function x1(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Js(r)}}let N1=(()=>{class n{constructor(t){(0,Ai.KN)("angularfire",lt.q4.full,"core"),(0,Ai.KN)("angularfire",lt.q4.full,"app"),(0,Ai.KN)("angular",_.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.Lbi))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[A1,R1]}),n})();const P1=(0,lt.u3)(Ai.ZF,!0),kN=new Map,O1={activated:!1,tokenObservers:[]},k1={initialized:!1,enabled:!1};function gi(n){return kN.get(n)||O1}function ea(n,e){kN.set(n,e)}function SC(){return k1}class B1{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new K.BH,yield function j1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new K.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new K.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LN(n){if(!gi(n).activated)throw us.create("use-before-activation",{appName:n.name})}function aA(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(b){throw us.create("fetch-network-error",{originalErrorMessage:b.message})}if(200!==c.status)throw us.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(b){throw us.create("fetch-parse-error",{originalErrorMessage:b.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const E=1e3*Number(m[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+E,issuedAtTimeMillis:C}}),uA.apply(this,arguments)}function G1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const HE="firebase-app-check-store";let xC=null;function VN(){return xC||(xC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(us.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(HE,{keyPath:"compositeKey"})}}catch(t){e(us.create("storage-open",{originalErrorMessage:t.message}))}}),xC)}function lA(){return lA=(0,Te.Z)(function*(n,e){const r=(yield VN()).transaction(HE,"readwrite"),a=r.objectStore(HE).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var E;h(us.create("storage-set",{originalErrorMessage:null===(E=m.target.error)||void 0===E?void 0:E.message}))}})}),lA.apply(this,arguments)}const WE=new cr.Yd("@firebase/app-check");function HN(n,e){return(0,K.hl)()?function Y1(n,e){return function BN(n,e){return lA.apply(this,arguments)}(function $N(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{WE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WN(){return SC().enabled}function zN(){return fA.apply(this,arguments)}function fA(){return fA=(0,Te.Z)(function*(){const n=SC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),fA.apply(this,arguments)}const nF={error:"UNKNOWN_ERROR"};function rF(n){return K.US.encodeString(JSON.stringify(n),!1)}function NC(n){return pA.apply(this,arguments)}function pA(){return pA=(0,Te.Z)(function*(n,e=!1){const t=n.app;LN(t);const r=gi(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&MC(m)&&(i=m)}if(!e&&i&&MC(i))return{token:i.token};let h,c=!1;if(WN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aA(G1(t,yield zN()),n.platformLoggerProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const m=yield r.exchangeTokenPromise;return yield HN(t,m),ea(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?WE.warn(m.message):WE.error(m),a=m}return i?(h={token:i.token},ea(t,Object.assign(Object.assign({},r),{token:i})),yield HN(t,i)):h=sF(a),c&&qN(t,h),h}),pA.apply(this,arguments)}function mA(n,e){const t=gi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ea(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function GN(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function iF(n){const{app:e}=n;return new B1((0,Te.Z)(function*(){let r;if(r=gi(e).token?yield NC(n,!0):yield NC(n),r.error)throw r.error}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ea(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qN(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function MC(n){return n.expireTimeMillis-Date.now()>0}function sF(n){return{token:rF(nF),error:n}}class oF{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)mA(this.app,t.next);return Promise.resolve()}}const tM="app-check-internal";!function EF(){(0,An._registerComponent)(new Ma.wA("app-check",n=>function aF(n,e){return new oF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tM).initialize()})),(0,An._registerComponent)(new Ma.wA(tM,n=>function uF(n){return{getToken:e=>NC(n,e),addTokenListener:e=>function gA(n,e,t,r){const{app:i}=n,a=gi(i),c={next:t,error:r,type:e};if(ea(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&MC(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),GN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>GN(n))}(n,"INTERNAL",e),removeTokenListener:e=>mA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,An.registerVersion)("@firebase/app-check","0.5.3")}();class Sd{constructor(){return(0,lt.vb)("app-check")}}"undefined"!=typeof window&&window;var bF=x(127);const rM=new _.OlP("angularfire2.auth.use-emulator"),iM=new _.OlP("angularfire2.auth.settings"),sM=new _.OlP("angularfire2.auth.tenant-id"),oM=new _.OlP("angularfire2.auth.langugage-code"),aM=new _.OlP("angularfire2.auth.use-device-language"),uM=new _.OlP("angularfire.auth.persistence"),lM=(n,e,t,r,i,a,c,h)=>(0,fo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[E,C]of Object.entries(c))m.settings[E]=C;return h&&m.setPersistence(h),m},[t,r,i,a,c,h]);let wA=(()=>{class n{constructor(t,r,i,a,c,h,m,E,C,b,R,k){const W=new zi.x,we=Ot(void 0).pipe((0,DC.Q)(c.outsideAngular),Dr(()=>a.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,5881)))),(0,rn.U)(()=>(0,fo.on)(t,a,r)),(0,rn.U)(Fe=>lM(Fe,a,h,E,C,b,m,R)),PN({bufferSize:1,refCount:!1}));if(yu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ot(null);else{we.pipe(Ea()).subscribe();const xt=we.pipe(Dr(Nt=>Nt.getRedirectResult().then(Pn=>Pn,()=>null)),lt.iC,PN({bufferSize:1,refCount:!1})),Vt=we.pipe(Dr(Nt=>new ai.y(Pn=>({unsubscribe:a.runOutsideAngular(()=>Nt.onAuthStateChanged(vi=>Pn.next(vi),vi=>Pn.error(vi),()=>Pn.complete()))})))),Jt=we.pipe(Dr(Nt=>new ai.y(Pn=>({unsubscribe:a.runOutsideAngular(()=>Nt.onIdTokenChanged(vi=>Pn.next(vi),vi=>Pn.error(vi),()=>Pn.complete()))}))));this.authState=xt.pipe(ON(Vt),(0,rA.R)(c.outsideAngular),(0,DC.Q)(c.insideAngular)),this.user=xt.pipe(ON(Jt),(0,rA.R)(c.outsideAngular),(0,DC.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dr(Nt=>Nt?(0,_r.D)(Nt.getIdToken()):Ot(null))),this.idTokenResult=this.user.pipe(Dr(Nt=>Nt?(0,_r.D)(Nt.getIdTokenResult()):Ot(null))),this.credential=(0,T1.T)(xt,W,this.authState.pipe(Br(Nt=>!Nt))).pipe((0,rn.U)(Nt=>(null==Nt?void 0:Nt.user)?Nt:null),(0,rA.R)(c.outsideAngular),(0,DC.Q)(c.insideAngular))}return(0,fo.pX)(this,we,a,{spy:{apply:(Fe,xt,Vt)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&Vt.then(Jt=>W.next(Jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(fo.Dh),_.LFG(fo.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(lt.HU),_.LFG(rM,8),_.LFG(iM,8),_.LFG(sM,8),_.LFG(oM,8),_.LFG(aM,8),_.LFG(uM,8),_.LFG(Sd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function cM(n,e){return function SF(n,e=aD.z){return new ai.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function IA(n,e){return cM(n,e).pipe((0,rn.U)(t=>({payload:t,type:"query"})))}function OC(n,e){return IA(n,e).pipe(xo(void 0),Dh(),(0,rn.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const m=i.find(C=>C.doc.ref.isEqual(c.ref)),E=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function dM(n,e,t){return OC(n,t).pipe(Ii((r,i)=>function RF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Qp(),(0,rn.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function TA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function hM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=OC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rn.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xo(void 0),Dh(),Br(([r,i])=>i.length>0||!r),(0,rn.U)(([r,i])=>i),lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hM(e);return dM(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),lt.iC)}get(e){return(0,_r.D)(this.query.get(e)).pipe(lt.iC)}add(e){return this.ref.add(e)}doc(e){return new pM(this.ref.doc(e),this.afs)}}class pM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=_M(r,t);return new fM(i,a,this.afs)}snapshotChanges(){return function AF(n,e){return cM(n,e).pipe(xo(void 0),Dh(),(0,rn.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_r.D)(this.ref.get(e)).pipe(lt.iC)}}class NF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?OC(this.query,this.afs.schedulers.outsideAngular).pipe((0,rn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Br(t=>t.length>0),lt.iC):OC(this.query,this.afs.schedulers.outsideAngular).pipe(lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hM(e);return dM(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rn.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),lt.iC)}get(e){return(0,_r.D)(this.query.get(e)).pipe(lt.iC)}}const gM=new _.OlP("angularfire2.enableFirestorePersistence"),mM=new _.OlP("angularfire2.firestore.persistenceSettings"),MF=new _.OlP("angularfire2.firestore.settings"),PF=new _.OlP("angularfire2.firestore.use-emulator");function _M(n,e=(t=>t)){return{query:e(n),ref:n}}let yM=(()=>{class n{constructor(t,r,i,a,c,h,m,E,C,b,R,k,W,we,Fe,xt,Vt){this.schedulers=m;const Jt=(0,fo.on)(t,h,r),Nt=C;b&&lM(Jt,h,R,W,we,Fe,k,xt),[this.firestore,this.persistenceEnabled$]=(0,fo.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const Pn=h.runOutsideAngular(()=>Jt.firestore());if(a&&Pn.settings(a),Nt&&Pn.useEmulator(...Nt),i&&!yu(c)){const vi=()=>{try{return(0,_r.D)(Pn.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Vd){return"undefined"!=typeof console&&console.warn(Vd),Ot(!1)}};return[Pn,h.runOutsideAngular(vi)]}return[Pn,Ot(!1)]},[a,Nt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=_M(i,r),h=this.schedulers.ngZone.run(()=>a);return new fM(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new NF(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new pM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(fo.Dh),_.LFG(fo.xv,8),_.LFG(gM,8),_.LFG(MF,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(lt.HU),_.LFG(mM,8),_.LFG(PF,8),_.LFG(wA,8),_.LFG(rM,8),_.LFG(iM,8),_.LFG(sM,8),_.LFG(oM,8),_.LFG(aM,8),_.LFG(uM,8),_.LFG(Sd,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OF=(()=>{class n{constructor(){bF.Z.registerVersion("angularfire",lt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gM,useValue:!0},{provide:mM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[yM]}),n})(),vM=(()=>{class n{constructor(t){this.afs=t,this.title="angularProyect"}ngOnInit(){this.users$=this.afs.collection("users").valueChanges().pipe((0,Ro.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(yM))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:5,template:function(t,r){1&t&&(_.TgZ(0,"section"),_._uU(1),_.ALo(2,"json"),_.ALo(3,"async"),_.qZA()),2&t&&(_.xp6(1),_.hij(" ",_.lcZ(2,1,_.lcZ(3,3,r.users$)),"\n"))},styles:[""]}),n})();const CA_firebase={projectId:"funko-shop-web",appId:"1:447159317091:web:f6b94f0382704862efbe56",storageBucket:"funko-shop-web.appspot.com",apiKey:"AIzaSyAMAWSwl7mFV62H-CYx8vvTPHBb5VEttYs",authDomain:"funko-shop-web.firebaseapp.com",messagingSenderId:"447159317091",measurementId:"G-CRV70K0K81"};var bA=x(6148),EM=x(4929);function FF(n){return new ai.y(function(e){return{unsubscribe:(0,EM.t)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class kC{constructor(e){return e}}class zE{constructor(){return(0,lt.vb)("auth")}}const DA=new _.OlP("angularfire2.auth-instances");function VF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kC(r)}}const BF={provide:zE,deps:[[new _.FiY,DA]]},jF={provide:kC,useFactory:function UF(n,e){const t=(0,lt.JM)("auth",n,e);return t&&new kC(t)},deps:[[new _.FiY,DA],Js]};let $F=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[jF,BF]}),n})();const WF=(0,lt.u3)(FF,!0),zF=(0,lt.u3)(EM.n,!0);class GE{constructor(e){return e}}const IM="analytics",TM=lt.nk.async,qF=(0,lt.u3)(bA.IH,!0),KF=(0,lt.u3)(bA.Kz,!0),ZF=(0,lt.u3)(bA.Iv,!0);let SA=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,Ai.KN)("angularfire",lt.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(c=>{a=c})),TM().then(()=>{const c=i.get(GE);c?this.disposables=[WF(t).subscribe(h=>{ZF(c,null==h?void 0:h.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(kC),_.LFG(_.R0b),_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const CM="firebase_screen_id",AA="outlet",qE="screen_class",bM="screen_name";let aL=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const RA={},uL=n=>{const e=[n[qE],n[AA]].join("#");if(RA.hasOwnProperty(e))return RA[e];{const t=aL++;return RA[e]=t,t}};let DM=(()=>{class n{constructor(t,r,i,a,c,h){(0,Ai.KN)("angularfire",lt.q4.full,"screen-tracking"),TM().then(()=>{const m=h.get(GE);!t||!m||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Br(i=>i instanceof Ap)).pipe(Dr(i=>{var a;const h=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,k=>k.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",m=n.routerState.root.children.map(k=>k).find(k=>k.outlet===i.snapshot.outlet);if(!m)return Ot(null);let E=m;for(;E.firstChild;)E=E.firstChild;const C=E.pathFromRoot.map(k=>{var W;return null===(W=k.routeConfig)||void 0===W?void 0:W.path}).filter(k=>k).join("/")||"/",b={[bM]:C,page_path:`/${h}`,firebase_event_origin:"auto",firebase_screen:C,[AA]:i.snapshot.outlet};e&&(b.page_title=e.getTitle());let R=m.component;if(R){if(R===Cc){let k=i.snapshot;for(;k.firstChild;)k=k.firstChild;R=k.component}}else R=i.snapshot.component;if("string"==typeof R)return Ot(Object.assign(Object.assign({},b),{[qE]:R}));if(R){const k=t.resolveComponentFactory(R);return Ot(Object.assign(Object.assign({},b),{[qE]:k.selector}))}return Ot(null)}),Br(i=>!!i),(0,rn.U)(i=>Object.assign({firebase_screen_class:i[qE],[CM]:uL(i)},i)),function kF(n,e,t,r){return(0,Yr.e)((i,a)=>{let c;e&&"function"!=typeof e?({duration:t,element:c,connector:r}=e):c=e;const h=new Map,m=W=>{h.forEach(W),W(a)},E=W=>m(we=>we.error(W));let C=0,b=!1;const R=new ur.Q(a,W=>{try{const we=n(W);let Fe=h.get(we);if(!Fe){h.set(we,Fe=r?r():new zi.x);const xt=function k(W,we){const Fe=new ai.y(xt=>{C++;const Vt=we.subscribe(xt);return()=>{Vt.unsubscribe(),0==--C&&b&&R.unsubscribe()}});return Fe.key=W,Fe}(we,Fe);if(a.next(xt),t){const Vt=(0,ur.x)(Fe,()=>{Fe.complete(),null==Vt||Vt.unsubscribe()},void 0,void 0,()=>h.delete(we));R.add((0,ah.Xf)(t(xt)).subscribe(Vt))}}Fe.next(c?c(W):W)}catch(we){E(we)}},()=>m(W=>W.complete()),E,()=>h.clear(),()=>(b=!0,0===C));i.subscribe(R)})}(i=>i[AA]),(0,yr.z)(i=>i.pipe(Qp((a,c)=>JSON.stringify(a)===JSON.stringify(c)),xo(void 0),Dh(),(0,rn.U)(([a,c])=>a?Object.assign({firebase_previous_class:a[qE],firebase_previous_screen:a[bM],firebase_previous_id:a[CM]},c):c)))))(t,r,i).pipe(Dr(E=>(0,wp.mG)(this,void 0,void 0,function*(){return c&&(yield c.initialized),KF(m,"screen_view",E)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Pi,8),_.LFG(bu,8),_.LFG(_._Vd),_.LFG(_.R0b),_.LFG(SA,8),_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const xA=new _.OlP("angularfire2.analytics-instances");function dL(n){return(e,t)=>{if(!lt.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new GE(r)}}const hL={provide:class GF{constructor(){return(0,lt.vb)(IM)}},deps:[[new _.FiY,xA]]},fL={provide:GE,useFactory:function cL(n,e){if(!lt.nk.sync())return null;const t=(0,lt.JM)(IM,n,e);return t&&new GE(t)},deps:[[new _.FiY,xA],Js]};let pL=(()=>{class n{constructor(t,r){(0,Ai.KN)("angularfire",lt.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(DM,8),_.LFG(SA,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[fL,hL,{provide:_.ip1,useValue:lt.nk.async,multi:!0}]}),n})();const SM="@firebase/database";let NA="";class _L{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,K.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,K.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,K.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const RM=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _L(e)}}catch(e){}return new yL},Zf=RM("localStorage"),MA=RM("sessionStorage"),Fm=new cr.Yd("@firebase/database"),xM=function(){let n=1;return function(){return n++}}(),NM=function(n){const e=(0,K.dS)(n),t=new K.gQ;t.update(e);const r=t.digest();return K.US.encodeByteArray(r)},KE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=KE.apply(null,r):e+="object"==typeof r?(0,K.Pz)(r):r,e+=" "}return e};let Yf=null,MM=!0;const mi=function(...n){if(!0===MM&&(MM=!1,null===Yf&&!0===MA.get("logging_enabled")&&function(n,e){(0,K.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Fm.logLevel=cr.in.VERBOSE,Yf=Fm.log.bind(Fm),e&&MA.set("logging_enabled",!0)):"function"==typeof n?Yf=n:(Yf=null,MA.remove("logging_enabled"))}(!0)),Yf){const e=KE.apply(null,n);Yf(e)}},ZE=function(n){return function(...e){mi(n,...e)}},PA=function(...n){const e="FIREBASE INTERNAL ERROR: "+KE(...n);Fm.error(e)},iu=function(...n){const e=`FIREBASE FATAL ERROR: ${KE(...n)}`;throw Fm.error(e),new Error(e)},ls=function(...n){const e="FIREBASE WARNING: "+KE(...n);Fm.warn(e)},FC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ll="[MIN_NAME]",su="[MAX_NAME]",Qf=function(n,e){if(n===e)return 0;if(n===Ll||e===su)return-1;if(e===Ll||n===su)return 1;{const t=LC(n),r=LC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wL=function(n,e){return n===e?0:n<e?-1:1},YE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,K.Pz)(e))},OA=function(n){if("object"!=typeof n||null===n)return(0,K.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,K.Pz)(e[r]),t+=":",t+=OA(n[e[r]]);return t+="}",t},OM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const kM=function(n){(0,K.hu)(!FC(n),"Invalid JSON number");const r=1023;let i,a,c,h,m;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(m=52;m;m-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const C=E.join("");let b="";for(m=0;m<64;m+=8){let R=parseInt(C.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),b+=R}return b.toLowerCase()},bL=new RegExp("^-?(0*)\\d{1,10}$"),LC=function(n){if(bL.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Lm=function(n){try{n()}catch(e){setTimeout(()=>{throw ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},QE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class SL{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class AL{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(e)}}let JE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HM="websocket",WM="long_polling";class LA{constructor(e,t,r,i,a=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zM(n,e,t){let r;if((0,K.hu)("string"==typeof e,"typeof type must == string"),(0,K.hu)("object"==typeof t,"typeof params must == object"),e===HM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==WM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function xL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return _i(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class NL{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,K.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,K.p$)(this.counters_)}}const UA={},VA={};function BA(n){const e=n.toString();return UA[e]||(UA[e]=new NL),UA[e]}class PL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Um{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ZE(e),this.stats_=BA(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),zM(t,WM,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,K.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jA((...a)=>{const[c,h,m,E,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Um.forceAllow_=!0}static forceDisallow(){Um.forceDisallow_=!0}static isAvailable(){return!((0,K.Yr)()||!Um.forceAllow_&&(Um.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,K.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,K.h$)(t),i=OM(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,K.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,K.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class jA{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=xM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=jA.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){mi("frame writing exception"),h.stack&&mi(h.stack),mi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,K.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let XE=null;"undefined"!=typeof MozWebSocket?XE=MozWebSocket:"undefined"!=typeof WebSocket&&(XE=WebSocket);let e0=(()=>{class n{constructor(t,r,i,a,c,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ZE(this.connId),this.stats_=BA(r),this.connURL=n.connectionURL_(r,h,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,K.Yr)()&&"undefined"!=typeof location&&location.hostname&&jM.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),zM(t,HM,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zf.set("previous_websocket_failure",!0);try{if((0,K.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${NA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new XE(this.connURL,[],a)}else this.mySock=new XE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==XE&&!n.forceDisallow_}static previouslyFailed(){return Zf.isInMemoryStorage||!0===Zf.get("previous_websocket_failure")}markConnectionHealthy(){Zf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,K.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,K.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=OM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class $A{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Um,e0]}initTransports_(e){const t=e0&&e0.isAvailable();let r=t&&!e0.previouslyFailed();if(e.webSocketOnly&&(t||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[e0];else{const i=this.transports_=[];for(const a of $A.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class iP{constructor(e,t,r,i,a,c,h,m,E,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=m,this.onKill_=E,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ZE("c:"+this.id+":"),this.transportManager_=new $A(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=QE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=YE("t",e),r=YE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=YE("t",e),r=YE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=YE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?PA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),QE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):QE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class oP{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,K.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,K.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class VC extends oP{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,K.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new VC}getInitialEvent(e){return(0,K.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Ln("")}function gn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ad(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ln(n.pieces_,e)}function WA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function t0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ln(e,0)}function gr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ln)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ln(t,0)}function mn(n){return n.pieceNum_>=n.pieces_.length}function cs(n,e){const t=gn(n),r=gn(e);if(null===t)return e;if(t===r)return cs(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function zA(n,e){if(Ad(n)!==Ad(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ad(n)>Ad(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class nU{constructor(e,t){this.errorPrefix_=t,this.parts_=t0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,K.ug)(this.parts_[r]);cP(this)}}function cP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jf(n))}function Jf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class GA extends oP{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new GA}getInitialEvent(e){return(0,K.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const n0=1e3;let jC,Xf=(()=>{class n extends sP{constructor(t,r,i,a,c,h,m,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=ZE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=n0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&VC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,K.Pz)(c)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new K.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||a!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const E=m.d,C=m.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,K.r3)(t,"w")){const i=(0,K.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,K.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,K.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,K.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):PA("Unrecognized action received from server: "+(0,K.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=n0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,E=null;const C=function(){E?E.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(k){(0,K.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(k)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,W]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?mi("getToken() completed but was canceled"):(mi("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=W&&W.token,E=new iP(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,we=>{ls(we+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(k){t.log_("Failed to get token: "+k),m||(t.repoInfo_.nodeAdmin&&ls(k),C())}}})()}interrupt(t){mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=n0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>OA(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Ln(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,K.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+NA.replace(/\./g,"-")]=1,(0,K.uI)()?t["framework.cordova"]=1:(0,K.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=VC.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class En{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new En(e,t)}}class BC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new En(Ll,e),i=new En(Ll,t);return 0!==this.compare(r,i)}minPost(){return En.MIN}}class fP extends BC{static get __EMPTY_NODE(){return jC}static set __EMPTY_NODE(e){jC=e}compare(e,t){return Qf(e.name,t.name)}isDefinedOn(e){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return En.MIN}maxPost(){return new En(su,jC)}makePost(e,t){return(0,K.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new En(e,jC)}toString(){return".key"}}const ou=new fP;class $C{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let KA,ta=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:As.EMPTY_NODE,this.right=null!=c?c:As.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return As.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return As.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class As{constructor(e,t=As.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new As(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ta.BLACK,null,null))}remove(e){return new As(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ta.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $C(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $C(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $C(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $C(this.root_,null,this.comparator_,!0,e)}}function dU(n,e){return Qf(n.name,e.name)}function qA(n,e){return Qf(n,e)}As.EMPTY_NODE=new class cU{copy(e,t,r,i,a){return this}insert(e,t,r){return new ta(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pP=function(n){return"number"==typeof n?"number:"+kM(n):"string:"+n},gP=function(n){if(n.isLeafNode()){const e=n.val();(0,K.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,K.r3)(e,".sv"),"Priority must be a string or number.")}else(0,K.hu)(n===KA||n.isEmpty(),"priority of unexpected type.");(0,K.hu)(n===KA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mP,_P,yP,Vm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gP(this.priorityNode_)}static set __childrenNodeConstructor(t){mP=t}static get __childrenNodeConstructor(){return mP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mn(t)?this:".priority"===gn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=gn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,K.hu)(".priority"!==i||1===Ad(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?kM(this.value_):this.value_,this.lazyHash_=NM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,K.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,K.hu)(a>=0,"Unknown leaf type: "+r),(0,K.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class gU extends BC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Qf(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return En.MIN}maxPost(){return new En(su,new Vm("[PRIORITY-POST]",yP))}makePost(e,t){const r=_P(e);return new En(t,new Vm("[PRIORITY-POST]",r))}toString(){return".priority"}},mU=Math.log(2);class _U{constructor(e){this.count=parseInt(Math.log(e+1)/mU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HC=function(n,e,t,r){n.sort(e);const i=function(m,E){const C=E-m;let b,R;if(0===C)return null;if(1===C)return b=n[m],R=t?t(b):b,new ta(R,b.node,ta.BLACK,null,null);{const k=parseInt(C/2,10)+m,W=i(m,k),we=i(k+1,E);return b=n[k],R=t?t(b):b,new ta(R,b.node,ta.BLACK,W,we)}},h=function(m){let E=null,C=null,b=n.length;const R=function(W,we){const Fe=b-W,xt=b;b-=W;const Vt=i(Fe+1,xt),Jt=n[Fe],Nt=t?t(Jt):Jt;k(new ta(Nt,Jt.node,we,null,Vt))},k=function(W){E?(E.left=W,E=W):(C=W,E=W)};for(let W=0;W<m.count;++W){const we=m.nextBitIsOne(),Fe=Math.pow(2,m.count-(W+1));we?R(Fe,ta.BLACK):(R(Fe,ta.BLACK),R(Fe,ta.RED))}return C}(new _U(n.length));return new As(r||e,h)};let ZA;const Bm={};class Ul{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,K.hu)(Bm&&nr,"ChildrenNode.ts has not been loaded"),ZA=ZA||new Ul({".priority":Bm},{".priority":nr}),ZA}get(e){const t=(0,K.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null}hasIndex(e){return(0,K.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,K.hu)(e!==ou,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(En.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?HC(r,e.getCompare()):Bm;const m=e.toString(),E=Object.assign({},this.indexSet_);E[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Ul(C,E)}addToIndexes(e,t){const r=(0,K.UI)(this.indexes_,(i,a)=>{const c=(0,K.DV)(this.indexSet_,a);if((0,K.hu)(c,"Missing index implementation for "+a),i===Bm){if(c.isDefinedOn(e.node)){const h=[],m=t.getIterator(En.Wrap);let E=m.getNext();for(;E;)E.name!==e.name&&h.push(E),E=m.getNext();return h.push(e),HC(h,c.getCompare())}return Bm}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new En(e.name,h))),m.insert(e,e.node)}});return new Ul(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,K.UI)(this.indexes_,i=>{if(i===Bm)return i;{const a=t.get(e.name);return a?i.remove(new En(e.name,a)):i}});return new Ul(r,this.indexSet_)}}let r0,cn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gP(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return r0||(r0=new n(new As(qA),null,Ul.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||r0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?r0:r}}getChild(t){const r=gn(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,K.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new En(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?r0:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=gn(t);if(null===i)return r;{(0,K.hu)(".priority"!==gn(t)||1===Ad(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(nr,(h,m)=>{r[h]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pP(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":NM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new En(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new En(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new En(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,En.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,En.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===s0?-1:0}withIndex(t){if(t===ou||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ou||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),a=r.getIterator(nr);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===ou?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const s0=new class yU extends cn{constructor(){super(new As(qA),cn.EMPTY_NODE,Ul.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return cn.EMPTY_NODE}isEmpty(){return!1}};function Ir(n,e=null){if(null===n)return cn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,K.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Vm(n,Ir(e));if(n instanceof Array){let t=cn.EMPTY_NODE;return _i(n,(r,i)=>{if((0,K.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ir(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ir(e))}{const t=[];let r=!1;if(_i(n,(c,h)=>{if("."!==c.substring(0,1)){const m=Ir(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new En(c,m)))}}),0===t.length)return cn.EMPTY_NODE;const a=HC(t,dU,c=>c.name,qA);if(r){const c=HC(t,nr.getCompare());return new cn(a,Ir(e),new Ul({".priority":c},{".priority":nr}))}return new cn(a,Ir(e),Ul.Default)}}Object.defineProperties(En,{MIN:{value:new En(Ll,cn.EMPTY_NODE)},MAX:{value:new En(su,s0)}}),fP.__EMPTY_NODE=cn.EMPTY_NODE,Vm.__childrenNodeConstructor=cn,function hU(n){KA=n}(s0),function pU(n){yP=n}(s0),function fU(n){_P=n}(Ir);class YA extends BC{constructor(e){super(),this.indexPath_=e,(0,K.hu)(!mn(e)&&".priority"!==gn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Qf(e.name,t.name):a}makePost(e,t){const r=Ir(e),i=cn.EMPTY_NODE.updateChild(this.indexPath_,r);return new En(t,i)}maxPost(){const e=cn.EMPTY_NODE.updateChild(this.indexPath_,s0);return new En(su,e)}toString(){return t0(this.indexPath_,0).join("/")}}const QA=new class EU extends BC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Qf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return En.MIN}maxPost(){return En.MAX}makePost(e,t){const r=Ir(e);return new En(t,r)}toString(){return".value"}};function a0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class eR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:su}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new eR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CP(n){const e={};if(n.isDefault())return e;let t;return n.index_===nr?t="$priority":n.index_===QA?t="$value":n.index_===ou?t="$key":((0,K.hu)(n.index_ instanceof YA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,K.Pz)(t),n.startSet_&&(e.startAt=(0,K.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,K.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,K.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,K.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class zC extends sP{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ZE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,K.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=zC.getListenId_(e,r),h={};this.listens_[c]=h;const m=CP(e._queryParams);this.restRequest_(a+".json",m,(E,C)=>{let b=C;if(404===E&&(b=null,E=null),null===E&&this.onDataUpdate_(a,b,!1,r),(0,K.DV)(this.listens_,c)===h){let R;R=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(R,null)}})}unlisten(e,t){const r=zC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=CP(e._queryParams),r=e._path.toString(),i=new K.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,K.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,K.cI)(h.responseText)}catch(E){ls("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ls("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class RU{constructor(){this.rootNode_=cn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function GC(){return{value:null,children:new Map}}function Hm(n,e,t){if(mn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=gn(e);n.children.has(r)||n.children.set(r,GC()),Hm(n.children.get(r),e=Jn(e),t)}}function iR(n,e,t){null!==n.value?t(e,n.value):function xU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{iR(i,new Ln(e.toString()+"/"+r),t)})}class NU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&_i(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class OU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NU(e);const r=1e4+2e4*Math.random();QE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;_i(e,(i,a)=>{a>0&&(0,K.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),QE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Eo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Eo||(Eo={})),Eo))();function aR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Eo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mn(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ln(e));return new qC(Mn(),t,this.revert)}}return(0,K.hu)(gn(this.path)===e,"operationForChild called for unrelated child."),new qC(Jn(this.path),this.affectedTree,this.revert)}}class ep{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Eo.OVERWRITE}operationForChild(e){return mn(this.path)?new ep(this.source,Mn(),this.snap.getImmediateChild(e)):new ep(this.source,Jn(this.path),this.snap)}}class Wm{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Eo.MERGE}operationForChild(e){if(mn(this.path)){const t=this.children.subtree(new Ln(e));return t.isEmpty()?null:t.value?new ep(this.source,Mn(),t.value):new Wm(this.source,Mn(),t)}return(0,K.hu)(gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wm(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mn(e))return this.isFullyInitialized()&&!this.filtered_;const t=gn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function c0(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,m)=>function UU(n,e,t){if(null==e.childName||null==t.childName)throw(0,K.g5)("Should only compare child_ events.");const r=new En(e.childName,e.snapshotNode),i=new En(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),c.forEach(h=>{const m=function LU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(E=>{E.respondsTo(h.type)&&e.push(E.createEvent(m,n.query_))})})}function KC(n,e){return{eventCache:n,serverCache:e}}function d0(n,e,t,r){return KC(new Rd(e,t,r),n.serverCache)}function SP(n,e,t,r){return KC(n.eventCache,new Rd(e,t,r))}function ZC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let uR;class rr{constructor(e,t=(()=>(uR||(uR=new As(wL)),uR))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return _i(e,(r,i)=>{t=t.set(new Ln(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(mn(e))return null;{const r=gn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:gr(new Ln(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mn(e))return this;{const t=gn(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new rr(null)}}set(e,t){if(mn(e))return new rr(t,this.children);{const r=gn(e),a=(this.children.get(r)||new rr(null)).set(Jn(e),t),c=this.children.insert(r,a);return new rr(this.value,c)}}remove(e){if(mn(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=gn(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new rr(null):new rr(this.value,a)}return this}}get(e){if(mn(e))return this.value;{const t=gn(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(mn(e))return t;{const r=gn(e),a=(this.children.get(r)||new rr(null)).setTree(Jn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new rr(this.value,c)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(gr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(mn(e))return null;{const a=gn(e),c=this.children.get(a);return c?c.findOnPath_(Jn(e),gr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(mn(e))return this;{this.value&&r(t,this.value);const i=gn(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),gr(t,i),r):new rr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class na{constructor(e){this.writeTree_=e}static empty(){return new na(new rr(null))}}function h0(n,e,t){if(mn(e))return new na(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=cs(i,e);return a=a.updateChild(c,t),new na(n.writeTree_.set(i,a))}{const i=new rr(t),a=n.writeTree_.setTree(e,i);return new na(a)}}}function lR(n,e,t){let r=n;return _i(t,(i,a)=>{r=h0(r,gr(e,i),a)}),r}function AP(n,e){if(mn(e))return na.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new na(t)}}function cR(n,e){return null!=np(n,e)}function np(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(cs(t.path,e)):null}function RP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new En(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new En(r,i.value))}),e}function xd(n,e){if(mn(e))return n;{const t=np(n,e);return new na(null!=t?new rr(t):n.writeTree_.subtree(e))}}function dR(n){return n.writeTree_.isEmpty()}function zm(n,e){return xP(Mn(),n.writeTree_,e)}function xP(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,K.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=xP(gr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gr(n,".priority"),r)),t}}function YC(n,e){return kP(e,n)}function WU(n,e){if(n.snap)return vo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vo(gr(n.path,t),e))return!0;return!1}function GU(n){return n.visible}function NP(n,e,t){let r=na.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)vo(t,c)?(h=cs(t,c),r=h0(r,h,a.snap)):vo(c,t)&&(h=cs(c,t),r=h0(r,Mn(),a.snap.getChild(h)));else{if(!a.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(vo(t,c))h=cs(t,c),r=lR(r,h,a.children);else if(vo(c,t))if(h=cs(c,t),mn(h))r=lR(r,Mn(),a.children);else{const m=(0,K.DV)(a.children,gn(h));if(m){const E=m.getChild(Jn(h));r=h0(r,Mn(),E)}}}}}return r}function MP(n,e,t,r,i){if(r||i){const a=xd(n.visibleWrites,e);return!i&&dR(a)?t:i||null!=t||cR(a,Mn())?zm(NP(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(vo(E.path,e)||vo(e,E.path))},e),t||cn.EMPTY_NODE):null}{const a=np(n.visibleWrites,e);if(null!=a)return a;{const c=xd(n.visibleWrites,e);return dR(c)?t:null!=t||cR(c,Mn())?zm(c,t||cn.EMPTY_NODE):null}}}function QC(n,e,t,r){return MP(n.writeTree,n.treePath,e,t,r)}function hR(n,e){return function qU(n,e,t){let r=cn.EMPTY_NODE;const i=np(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=xd(n.visibleWrites,e);return t.forEachChild(nr,(c,h)=>{const m=zm(xd(a,new Ln(c)),h);r=r.updateImmediateChild(c,m)}),RP(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return RP(xd(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function PP(n,e,t,r){return function KU(n,e,t,r,i){(0,K.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=gr(e,t);if(cR(n.visibleWrites,a))return null;{const c=xd(n.visibleWrites,a);return dR(c)?i.getChild(t):zm(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function JC(n,e){return function YU(n,e){return np(n.visibleWrites,e)}(n.writeTree,gr(n.treePath,e))}function fR(n,e,t){return function ZU(n,e,t,r){const i=gr(e,t),a=np(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?zm(xd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function OP(n,e){return kP(gr(n.treePath,e),n.writeTree)}function kP(n,e){return{treePath:n,writeTree:e}}class eV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,K.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,a0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function o0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function $m(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,K.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,a0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const FP=new class tV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class pR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Rd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tp(this.viewCache_),a=function XU(n,e,t,r,i,a){return function QU(n,e,t,r,i,a,c){let h;const m=xd(n.visibleWrites,e),E=np(m,Mn());if(null!=E)h=E;else{if(null==t)return[];h=zm(m,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],b=c.getCompare(),R=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let k=R.getNext();for(;k&&C.length<i;)0!==b(k,r)&&C.push(k),k=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function LP(n,e,t,r,i,a){const c=e.eventCache;if(null!=JC(r,t))return e;{let h,m;if(mn(t))if((0,K.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=tp(e),b=hR(r,E instanceof cn?E:cn.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),b,a)}else{const E=QC(r,tp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=gn(t);if(".priority"===E){(0,K.hu)(1===Ad(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const b=PP(r,t,C,m);h=null!=b?n.filter.updatePriority(C,b):c.getNode()}else{const C=Jn(t);let b;if(c.isCompleteForChild(E)){m=e.serverCache.getNode();const R=PP(r,t,c.getNode(),m);b=null!=R?c.getNode().getImmediateChild(E).updateChild(C,R):c.getNode().getImmediateChild(E)}else b=fR(r,E,e.serverCache);h=null!=b?n.filter.updateChild(c.getNode(),E,b,C,i,a):c.getNode()}}return d0(e,h,c.isFullyInitialized()||mn(t),n.filter.filtersNodes())}}function XC(n,e,t,r,i,a,c,h){const m=e.serverCache;let E;const C=c?n.filter:n.filter.getIndexedFilter();if(mn(t))E=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const k=m.getNode().updateChild(t,r);E=C.updateFullNode(m.getNode(),k,null)}else{const k=gn(t);if(!m.isCompleteForPath(t)&&Ad(t)>1)return e;const W=Jn(t),Fe=m.getNode().getImmediateChild(k).updateChild(W,r);E=".priority"===k?C.updatePriority(m.getNode(),Fe):C.updateChild(m.getNode(),k,Fe,W,FP,null)}const b=SP(e,E,m.isFullyInitialized()||mn(t),C.filtersNodes());return LP(n,b,t,i,new pR(i,b,a),h)}function gR(n,e,t,r,i,a,c){const h=e.eventCache;let m,E;const C=new pR(i,e,a);if(mn(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=d0(e,E,!0,n.filter.filtersNodes());else{const b=gn(t);if(".priority"===b)E=n.filter.updatePriority(e.eventCache.getNode(),r),m=d0(e,E,h.isFullyInitialized(),h.isFiltered());else{const R=Jn(t),k=h.getNode().getImmediateChild(b);let W;if(mn(R))W=r;else{const we=C.getCompleteChild(b);W=null!=we?".priority"===WA(R)&&we.getChild(lP(R)).isEmpty()?we:we.updateChild(R,r):cn.EMPTY_NODE}m=k.equals(W)?e:d0(e,n.filter.updateChild(h.getNode(),b,W,R,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function UP(n,e){return n.eventCache.isCompleteForChild(e)}function VP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mR(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,m=e;E=mn(t)?r:new rr(null).setTree(t,r);const C=e.serverCache.getNode();return E.children.inorderTraversal((b,R)=>{if(C.hasChild(b)){const W=VP(0,e.serverCache.getNode().getImmediateChild(b),R);m=XC(n,m,new Ln(b),W,i,a,c,h)}}),E.children.inorderTraversal((b,R)=>{const k=!e.serverCache.isCompleteForChild(b)&&void 0===R.value;if(!C.hasChild(b)&&!k){const we=VP(0,e.serverCache.getNode().getImmediateChild(b),R);m=XC(n,m,new Ln(b),we,i,a,c,h)}}),m}function fV(n,e){const t=tp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!mn(e)&&!t.getImmediateChild(gn(e)).isEmpty())?t.getChild(e):null}function $P(n,e,t,r){e.type===Eo.MERGE&&null!==e.source.queryId&&((0,K.hu)(tp(n.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)(ZC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function iV(n,e,t,r,i){const a=new eV;let c,h;if(t.type===Eo.OVERWRITE){const E=t;E.source.fromUser?c=gR(n,e,E.path,E.snap,r,i,a):((0,K.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered()&&!mn(E.path),c=XC(n,e,E.path,E.snap,r,i,h,a))}else if(t.type===Eo.MERGE){const E=t;E.source.fromUser?c=function oV(n,e,t,r,i,a,c){let h=e;return r.foreach((m,E)=>{const C=gr(t,m);UP(e,gn(C))&&(h=gR(n,h,C,E,i,a,c))}),r.foreach((m,E)=>{const C=gr(t,m);UP(e,gn(C))||(h=gR(n,h,C,E,i,a,c))}),h}(n,e,E.path,E.children,r,i,a):((0,K.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered(),c=mR(n,e,E.path,E.children,r,i,h,a))}else if(t.type===Eo.ACK_USER_WRITE){const E=t;c=E.revert?function lV(n,e,t,r,i,a){let c;if(null!=JC(r,t))return e;{const h=new pR(r,e,i),m=e.eventCache.getNode();let E;if(mn(t)||".priority"===gn(t)){let C;if(e.serverCache.isFullyInitialized())C=QC(r,tp(e));else{const b=e.serverCache.getNode();(0,K.hu)(b instanceof cn,"serverChildren would be complete if leaf node"),C=hR(r,b)}C=C,E=n.filter.updateFullNode(m,C,a)}else{const C=gn(t);let b=fR(r,C,e.serverCache);null==b&&e.serverCache.isCompleteForChild(C)&&(b=m.getImmediateChild(C)),E=null!=b?n.filter.updateChild(m,C,b,Jn(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,cn.EMPTY_NODE,Jn(t),h,a):m,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=QC(r,tp(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=JC(r,Mn()),d0(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function aV(n,e,t,r,i,a,c){if(null!=JC(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(mn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return XC(n,e,t,m.getNode().getChild(t),i,a,h,c);if(mn(t)){let E=new rr(null);return m.getNode().forEachChild(ou,(C,b)=>{E=E.set(new Ln(C),b)}),mR(n,e,t,E,i,a,h,c)}return e}{let E=new rr(null);return r.foreach((C,b)=>{const R=gr(t,C);m.isCompleteForPath(R)&&(E=E.set(C,m.getNode().getChild(R)))}),mR(n,e,t,E,i,a,h,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Eo.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+t.type);c=function uV(n,e,t,r,i){const a=e.serverCache;return LP(n,SP(e,a.getNode(),a.isFullyInitialized()||mn(t),a.isFiltered()),t,r,FP,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function sV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ZC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function TP(n){return{type:"value",snapshotNode:n}}(ZC(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function rV(n,e){(0,K.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,K.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function HP(n,e,t,r){return function FU(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function IU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),c0(n,i,"child_removed",e,r,t),c0(n,i,"child_added",e,r,t),c0(n,i,"child_moved",a,r,t),c0(n,i,"child_changed",e,r,t),c0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let eb,nb;function _R(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,K.hu)(null!=a,"SyncTree gave us an op for an invalid query."),$P(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat($P(c,e,t,r));return a}}function Nd(n,e){let t=null;for(const r of n.views.values())t=t||fV(r,e);return t}class ZP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function JU(){return{visibleWrites:na.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yR(n,e,t,r,i){return function BU(n,e,t,r,i){(0,K.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=h0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Gm(n,new ep({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Pd(n,e,t=!1){const r=function $U(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function HU(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,K.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&WU(h,r.path)?i=!1:vo(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function zU(n){n.visibleWrites=NP(n.allWrites,GU,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=AP(n.visibleWrites,r.path):_i(r.children,m=>{n.visibleWrites=AP(n.visibleWrites,gr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new rr(null);return null!=r.snap?a=a.set(Mn(),!0):_i(r.children,c=>{a=a.set(new Ln(c),!0)}),Gm(n,new qC(r.path,a,t))}return[]}function f0(n,e,t){return Gm(n,new ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rb(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const E=Nd(h,cs(c,e));if(E)return E});return MP(i,e,a,t,!0)}function Gm(n,e){return QP(e,n.syncPointTree_,null,YC(n.pendingWriteTree_,Mn()))}function QP(n,e,t,r){if(mn(n.path))return JP(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=Nd(i,Mn()));let a=[];const c=gn(n.path),h=n.operationForChild(c),m=e.children.get(c);if(m&&h){const E=t?t.getImmediateChild(c):null,C=OP(r,c);a=a.concat(QP(h,m,E,C))}return i&&(a=a.concat(_R(i,n,r,t))),a}}function JP(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=Nd(i,Mn()));let a=[];return e.children.inorderTraversal((c,h)=>{const m=t?t.getImmediateChild(c):null,E=OP(r,c),C=n.operationForChild(c);C&&(a=a.concat(JP(C,h,m,E)))}),i&&(a=a.concat(_R(i,n,r,t))),a}function ER(n,e){return n.tagToQueryMap.get(e)}function wR(n){const e=n.indexOf("$");return(0,K.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ln(n.substr(0,e))}}function IR(n,e,t){const r=n.syncPointTree_.get(e);return(0,K.hu)(r,"Missing sync point for query tag that we're tracking"),_R(r,t,YC(n.pendingWriteTree_,e),null)}class TR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new TR(t)}node(){return this.node_}}class CR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gr(this.path_,e);return new CR(this.syncTree_,t)}node(){return rb(this.syncTree_,this.path_)}}const eO=function(n,e,t){return n&&"object"==typeof n?((0,K.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?FV(n[".sv"],e,t):"object"==typeof n[".sv"]?LV(n[".sv"],e):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},FV=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,K.hu)(!1,"Unexpected server value: "+n)},LV=function(n,e,t){n.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,K.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,K.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},bR=function(n,e,t){return DR(n,new TR(e),t)};function DR(n,e,t){const r=n.getPriority().val(),i=eO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=eO(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Vm(h,Ir(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Vm(i))),c.forEachChild(nr,(h,m)=>{const E=DR(m,e.getImmediateChild(h),t);E!==m&&(a=a.updateImmediateChild(h,E))}),a}}class SR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ob(n,e){let t=e instanceof Ln?e:new Ln(e),r=n,i=gn(t);for(;null!==i;){const a=(0,K.DV)(r.node.children,i)||{children:{},childCount:0};r=new SR(i,r,a),t=Jn(t),i=gn(t)}return r}function rp(n){return n.node.value}function AR(n,e){n.node.value=e,RR(n)}function nO(n){return n.node.childCount>0}function ab(n,e){_i(n.node.children,(t,r)=>{e(new SR(t,n,r))})}function rO(n,e,t,r){t&&!r&&e(n),ab(n,i=>{rO(i,e,!0,r)}),t&&r&&e(n)}function g0(n){return new Ln(null===n.parent?n.name:g0(n.parent)+"/"+n.name)}function RR(n){null!==n.parent&&function BV(n,e,t){const r=function UV(n){return void 0===rp(n)&&!nO(n)}(t),i=(0,K.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,RR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,RR(n))}(n.parent,n.name,n)}const jV=/[\[\].#$\/\u0000-\u001F\u007F]/,$V=/[\[\].#$\u0000-\u001F\u007F]/,xR=10485760,ub=function(n){return"string"==typeof n&&0!==n.length&&!jV.test(n)},_0=function(n,e,t){const r=t instanceof Ln?new nU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Jf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Jf(r)+" with contents = "+e.toString());if(FC(e))throw new Error(n+"contains "+e.toString()+" "+Jf(r));if("string"==typeof e&&e.length>xR/3&&(0,K.ug)(e)>xR)throw new Error(n+"contains a string greater than "+xR+" utf8 bytes "+Jf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(_i(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!ub(c)))throw new Error(n+" contains an invalid key ("+c+") "+Jf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function rU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,K.ug)(e),cP(n)})(r,c),_0(n,h,r),function iU(n){const e=n.parts_.pop();n.byteLength_-=(0,K.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Jf(r)+" in addition to actual children.")}},oO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ub(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!$V.test(n)}(n)}(t))throw new Error((0,K.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wo(n,e,t){(function lb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!zA(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function aO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(qV(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>vo(r,e)||vo(e,r))}function qV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Yf&&mi("event: "+t.toString()),Lm(r)}}}class ZV{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GC(),this.transactionQueueTree_=new SR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lO(n){const t=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function v0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:lO(n)})}function cO(n,e,t,r,i){n.dataUpdateCount++;const a=new Ln(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,K.UI)(t,E=>Ir(E));c=function RV(n,e,t,r){const i=ER(n,r);if(i){const a=wR(i),c=a.path,h=a.queryId,m=cs(c,e),E=rr.fromObject(t);return IR(n,c,new Wm(aR(h),m,E))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Ir(t);c=function AV(n,e,t,r){const i=ER(n,r);if(null!=i){const a=wR(i),c=a.path,h=a.queryId,m=cs(c,e);return IR(n,c,new ep(aR(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,K.UI)(t,E=>Ir(E));c=function bV(n,e,t){const r=rr.fromObject(t);return Gm(n,new Wm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Ir(t);c=f0(n.serverSyncTree_,a,m)}let h=a;c.length>0&&(h=Km(n,a)),wo(n.eventQueue_,h,c)}function dO(n,e){OR(n,"connected",e),!1===e&&function eB(n){qm(n,"onDisconnectEvents");const e=v0(n),t=GC();iR(n.onDisconnect_,Mn(),(i,a)=>{const c=function(n,e,t,r){return DR(e,new CR(t,n),r)}(i,a,n.serverSyncTree_,e);Hm(t,i,c)});let r=[];iR(t,Mn(),(i,a)=>{r=r.concat(f0(n.serverSyncTree_,i,a));const c=function UR(n,e){const t=g0(pO(n,e)),r=ob(n.transactionQueueTree_,e);return function VV(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{VR(n,i)}),VR(n,r),rO(r,i=>{VR(n,i)}),t}(n,i);Km(n,c)}),n.onDisconnect_=GC(),wo(n.eventQueue_,Mn(),r)}(n)}function OR(n,e,t){const r=new Ln("/.info/"+e),i=Ir(t);n.infoData_.updateSnapshot(r,i);const a=f0(n.infoSyncTree_,r,i);wo(n.eventQueue_,r,a)}function cb(n){return n.nextWriteId_++}function qm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mi(t,...e)}function LR(n,e,t){return rb(n.serverSyncTree_,e,t)||cn.EMPTY_NODE}function db(n,e=n.transactionQueueTree_){if(e||hb(n,e),rp(e)){const t=gO(n,e);(0,K.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aB(n,e,t){const r=t.map(E=>E.currentWriteId),i=LR(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const C=t[E];(0,K.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const b=cs(e,C.path);a=a.updateChild(b,C.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,E=>{qm(n,"transaction put response",{path:m.toString(),status:E});let C=[];if("ok"===E){const b=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(Pd(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&b.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();hb(n,ob(n.transactionQueueTree_,e)),db(n,n.transactionQueueTree_),wo(n.eventQueue_,e,C);for(let R=0;R<b.length;R++)Lm(b[R])}else{if("datastale"===E)for(let b=0;b<t.length;b++)t[b].status=3===t[b].status?4:0;else{ls("transaction at "+m.toString()+" failed: "+E);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=E}Km(n,e)}},c)}(n,g0(e),t)}else nO(e)&&ab(e,t=>{db(n,t)})}function Km(n,e){const t=pO(n,e),r=g0(t);return function uB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],E=cs(t,m.path);let b,C=!1;if((0,K.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,b=m.abortReason,i=i.concat(Pd(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,b="maxretry",i=i.concat(Pd(n.serverSyncTree_,m.currentWriteId,!0));else{const R=LR(n,m.path,c);m.currentInputSnapshot=R;const k=e[h].update(R.val());if(void 0!==k){_0("transaction failed: Data returned ",k,m.path);let W=Ir(k);"object"==typeof k&&null!=k&&(0,K.r3)(k,".priority")||(W=W.updatePriority(R.getPriority()));const Fe=m.currentWriteId,xt=v0(n),Vt=bR(W,R,xt);m.currentOutputSnapshotRaw=W,m.currentOutputSnapshotResolved=Vt,m.currentWriteId=cb(n),c.splice(c.indexOf(Fe),1),i=i.concat(yR(n.serverSyncTree_,m.path,Vt,m.currentWriteId,m.applyLocally)),i=i.concat(Pd(n.serverSyncTree_,Fe,!0))}else C=!0,b="nodata",i=i.concat(Pd(n.serverSyncTree_,m.currentWriteId,!0))}wo(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===b?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(b),!1,null)))}hb(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Lm(r[h]);db(n,n.transactionQueueTree_)}(n,gO(n,t),r),r}function pO(n,e){let t,r=n.transactionQueueTree_;for(t=gn(e);null!==t&&void 0===rp(r);)r=ob(r,t),t=gn(e=Jn(e));return r}function gO(n,e){const t=[];return mO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mO(n,e,t){const r=rp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ab(e,i=>{mO(n,i,t)})}function hb(n,e){const t=rp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,AR(e,t.length>0?t:void 0)}ab(e,r=>{hb(n,r)})}function VR(n,e){const t=rp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,K.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,K.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Pd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?AR(e,void 0):t.length=a+1,wo(n.eventQueue_,g0(e),i);for(let c=0;c<r.length;c++)Lm(r[c])}}const BR=function(n,e){const t=dB(n),r=t.namespace;return"firebase.com"===t.domain&&iu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&iu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new LA(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Ln(t.pathString)}},dB=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",m=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(h=n.substring(0,E-1),n=n.substring(E+2));let C=n.indexOf("/");-1===C&&(C=n.length);let b=n.indexOf("?");-1===b&&(b=n.length),e=n.substring(0,Math.min(C,b)),C<b&&(i=function lB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,b)));const R=function cB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,b)));E=e.indexOf(":"),E>=0?(c="https"===h||"wss"===h,m=parseInt(e.substring(E+1),10)):E=e.length;const k=e.slice(0,E);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}};class Xs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return mn(this._path)?null:WA(this._path)}get ref(){return new ra(this._repo,this._path)}get _queryIdentifier(){const e=bP(this._queryParams),t=OA(e);return"{}"===t?"default":t}get _queryObject(){return bP(this._queryParams)}isEqual(e){if(!((e=(0,K.m9)(e))instanceof Xs))return!1;const t=this._repo===e._repo,r=zA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function eU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ra extends Xs{constructor(e,t){super(e,t,new eR,!1)}get parent(){const e=lP(this._path);return null===e?null:new ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function mV(n){(0,K.hu)(!eb,"__referenceConstructor has already been defined"),eb=n})(ra),function wV(n){(0,K.hu)(!nb,"__referenceConstructor has already been defined"),nb=n}(ra);const jR={};class xB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function YV(n,e,t){if(n.stats_=BA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new zC(n.repoInfo_,(r,i,a,c)=>{cO(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dO(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Xf(n.repoInfo_,e,(r,i,a,c)=>{cO(n,r,i,a,c)},r=>{dO(n,r)},r=>{!function QV(n,e){_i(e,(t,r)=>{OR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ML(n,e){const t=n.toString();return VA[t]||(VA[t]=e()),VA[t]}(n.repoInfo_,()=>new OU(n.stats_,n.server_)),n.infoData_=new RU,n.infoSyncTree_=new ZP({startListening:(r,i,a,c)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=f0(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),OR(n,"connected",!1),n.serverSyncTree_=new ZP({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,m)=>{const E=c(h,m);wo(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ra(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function SB(n,e){const t=jR[e];(!t||t[n.key]!==n)&&iu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function fO(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&iu("Cannot call "+e+" on a deleted database.")}}function NB(n=(0,An.getApp)(),e){return(0,An._getProvider)(n,"database").getImmediate({identifier:e})}Xf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Xf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function MB(n){(function mL(n){NA=n})(An.SDK_VERSION),(0,An._registerComponent)(new Ma.wA("database",(e,{instanceIdentifier:t})=>function DB(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||iu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,E,c=BR(a,i),h=c.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(m=!0,a=`http://${E}?ns=${h.namespace}`,c=BR(a,i),h=c.repoInfo):m=!c.repoInfo.secure;const C=i&&m?new JE(JE.OWNER):new AL(n.name,n.options,e);oO("Invalid Firebase Database URL",c),mn(c.path)||iu("Database URL must point to the root of a Firebase Database (not including a child path).");const b=function AB(n,e,t,r){let i=jR[e.name];i||(i={},jR[e.name]=i);let a=i[n.toURLString()];return a&&iu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new ZV(n,!1,t,r),i[n.toURLString()]=a,a}(h,n,C,new SL(n.name,t));return new xB(b,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,An.registerVersion)(SM,"0.12.5",n),(0,An.registerVersion)(SM,"0.12.5","esm2017")}();class $R{constructor(e){return e}}const CO="database",HR=new _.OlP("angularfire2.database-instances");function LB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $R(r)}}const UB={provide:class kB{constructor(){return(0,lt.vb)(CO)}},deps:[[new _.FiY,HR]]},VB={provide:$R,useFactory:function FB(n,e){const t=(0,lt.JM)(CO,n,e);return t&&new $R(t)},deps:[[new _.FiY,HR],Js]};let BB=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[VB,UB]}),n})();const $B=(0,lt.u3)(NB,!0);class WR{constructor(e){return e}}const bO="firestore",zR=new _.OlP("angularfire2.firestore-instances");function zB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new WR(r)}}const GB={provide:class HB{constructor(){return(0,lt.vb)(bO)}},deps:[[new _.FiY,zR]]},qB={provide:WR,useFactory:function WB(n,e){const t=(0,lt.JM)(bO,n,e);return t&&new WR(t)},deps:[[new _.FiY,zR],Js]};let KB=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[qB,GB]}),n})();const YB=(0,lt.u3)(u,!0),qR="functions";class t2{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,Te.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Te.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const KR="us-central1";class r2{constructor(e,t,r,i,a=KR,c){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new t2(t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin,this.region=KR}catch(h){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const AO="@firebase/functions";function h2(n=(0,An.getApp)(),e=KR){return(0,An._getProvider)((0,K.m9)(n),qR).getImmediate({identifier:e})}!function d2(n,e){(0,An._registerComponent)(new Ma.wA(qR,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),h=r.getProvider("messaging-internal"),m=r.getProvider("app-check-internal");return new r2(a,c,h,m,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,An.registerVersion)(AO,"0.7.8",e),(0,An.registerVersion)(AO,"0.7.8","esm2017")}(fetch.bind(self));class QR{constructor(e){return e}}const xO="functions",JR=new _.OlP("angularfire2.functions-instances");function g2(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new QR(r)}}const m2={provide:class f2{constructor(){return(0,lt.vb)(xO)}},deps:[[new _.FiY,JR]]},_2={provide:QR,useFactory:function p2(n,e){const t=(0,lt.JM)(xO,n,e);return t&&new QR(t)},deps:[[new _.FiY,JR],Js]};let y2=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[_2,m2]}),n})();const E2=(0,lt.u3)(h2,!0);var w2=x(2375);class XR{constructor(e){return e}}const NO="messaging",ex=new _.OlP("angularfire2.messaging-instances");function C2(n){return(e,t)=>{if(!lt.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new XR(r)}}const b2={provide:class I2{constructor(){return(0,lt.vb)(NO)}},deps:[[new _.FiY,ex]]},D2={provide:XR,useFactory:function T2(n,e){if(!lt.n1.sync())return null;const t=(0,lt.JM)(NO,n,e);return t&&new XR(t)},deps:[[new _.FiY,ex],Js]};let S2=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[D2,b2,{provide:_.ip1,useValue:lt.n1.async,multi:!0}]}),n})();const R2=(0,lt.u3)(w2.KL,!0);x(2833);const MO="@firebase/performance",tx="0.5.5",nx="FB-PERF-TRACE-MEASURE",UO="@firebase/performance/config",VO="@firebase/performance/configexpire",BO="Performance",Ri=new K.LL("performance",BO,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),lu=new cr.Yd(BO);let rx,jO,$O,sx;lu.logLevel=cr.in.INFO;class yi{constructor(e){if(this.window=e,!e)throw Ri.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,K.zI)()?!!(0,K.hl)()||(lu.info("IndexedDB is not supported by current browswer"),!1):(lu.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===rx&&(rx=new yi(jO)),rx}}function ix(){return $O}function HO(n,e){const t=n.length-e.length;if(t<0||t>1)throw Ri.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class eo{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=HO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=HO("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===sx&&(sx=new eo),sx}}var sp=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(sp||(sp={})),sp))();const L2=["firebase_","google_","ga_"],U2=new RegExp("^[a-zA-Z]\\w*$");function j2(){const n=yi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function WO(){switch(yi.getInstance().document.visibilityState){case"visible":return sp.VISIBLE;case"hidden":return sp.HIDDEN;default:return sp.UNKNOWN}}function $2(){const e=yi.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function zO(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Ri.create("no app id");return t}const X2="Could not fetch config, will use default configs";function GO(n){if(!n)return n;const e=eo.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0===t.fpr_enabled||"true"===String(t.fpr_enabled),t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),void 0!==t.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),void 0!==t.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=qO(e.tracesSamplingRate),e.logNetworkAfterSampling=qO(e.networkRequestsSamplingRate),n}function qO(n){return Math.random()<=n}let ax,ox=1;function KO(n){return ox=2,ax=ax||function rj(n){return function ij(){const n=yi.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function k2(n){const e=n.getId();return e.then(t=>{$O=t}),e}(n.installations)).then(e=>function Y2(n,e){const t=function Q2(){const n=yi.getInstance().localStorage;if(!n)return;const e=n.getItem(VO);if(!e||!function tj(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(UO);if(t)try{return JSON.parse(t)}catch(r){return}}();return t?(GO(t),Promise.resolve()):function ej(n,e){return function F2(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function z2(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Ri.create("no project id");return t}(n.app),i=function G2(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Ri.create("no api key");return t}(n.app),c=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:zO(n.app),app_version:"0.5.5",sdk_version:"0.0.1"})});return fetch(c).then(h=>{if(h.ok)return h.json();throw Ri.create("RC response not ok")})}).catch(()=>{lu.info(X2)})}(n,e).then(GO).then(r=>function J2(n){const e=yi.getInstance().localStorage;!n||!e||(e.setItem(UO,JSON.stringify(n)),e.setItem(VO,String(Date.now()+60*eo.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>ZO(),()=>ZO())}(n),ax}function ZO(){ox=3}let lx,yb=3,Fd=[],QO=!1;function vb(n){setTimeout(()=>{if(0!==yb){if(!Fd.length)return vb(1e4);!function uj(){const n=Fd.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function lj(n,e){return function cj(n){const e=eo.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||lu.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(Fd=[...e,...Fd],lu.info("Retry transport request later.")),yb=3,vb(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:eo.getInstance().logSource,log_event:e},n).catch(()=>{Fd=[...n,...Fd],yb--,lu.info(`Tries left: ${yb}.`),vb(1e4)})}()}},n)}function JO(n,e){lx||(lx=function hj(n){return(...e)=>{!function dj(n){if(!n.eventTime||!n.message)throw Ri.create("invalid cc log");Fd=[...Fd,n]}({message:n(...e),eventTime:Date.now()})}}(pj)),lx(n,e)}function Eb(n){const e=eo.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!yi.getInstance().requiredApisAvailable()||n.isAuto&&WO()!==sp.VISIBLE||(function nj(){return 3===ox}()?cx(n):KO(n.performanceController).then(()=>cx(n),()=>cx(n)))}function cx(n){if(!ix())return;const e=eo.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>JO(n,1),0)}function pj(n,e){return 0===e?function gj(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:XO(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function mj(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:XO(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function XO(n){return{google_app_id:zO(n),app_instance_id:ix(),web_app_info:{sdk_version:"0.5.5",page_url:yi.getInstance().getUrl(),service_worker_status:j2(),visibility_state:WO(),effective_connection_type:$2()},application_process_state:0}}const vj=["_fp","_fcp","_fid"];class Ld{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=yi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${nx}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Ri.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Ri.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Eb(this)}record(e,t,r){if(e<=0)throw Ri.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Ri.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Number(Math.floor(r.metrics[i])));Eb(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function Ej(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&vj.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Ri.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function wj(n){const e=Math.floor(n);return e<n&&lu.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function H2(n){return!(0===n.length||n.length>40||L2.some(t=>n.startsWith(t))||!n.match(U2))}(e),i=function W2(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Ri.create("invalid attribute name",{attributeName:e});if(!i)throw Ri.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=yi.getInstance().getUrl();if(!a)return;const c=new Ld(e,"_wt_"+a,!0),h=Math.floor(1e3*yi.getInstance().getTimeOrigin());if(c.setStartTime(h),t&&t[0]&&(c.setDuration(Math.floor(1e3*t[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const C=r.find(R=>"first-paint"===R.name);C&&C.startTime&&c.putMetric("_fp",Math.floor(1e3*C.startTime));const b=r.find(R=>"first-contentful-paint"===R.name);b&&b.startTime&&c.putMetric("_fcp",Math.floor(1e3*b.startTime)),i&&c.putMetric("_fid",Math.floor(1e3*i))}Eb(c)}static createUserTimingTrace(e,t){Eb(new Ld(e,t,!1,t))}}function ek(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=yi.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,c=Math.floor(1e3*(t.responseEnd-t.startTime));!function fj(n){const e=eo.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>JO(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:c})}function tk(n){!ix()||(setTimeout(()=>function Cj(n){const e=yi.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Ld.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),Ld.createOobTrace(n,t,r,a))})}else Ld.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function Tj(n){const e=yi.getInstance(),t=e.getEntriesByType("resource");for(const r of t)ek(n,r);e.setupObserver("resource",r=>ek(n,r))}(n),0),setTimeout(()=>function bj(n){const e=yi.getInstance(),t=e.getEntriesByType("measure");for(const r of t)nk(n,r);e.setupObserver("measure",r=>nk(n,r))}(n),0))}function nk(n,e){const t=e.name;t.substring(0,nx.length)!==nx&&Ld.createUserTimingTrace(n,t)}class Dj{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),yi.getInstance().requiredApisAvailable()?(0,K.eu)().then(t=>{t&&(function aj(){QO||(vb(5500),QO=!0)}(),KO(this).then(()=>tk(this),()=>tk(this)),this.initialized=!0)}).catch(t=>{lu.info(`Environment doesn't support IndexedDB: ${t}`)}):lu.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){eo.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return eo.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){eo.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return eo.getInstance().dataCollectionEnabled}}function Aj(n=(0,An.getApp)()){return n=(0,K.m9)(n),(0,An._getProvider)(n,"performance").getImmediate()}const Rj=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Ri.create("FB not default");if("undefined"==typeof window)throw Ri.create("no window");!function O2(n){jO=n}(window);const i=new Dj(t,r);return i._init(e),i};!function xj(){(0,An._registerComponent)(new Ma.wA("performance",Rj,"PUBLIC")),(0,An.registerVersion)(MO,tx),(0,An.registerVersion)(MO,tx,"esm2017")}();class dx{constructor(e){return e}}const rk="performance",hx=new _.OlP("angularfire2.performance-instances");function Pj(n){return(e,t,r)=>{if(!$n(t))return null;const i=e.runOutsideAngular(()=>n(r));return new dx(i)}}const Oj={provide:class Nj{constructor(){return(0,lt.vb)(rk)}},deps:[[new _.FiY,hx]]},kj={provide:dx,useFactory:function Mj(n,e,t){if(!$n(t))return null;const r=(0,lt.JM)(rk,n,e);return r&&new dx(r)},deps:[[new _.FiY,hx],Js,_.Lbi]};let Fj=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[kj,Oj]}),n})();const Uj=(0,lt.u3)(Aj,!0);var Vj=x(3226);class fx{constructor(e){return e}}const ik="remote-config",px=new _.OlP("angularfire2.remote-config-instances");function $j(n){return(e,t)=>{if(!lt._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new fx(r)}}const Hj={provide:class Bj{constructor(){return(0,lt.vb)(ik)}},deps:[[new _.FiY,px]]},Wj={provide:fx,useFactory:function jj(n,e){if(!lt._J.sync())return null;const t=(0,lt.JM)(ik,n,e);return t&&new fx(t)},deps:[[new _.FiY,px],Js]};let zj=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Wj,Hj,{provide:_.ip1,useValue:lt._J.async,multi:!0}]}),n})();const qj=(0,lt.u3)(Vj.sN,!0),sk="firebasestorage.googleapis.com";class xr extends K.ZR{constructor(e,t){super(gx(e),`Firebase Storage: ${t} (${gx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}_codeEquals(e){return gx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function gx(n){return"storage/"+n}function _x(n){return new xr("invalid-argument",n)}function lk(){return new xr("app-deleted","The Firebase app was deleted.")}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch(i){return new ds(e,"")}if(""===r.path)return r;throw function r$(n){return new xr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Nt){Nt.path_=decodeURIComponent(Nt.path)}const b=t.replace(/[.]/g,"\\."),Jt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(Nt){"/"===Nt.path.charAt(Nt.path.length-1)&&(Nt.path_=Nt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${b}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===sk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Nt=0;Nt<Jt.length;Nt++){const Pn=Jt[Nt],vi=Pn.regex.exec(e);if(vi){let b0=vi[Pn.indices.path];b0||(b0=""),r=new ds(vi[Pn.indices.bucket],b0),Pn.postModify(r);break}}if(null==r)throw function n$(n){return new xr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class u${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vx(n,e,t,r){if(r<e)throw _x(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _x(`Invalid value for '${n}'. Expected ${t} or less.`)}var Ud=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Ud||(Ud={})),Ud))();class p${constructor(e,t,r,i,a,c,h,m,E,C,b){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=E,this.progressCallback_=C,this.connectionFactory_=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,k)=>{this.resolve_=R,this.reject_=k,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function d$(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==h){const m=function mx(){return new xr("unknown","An unknown error occurred, please check the error payload for server response.")}();m.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,m):m)}else c(i.canceled?this.appDelete_?lk():function ak(){return new xr("canceled","User canceled the upload/download.")}():function t$(){return new xr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Ib(!1,null,!0)):this.backoffId_=function l$(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function m(){return 2===h}let E=!1;function C(...Fe){E||(E=!0,e.apply(null,Fe))}function b(Fe){i=setTimeout(()=>{i=null,n(k,m())},Fe)}function R(){a&&clearTimeout(a)}function k(Fe,...xt){if(E)return void R();if(Fe)return R(),void C.call(null,Fe,...xt);if(m()||c)return R(),void C.call(null,Fe,...xt);let Jt;r<64&&(r*=2),1===h?(h=2,Jt=0):Jt=1e3*(r+Math.random()),b(Jt)}let W=!1;function we(Fe){W||(W=!0,R(),!E&&(null!==i?(Fe||(h=2),clearTimeout(i),b(0)):Fe||(h=1)))}return b(0),a=setTimeout(()=>{c=!0,we(!0)},t),we}((r,i)=>{if(i)return void r(!1,new Ib(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Ud.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const C=a.getErrorCode()===Ud.ABORT;return void r(!1,new Ib(!1,null,C))}const E=-1!==this.successCodes_.indexOf(m);r(!0,new Ib(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function c$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Ib{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class op{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new op(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function mk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function A$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new op(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function a$(n){return new xr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Nk(n,e){const t=null==e?void 0:e.storageBucket;return null==t?null:ds.makeFromBucketSpec(t,n)}class Dx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=sk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):Nk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):Nk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new op(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new u$(lk());{const a=function v$(n,e,t,r,i,a){const c=function dk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),h=n.url+c,m=Object.assign({},n.headers);return function _$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function g$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function m$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function y$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new p$(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Mk="@firebase/storage",Ok="storage";function fH(n=(0,An.getApp)(),e){return n=(0,K.m9)(n),(0,An._getProvider)(n,Ok).getImmediate({identifier:e})}function pH(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Dx(t,r,i,e,An.SDK_VERSION)}!function gH(){(0,An._registerComponent)(new Ma.wA(Ok,pH,"PUBLIC").setMultipleInstances(!0)),(0,An.registerVersion)(Mk,"0.9.2",""),(0,An.registerVersion)(Mk,"0.9.2","esm2017")}();class Sx{constructor(e){return e}}const kk="storage",Ax=new _.OlP("angularfire2.storage-instances");function yH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Sx(r)}}const vH={provide:class mH{constructor(){return(0,lt.vb)(kk)}},deps:[[new _.FiY,Ax]]},EH={provide:Sx,useFactory:function _H(n,e){const t=(0,lt.JM)(kk,n,e);return t&&new Sx(t)},deps:[[new _.FiY,Ax],Js]};let wH=(()=>{class n{constructor(){(0,Ai.KN)("angularfire",lt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[EH,vH]}),n})();const TH=(0,lt.u3)(fH,!0);let Rx=class{};Rx=(0,wp.gn)([(0,_.LVF)({declarations:[vM],imports:[Cu,lw,function M1(n,...e){return{ngModule:N1,providers:[{provide:iA,useFactory:x1(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,...e]}]}}(()=>P1(CA_firebase)),function gL(n,...e){return{ngModule:pL,providers:[{provide:xA,useFactory:dL(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,...e]}]}}(()=>qF()),function HF(n,...e){return{ngModule:$F,providers:[{provide:DA,useFactory:VF(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,[new _.FiY,Sd],...e]}]}}(()=>zF()),function jB(n,...e){return{ngModule:BB,providers:[{provide:HR,useFactory:LB(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,[new _.FiY,zE],[new _.FiY,Sd],...e]}]}}(()=>$B()),function ZB(n,...e){return{ngModule:KB,providers:[{provide:zR,useFactory:zB(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,[new _.FiY,zE],[new _.FiY,Sd],...e]}]}}(()=>YB()),function v2(n,...e){return{ngModule:y2,providers:[{provide:JR,useFactory:g2(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,[new _.FiY,zE],[new _.FiY,Sd],...e]}]}}(()=>E2()),function A2(n,...e){return{ngModule:S2,providers:[{provide:ex,useFactory:C2(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,...e]}]}}(()=>R2()),function Lj(n,...e){return{ngModule:Fj,providers:[{provide:hx,useFactory:Pj(n),multi:!0,deps:[_.R0b,_.Lbi,_.zs3,lt.HU,ru,...e]}]}}(()=>Uj()),function Gj(n,...e){return{ngModule:zj,providers:[{provide:px,useFactory:$j(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,...e]}]}}(()=>qj()),function IH(n,...e){return{ngModule:wH,providers:[{provide:Ax,useFactory:yH(n),multi:!0,deps:[_.R0b,_.zs3,lt.HU,ru,[new _.FiY,zE],[new _.FiY,Sd],...e]}]}}(()=>TH()),fo.hO.initializeApp(CA_firebase),OF,wA],providers:[DM,SA],bootstrap:[vM]})],Rx),(0,_.G48)(),Yd().bootstrapModule(Rx).catch(n=>console.error(n))},6148:(Tt,Me,x)=>{"use strict";x.d(Me,{IH:()=>Un,Gb:()=>Wt,Kz:()=>z,Iv:()=>en});var _=x(5861),O=x(9681),N=x(1877),oe=x(2090),me=x(4859);x(2833);const se="analytics",ce="firebase_id",U="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y="https://www.googletagmanager.com/gtag/js",Ue=new N.Yd("@firebase/analytics");function xe(X){return Promise.all(X.map(ve=>ve.catch(Ve=>Ve)))}function je(X,ve){const Ve=document.createElement("script");Ve.src=`${Y}?l=${X}&id=${ve}`,Ve.async=!0,document.head.appendChild(Ve)}function G(X,ve,Ve,at,st,Xe){return ie.apply(this,arguments)}function ie(){return(ie=(0,_.Z)(function*(X,ve,Ve,at,st,Xe){const Ct=at[st];try{if(Ct)yield ve[Ct];else{const B=(yield xe(Ve)).find(j=>j.measurementId===st);B&&(yield ve[B.appId])}}catch(Q){Ue.error(Q)}X("config",st,Xe)})).apply(this,arguments)}function ke(X,ve,Ve,at,st){return Re.apply(this,arguments)}function Re(){return(Re=(0,_.Z)(function*(X,ve,Ve,at,st){try{let Xe=[];if(st&&st.send_to){let Ct=st.send_to;Array.isArray(Ct)||(Ct=[Ct]);const Q=yield xe(Ve);for(const B of Ct){const j=Q.find(nt=>nt.measurementId===B),be=j&&ve[j.appId];if(!be){Xe=[];break}Xe.push(be)}}0===Xe.length&&(Xe=Object.values(ve)),yield Promise.all(Xe),X("event",at,st||{})}catch(Xe){Ue.error(Xe)}})).apply(this,arguments)}function ye(){const X=window.document.getElementsByTagName("script");for(const ve of Object.values(X))if(ve.src&&ve.src.includes(Y))return ve;return null}const J=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ae=new class pe{constructor(ve={},Ve=1e3){this.throttleMetadata=ve,this.intervalMillis=Ve}getThrottleMetadata(ve){return this.throttleMetadata[ve]}setThrottleMetadata(ve,Ve){this.throttleMetadata[ve]=Ve}deleteThrottleMetadata(ve){delete this.throttleMetadata[ve]}};function fe(X){return new Headers({Accept:"application/json","x-goog-api-key":X})}function $e(X){return le.apply(this,arguments)}function le(){return(le=(0,_.Z)(function*(X){var ve;const{appId:Ve,apiKey:at}=X,st={method:"GET",headers:fe(at)},Xe=U.replace("{app-id}",Ve),Ct=yield fetch(Xe,st);if(200!==Ct.status&&304!==Ct.status){let Q="";try{const B=yield Ct.json();(null===(ve=B.error)||void 0===ve?void 0:ve.message)&&(Q=B.error.message)}catch(B){}throw J.create("config-fetch-failed",{httpStatus:Ct.status,responseMessage:Q})}return Ct.json()})).apply(this,arguments)}function Dt(X){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,_.Z)(function*(X,ve=ae,Ve){const{appId:at,apiKey:st,measurementId:Xe}=X.options;if(!at)throw J.create("no-app-id");if(!st){if(Xe)return{measurementId:Xe,appId:at};throw J.create("no-api-key")}const Ct=ve.getThrottleMetadata(at)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Q=new yn;return setTimeout((0,_.Z)(function*(){Q.abort()}),void 0!==Ve?Ve:6e4),_n({appId:at,apiKey:st,measurementId:Xe},Ct,Q,ve)})).apply(this,arguments)}function _n(X,ve,Ve){return ut.apply(this,arguments)}function ut(){return(ut=(0,_.Z)(function*(X,{throttleEndTimeMillis:ve,backoffCount:Ve},at,st=ae){const{appId:Xe,measurementId:Ct}=X;try{yield pt(at,ve)}catch(Q){if(Ct)return Ue.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:Xe,measurementId:Ct};throw Q}try{const Q=yield $e(X);return st.deleteThrottleMetadata(Xe),Q}catch(Q){if(!Gt(Q)){if(st.deleteThrottleMetadata(Xe),Ct)return Ue.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${Q.message}]`),{appId:Xe,measurementId:Ct};throw Q}const B=503===Number(Q.customData.httpStatus)?(0,oe.$s)(Ve,st.intervalMillis,30):(0,oe.$s)(Ve,st.intervalMillis),j={throttleEndTimeMillis:Date.now()+B,backoffCount:Ve+1};return st.setThrottleMetadata(Xe,j),Ue.debug(`Calling attemptFetch again in ${B} millis`),_n(X,j,at,st)}})).apply(this,arguments)}function pt(X,ve){return new Promise((Ve,at)=>{const st=Math.max(ve-Date.now(),0),Xe=setTimeout(Ve,st);X.addEventListener(()=>{clearTimeout(Xe),at(J.create("fetch-throttle",{throttleEndTimeMillis:ve}))})})}function Gt(X){if(!(X instanceof oe.ZR&&X.customData))return!1;const ve=Number(X.customData.httpStatus);return 429===ve||500===ve||503===ve||504===ve}class yn{constructor(){this.listeners=[]}addEventListener(ve){this.listeners.push(ve)}abort(){this.listeners.forEach(ve=>ve())}}function Bn(){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(){if(!(0,oe.hl)())return Ue.warn(J.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(X){return Ue.warn(J.create("indexeddb-unavailable",{errorInfo:X}).message),!1}return!0})).apply(this,arguments)}function ze(){return(ze=(0,_.Z)(function*(X,ve,Ve,at,st,Xe,Ct){var Q;const B=Dt(X);B.then(Mt=>{Ve[Mt.measurementId]=Mt.appId,X.options.measurementId&&Mt.measurementId!==X.options.measurementId&&Ue.warn(`The measurement ID in the local Firebase config (${X.options.measurementId}) does not match the measurement ID fetched from the server (${Mt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mt=>Ue.error(Mt)),ve.push(B);const j=Bn().then(Mt=>{if(Mt)return at.getId()}),[be,nt]=yield Promise.all([B,j]);ye()||je(Xe,be.measurementId),st("js",new Date);const _t=null!==(Q=null==Ct?void 0:Ct.config)&&void 0!==Q?Q:{};return _t.origin="firebase",_t.update=!0,null!=nt&&(_t[ce]=nt),st("config",be.measurementId,_t),be.measurementId})).apply(this,arguments)}class gt{constructor(ve){this.app=ve}_delete(){return delete mt[this.app.options.appId],Promise.resolve()}}let mt={},jt=[];const Xt={};let xn,bn,qt="dataLayer",zn=!1;function Pe(X,ve,Ve){!function he(){const X=[];if((0,oe.ru)()&&X.push("This is a browser extension environment."),(0,oe.zI)()||X.push("Cookies are not available."),X.length>0){const ve=X.map((at,st)=>`(${st+1}) ${at}`).join(" "),Ve=J.create("invalid-analytics-context",{errorInfo:ve});Ue.warn(Ve.message)}}();const at=X.options.appId;if(!at)throw J.create("no-app-id");if(!X.options.apiKey){if(!X.options.measurementId)throw J.create("no-api-key");Ue.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${X.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mt[at])throw J.create("already-exists",{id:at});if(!zn){!function Le(X){let ve=[];Array.isArray(window[X])?ve=window[X]:window[X]=ve}(qt);const{wrappedGtag:Xe,gtagCore:Ct}=function Ce(X,ve,Ve,at,st){let Xe=function(...Ct){window[at].push(arguments)};return window[st]&&"function"==typeof window[st]&&(Xe=window[st]),window[st]=function ue(X,ve,Ve,at){function Xe(){return(Xe=(0,_.Z)(function*(Ct,Q,B){try{"event"===Ct?yield ke(X,ve,Ve,Q,B):"config"===Ct?yield G(X,ve,Ve,at,Q,B):X("set",Q)}catch(j){Ue.error(j)}})).apply(this,arguments)}return function st(Ct,Q,B){return Xe.apply(this,arguments)}}(Xe,X,ve,Ve),{gtagCore:Xe,wrappedGtag:window[st]}}(mt,jt,Xt,qt,"gtag");bn=Xe,xn=Ct,zn=!0}return mt[at]=function kt(X,ve,Ve,at,st,Xe,Ct){return ze.apply(this,arguments)}(X,jt,Xt,ve,xn,qt,Ve),new gt(X)}function Et(){return(Et=(0,_.Z)(function*(X,ve,Ve,at,st){if(st&&st.global)X("event",Ve,at);else{const Xe=yield ve;X("event",Ve,Object.assign(Object.assign({},at),{send_to:Xe}))}})).apply(this,arguments)}function Ft(){return(Ft=(0,_.Z)(function*(X,ve,Ve,at){if(at&&at.global)return X("set",{user_id:Ve}),Promise.resolve();X("config",yield ve,{update:!0,user_id:Ve})})).apply(this,arguments)}function Un(X=(0,O.getApp)()){X=(0,oe.m9)(X);const ve=(0,O._getProvider)(X,se);return ve.isInitialized()?ve.getImmediate():function Tr(X,ve={}){const Ve=(0,O._getProvider)(X,se);if(Ve.isInitialized()){const st=Ve.getImmediate();if((0,oe.vZ)(ve,Ve.getOptions()))return st;throw J.create("already-initialized")}return Ve.initialize({options:ve})}(X)}function Wt(){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(X){return!1}})).apply(this,arguments)}function en(X,ve,Ve){X=(0,oe.m9)(X),function St(X,ve,Ve,at){return Ft.apply(this,arguments)}(bn,mt[X.app.options.appId],ve,Ve).catch(at=>Ue.error(at))}function z(X,ve,Ve,at){X=(0,oe.m9)(X),function qe(X,ve,Ve,at,st){return Et.apply(this,arguments)}(bn,mt[X.app.options.appId],ve,Ve,at).catch(st=>Ue.error(st))}const Ie="@firebase/analytics";!function ot(){(0,O._registerComponent)(new me.wA(se,(ve,{options:Ve})=>Pe(ve.getProvider("app").getImmediate(),ve.getProvider("installations-internal").getImmediate(),Ve),"PUBLIC")),(0,O._registerComponent)(new me.wA("analytics-internal",function X(ve){try{const Ve=ve.getProvider(se).getImmediate();return{logEvent:(at,st,Xe)=>z(Ve,at,st,Xe)}}catch(Ve){throw J.create("interop-component-reg-failed",{reason:Ve})}},"PRIVATE")),(0,O.registerVersion)(Ie,"0.7.5"),(0,O.registerVersion)(Ie,"0.7.5","esm2017")}()},5867:(Tt,Me,x)=>{"use strict";x.d(Me,{Mq:()=>_.getApp,C6:()=>_.getApps,ZF:()=>_.initializeApp,KN:()=>_.registerVersion});var _=x(9681);(0,_.registerVersion)("firebase","9.6.7","app")},127:(Tt,Me,x)=>{"use strict";x.d(Me,{Z:()=>_.Z});var _=x(3942);_.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(Tt,Me,x)=>{"use strict";x.r(Me);var _=x(5861),O=x(3942),N=x(4929),oe=x(2090),se=(x(9681),x(1877),x(4859));function ce(){return window}function U(){return(U=(0,_.Z)(function*(Q,B,j){var be;const{BuildInfo:nt}=ce();(0,N.ap)(B.sessionId,"AuthEvent did not contain a session ID");const _t=yield ie(B.sessionId),Mt={};return(0,N.aq)()?Mt.ibi=nt.packageName:(0,N.ar)()?Mt.apn=nt.packageName:(0,N.as)(Q,"operation-not-supported-in-this-environment"),nt.displayName&&(Mt.appDisplayName=nt.displayName),Mt.sessionId=_t,(0,N.at)(Q,j,B.type,void 0,null!==(be=B.eventId)&&void 0!==be?be:void 0,Mt)})).apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(Q){const{BuildInfo:B}=ce(),j={};(0,N.aq)()?j.iosBundleId=B.packageName:(0,N.ar)()?j.androidPackageName=B.packageName:(0,N.as)(Q,"operation-not-supported-in-this-environment"),yield(0,N.au)(Q,j)})).apply(this,arguments)}function Le(){return(Le=(0,_.Z)(function*(Q,B,j){const{cordova:be}=ce();let nt=()=>{};try{yield new Promise((_t,Mt)=>{let on=null;function tn(){var an;_t();const ir=null===(an=be.plugins.browsertab)||void 0===an?void 0:an.close;"function"==typeof ir&&ir(),"function"==typeof(null==j?void 0:j.close)&&j.close()}function Xn(){on||(on=window.setTimeout(()=>{Mt((0,N.av)(Q,"redirect-cancelled-by-user"))},2e3))}function mr(){"visible"===(null==document?void 0:document.visibilityState)&&Xn()}B.addPassiveListener(tn),document.addEventListener("resume",Xn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",mr,!1),nt=()=>{B.removePassiveListener(tn),document.removeEventListener("resume",Xn,!1),document.removeEventListener("visibilitychange",mr,!1),on&&window.clearTimeout(on)}})}finally{nt()}})).apply(this,arguments)}function ie(Q){return ke.apply(this,arguments)}function ke(){return(ke=(0,_.Z)(function*(Q){const B=Re(Q),j=yield crypto.subtle.digest("SHA-256",B);return Array.from(new Uint8Array(j)).map(nt=>nt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Re(Q){if((0,N.ap)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Q);const B=new ArrayBuffer(Q.length),j=new Uint8Array(B);for(let be=0;be<Q.length;be++)j[be]=Q.charCodeAt(be);return j}class Ce extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(B=>{this.resolveInialized=B})}addPassiveListener(B){this.passiveListeners.add(B)}removePassiveListener(B){this.passiveListeners.delete(B)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(B){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(B)),super.onEvent(B)}initialized(){var B=this;return(0,_.Z)(function*(){yield B.initPromise})()}}function J(Q){return ct.apply(this,arguments)}function ct(){return(ct=(0,_.Z)(function*(Q){const B=yield ae()._get(fe(Q));return B&&(yield ae()._remove(fe(Q))),B})).apply(this,arguments)}function pe(){const Q=[],B="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const be=Math.floor(Math.random()*B.length);Q.push(B.charAt(be))}return Q.join("")}function ae(){return(0,N.ax)(N.b)}function fe(Q){return(0,N.ay)("authEvent",Q.config.apiKey,Q.name)}function Dt(Q){if(!(null==Q?void 0:Q.includes("?")))return{};const[B,...j]=Q.split("?");return(0,oe.zd)(j.join("?"))}function pt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function kt(){var Q;return(null===(Q=null==self?void 0:self.location)||void 0===Q?void 0:Q.protocol)||null}function gt(Q=(0,oe.z$)()){return!("file:"!==kt()&&"ionic:"!==kt()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cn(){try{const Q=self.localStorage,B=N.aG();if(Q)return Q.setItem(B,"1"),Q.removeItem(B),!function qt(Q=(0,oe.z$)()){return function jt(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Xt(Q=(0,oe.z$)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,oe.hl)()}catch(Q){return xn()&&(0,oe.hl)()}return!1}function xn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function bn(){return(function ze(){return"http:"===kt()||"https:"===kt()}()||(0,oe.ru)()||gt())&&!function mt(){return(0,oe.b$)()||(0,oe.UG)()}()&&Cn()&&!xn()}function zn(){return gt()&&"undefined"!=typeof document}function he(){return(he=(0,_.Z)(function*(){return!!zn()&&new Promise(Q=>{const B=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(B),Q(!0)})})})).apply(this,arguments)}const qe={LOCAL:"local",NONE:"none",SESSION:"session"},Et=N.aw,Je="persistence";function St(Q){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,_.Z)(function*(Q){yield Q._initializationPromise;const B=yt(),j=N.ay(Je,Q.config.apiKey,Q.name);B&&B.setItem(j,Q._getPersistence())})).apply(this,arguments)}function yt(){var Q;try{return(null===(Q=function Pe(){return"undefined"!=typeof window?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch(B){return null}}const dt=N.aw;class it{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class _n{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize(B){var j=this;return(0,_.Z)(function*(){const be=B._key();let nt=j.eventManagers.get(be);return nt||(nt=new Ce(B),j.eventManagers.set(be,nt),j.attachCallbackListeners(B,nt)),nt})()}_openPopup(B){(0,N.as)(B,"operation-not-supported-in-this-environment")}_openRedirect(B,j,be,nt){var _t=this;return(0,_.Z)(function*(){!function G(Q){var B,j,be,nt,_t,Mt,on,tn,Xn,mr;const an=ce();(0,N.aw)("function"==typeof(null===(B=null==an?void 0:an.universalLinks)||void 0===B?void 0:B.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===(j=null==an?void 0:an.BuildInfo)||void 0===j?void 0:j.packageName),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(_t=null===(nt=null===(be=null==an?void 0:an.cordova)||void 0===be?void 0:be.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===_t?void 0:_t.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(tn=null===(on=null===(Mt=null==an?void 0:an.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===on?void 0:on.browsertab)||void 0===tn?void 0:tn.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(mr=null===(Xn=null==an?void 0:an.cordova)||void 0===Xn?void 0:Xn.InAppBrowser)||void 0===mr?void 0:mr.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(B);const Mt=yield _t._initialize(B);yield Mt.initialized(),Mt.resetRedirect(),(0,N.aB)(),yield _t._originValidation(B);const on=function ye(Q,B,j=null){return{type:B,eventId:j,urlResponse:null,sessionId:pe(),postBody:null,tenantId:Q.tenantId,error:(0,N.av)(Q,"no-auth-event")}}(B,be,nt);yield function Qe(Q,B){return ae()._set(fe(Q),B)}(B,on);const tn=yield function V(Q,B,j){return U.apply(this,arguments)}(B,on,j),Xn=yield function xe(Q){const{cordova:B}=ce();return new Promise(j=>{B.plugins.browsertab.isAvailable(be=>{let nt=null;be?B.plugins.browsertab.openUrl(Q):nt=B.InAppBrowser.open(Q,(0,N.ao)()?"_blank":"_system","location=yes"),j(nt)})})}(tn);return function je(Q,B,j){return Le.apply(this,arguments)}(B,Mt,Xn)})()}_isIframeWebStorageSupported(B,j){throw new Error("Method not implemented.")}_originValidation(B){const j=B._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function Y(Q){return Ue.apply(this,arguments)}(B)),this.originValidationPromises[j]}attachCallbackListeners(B,j){const{universalLinks:be,handleOpenURL:nt,BuildInfo:_t}=ce(),Mt=setTimeout((0,_.Z)(function*(){yield J(B),j.onEvent(pt())}),500),on=function(){var mr=(0,_.Z)(function*(an){clearTimeout(Mt);const ir=yield J(B);let q=null;ir&&(null==an?void 0:an.url)&&(q=function Z(Q,B){var j,be;const nt=function le(Q){const B=Dt(Q),j=B.link?decodeURIComponent(B.link):void 0,be=Dt(j).link,nt=B.deep_link_id?decodeURIComponent(B.deep_link_id):void 0;return Dt(nt).link||nt||be||j||Q}(B);if(nt.includes("/__/auth/callback")){const _t=Dt(nt),Mt=_t.firebaseError?function $e(Q){try{return JSON.parse(Q)}catch(B){return null}}(decodeURIComponent(_t.firebaseError)):null,on=null===(be=null===(j=null==Mt?void 0:Mt.code)||void 0===j?void 0:j.split("auth/"))||void 0===be?void 0:be[1],tn=on?(0,N.av)(on):null;return tn?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:nt,postBody:null}}return null}(ir,an.url)),j.onEvent(q||pt())});return function(ir){return mr.apply(this,arguments)}}();void 0!==be&&"function"==typeof be.subscribe&&be.subscribe(null,on);const tn=nt,Xn=`${_t.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var mr=(0,_.Z)(function*(an){if(an.toLowerCase().startsWith(Xn)&&on({url:an}),"function"==typeof tn)try{tn(an)}catch(ir){console.error(ir)}});return function(an){return mr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize(B){var j=this;return(0,_.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(B)})()}_openPopup(B,j,be,nt){var _t=this;return(0,_.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(B,j,be,nt)})()}_openRedirect(B,j,be,nt){var _t=this;return(0,_.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(B,j,be,nt)})()}_isIframeWebStorageSupported(B,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(B,j)}_originValidation(B){return this.assertedUnderlyingResolver._originValidation(B)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var B=this;return(0,_.Z)(function*(){if(B.underlyingResolver)return;const j=yield function Ae(){return he.apply(this,arguments)}();B.underlyingResolver=j?B.cordovaResolver:B.browserResolver})()}}function Un(Q){return Q.unwrap()}function Wt(Q){return wn(Q)}function wn(Q){const{_tokenResponse:B}=Q instanceof oe.ZR?Q.customData:Q;if(!B)return null;if(!(Q instanceof oe.ZR)&&"temporaryProof"in B&&"phoneNumber"in B)return N.P.credentialFromResult(Q);const j=B.providerId;if(!j||j===N.o.PASSWORD)return null;let be;switch(j){case N.o.GOOGLE:be=N.N;break;case N.o.FACEBOOK:be=N.M;break;case N.o.GITHUB:be=N.Q;break;case N.o.TWITTER:be=N.V;break;default:const{oauthIdToken:nt,oauthAccessToken:_t,oauthTokenSecret:Mt,pendingToken:on,nonce:tn}=B;return _t||Mt||nt||on?on?j.startsWith("saml.")?N.aJ._create(j,on):N.I._fromParams({providerId:j,signInMethod:j,pendingToken:on,idToken:nt,accessToken:_t}):new N.T(j).credential({idToken:nt,accessToken:_t,rawNonce:tn}):null}return Q instanceof oe.ZR?be.credentialFromError(Q):be.credentialFromResult(Q)}function en(Q,B){return B.catch(j=>{throw j instanceof oe.ZR&&function Gn(Q,B){var j;const be=null===(j=B.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===B.code)B.resolver=new z(Q,N.am(Q,B));else if(be){const nt=wn(B),_t=B;nt&&(_t.credential=nt,_t.tenantId=be.tenantId||void 0,_t.email=be.email||void 0,_t.phoneNumber=be.phoneNumber||void 0)}}(Q,j),j}).then(j=>{const nt=j.user;return{operationType:j.operationType,credential:Wt(j),additionalUserInfo:N.ak(j),user:Ie.getOrCreate(nt)}})}function F(Q,B){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(Q,B){const j=yield B;return{verificationId:j.verificationId,confirm:be=>en(Q,j.confirm(be))}})).apply(this,arguments)}class z{constructor(B,j){this.resolver=j,this.auth=function Tr(Q){return Q.wrapped()}(B)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(B){return en(Un(this.auth),this.resolver.resolveSignIn(B))}}class Ie{constructor(B){this._delegate=B,this.multiFactor=N.an(B)}static getOrCreate(B){return Ie.USER_MAP.has(B)||Ie.USER_MAP.set(B,new Ie(B)),Ie.USER_MAP.get(B)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(B){return this._delegate.getIdTokenResult(B)}getIdToken(B){return this._delegate.getIdToken(B)}linkAndRetrieveDataWithCredential(B){return this.linkWithCredential(B)}linkWithCredential(B){var j=this;return(0,_.Z)(function*(){return en(j.auth,N.Y(j._delegate,B))})()}linkWithPhoneNumber(B,j){var be=this;return(0,_.Z)(function*(){return F(be.auth,N.l(be._delegate,B,j))})()}linkWithPopup(B){var j=this;return(0,_.Z)(function*(){return en(j.auth,N.d(j._delegate,B,it))})()}linkWithRedirect(B){var j=this;return(0,_.Z)(function*(){return yield St(N.aC(j.auth)),N.g(j._delegate,B,it)})()}reauthenticateAndRetrieveDataWithCredential(B){return this.reauthenticateWithCredential(B)}reauthenticateWithCredential(B){var j=this;return(0,_.Z)(function*(){return en(j.auth,N.Z(j._delegate,B))})()}reauthenticateWithPhoneNumber(B,j){return F(this.auth,N.r(this._delegate,B,j))}reauthenticateWithPopup(B){return en(this.auth,N.e(this._delegate,B,it))}reauthenticateWithRedirect(B){var j=this;return(0,_.Z)(function*(){return yield St(N.aC(j.auth)),N.h(j._delegate,B,it)})()}sendEmailVerification(B){return N.aa(this._delegate,B)}unlink(B){var j=this;return(0,_.Z)(function*(){return yield N.aj(j._delegate,B),j})()}updateEmail(B){return N.af(this._delegate,B)}updatePassword(B){return N.ag(this._delegate,B)}updatePhoneNumber(B){return N.u(this._delegate,B)}updateProfile(B){return N.ae(this._delegate,B)}verifyBeforeUpdateEmail(B,j){return N.ab(this._delegate,B,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const ne=N.aw;let ot=(()=>{class Q{constructor(j,be){if(this.app=j,be.isInitialized())return this._delegate=be.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:nt}=j.options;ne(nt,"invalid-api-key",{appName:j.name}),ne(nt,"invalid-api-key",{appName:j.name});const _t="undefined"!=typeof window?it:void 0;this._delegate=be.initialize({options:{persistence:ve(nt,j.name),popupRedirectResolver:_t}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,be){N.E(this._delegate,j,be)}applyActionCode(j){return N.a1(this._delegate,j)}checkActionCode(j){return N.a2(this._delegate,j)}confirmPasswordReset(j,be){return N.a0(this._delegate,j,be)}createUserWithEmailAndPassword(j,be){var nt=this;return(0,_.Z)(function*(){return en(nt._delegate,N.a4(nt._delegate,j,be))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return N.a9(this._delegate,j)}isSignInWithEmailLink(j){return N.a7(this._delegate,j)}getRedirectResult(){var j=this;return(0,_.Z)(function*(){ne(bn(),j._delegate,"operation-not-supported-in-this-environment");const be=yield N.j(j._delegate,it);return be?en(j._delegate,Promise.resolve(be)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function Gt(Q,B){(0,N.aC)(Q)._logFramework(B)}(this._delegate,j)}onAuthStateChanged(j,be,nt){const{next:_t,error:Mt,complete:on}=X(j,be,nt);return this._delegate.onAuthStateChanged(_t,Mt,on)}onIdTokenChanged(j,be,nt){const{next:_t,error:Mt,complete:on}=X(j,be,nt);return this._delegate.onIdTokenChanged(_t,Mt,on)}sendSignInLinkToEmail(j,be){return N.a6(this._delegate,j,be)}sendPasswordResetEmail(j,be){return N.$(this._delegate,j,be||void 0)}setPersistence(j){var be=this;return(0,_.Z)(function*(){let nt;switch(function tt(Q,B){Et(Object.values(qe).includes(B),Q,"invalid-persistence-type"),(0,oe.b$)()?Et(B!==qe.SESSION,Q,"unsupported-persistence-type"):(0,oe.UG)()?Et(B===qe.NONE,Q,"unsupported-persistence-type"):xn()?Et(B===qe.NONE||B===qe.LOCAL&&(0,oe.hl)(),Q,"unsupported-persistence-type"):Et(B===qe.NONE||Cn(),Q,"unsupported-persistence-type")}(be._delegate,j),j){case qe.SESSION:nt=N.a;break;case qe.LOCAL:nt=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case qe.NONE:nt=N.K;break;default:return N.as("argument-error",{appName:be._delegate.name})}return be._delegate.setPersistence(nt)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return en(this._delegate,N.W(this._delegate))}signInWithCredential(j){return en(this._delegate,N.X(this._delegate,j))}signInWithCustomToken(j){return en(this._delegate,N._(this._delegate,j))}signInWithEmailAndPassword(j,be){return en(this._delegate,N.a5(this._delegate,j,be))}signInWithEmailLink(j,be){return en(this._delegate,N.a8(this._delegate,j,be))}signInWithPhoneNumber(j,be){return F(this._delegate,N.s(this._delegate,j,be))}signInWithPopup(j){var be=this;return(0,_.Z)(function*(){return ne(bn(),be._delegate,"operation-not-supported-in-this-environment"),en(be._delegate,N.c(be._delegate,j,it))})()}signInWithRedirect(j){var be=this;return(0,_.Z)(function*(){return ne(bn(),be._delegate,"operation-not-supported-in-this-environment"),yield St(be._delegate),N.f(be._delegate,j,it)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return N.a3(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=qe,Q})();function X(Q,B,j){let be=Q;"function"!=typeof Q&&({next:be,error:B,complete:j}=Q);const nt=be;return{next:Mt=>nt(Mt&&Ie.getOrCreate(Mt)),error:B,complete:j}}function ve(Q,B){const j=function zt(Q,B){const j=yt();if(!j)return[];const be=N.ay(Je,Q,B);switch(j.getItem(be)){case qe.NONE:return[N.K];case qe.LOCAL:return[N.i,N.a];case qe.SESSION:return[N.a];default:return[]}}(Q,B);if("undefined"!=typeof self&&!j.includes(N.i)&&j.push(N.i),"undefined"!=typeof window)for(const be of[N.b,N.a])j.includes(be)||j.push(be);return j.includes(N.K)||j.push(N.K),j}class Ve{constructor(){this.providerId="phone",this._delegate=new N.P(Un(O.Z.auth()))}static credential(B,j){return N.P.credential(B,j)}verifyPhoneNumber(B,j){return this._delegate.verifyPhoneNumber(B,j)}unwrap(){return this._delegate}}Ve.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ve.PROVIDER_ID=N.P.PROVIDER_ID;const at=N.aw;class st{constructor(B,j,be=O.Z.app()){var nt;at(null===(nt=be.options)||void 0===nt?void 0:nt.apiKey,"invalid-api-key",{appName:be.name}),this._delegate=new N.R(B,j,be.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ct(Q){Q.INTERNAL.registerComponent(new se.wA("auth-compat",B=>{const j=B.getProvider("app-compat").getImmediate(),be=B.getProvider("auth");return new ot(j,be)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:Ve,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:st,TwitterAuthProvider:N.V,Auth:ot,AuthCredential:N.G,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.2.9")}(O.Z)},2375:(Tt,Me,x)=>{"use strict";x.d(Me,{KL:()=>tn,Gb:()=>be});var _=x(5861),N=(x(2833),x(4859)),oe=x(2940),me=x(2090),_e=x(9681);const se="/firebase-messaging-sw.js",ce="/firebase-cloud-messaging-push-scope",ge="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",U="google.c.a.c_id",Y="google.c.a.c_l",Ue="google.c.a.ts",xe="google.c.a.e";var Le=(()=>{return(q=Le||(Le={})).PUSH_RECEIVED="push-received",q.NOTIFICATION_CLICKED="notification-clicked",Le;var q})();function G(q){const de=new Uint8Array(q);return btoa(String.fromCharCode(...de)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ie(q){const ht=(q+"=".repeat((4-q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ke=atob(ht),Oe=new Uint8Array(Ke.length);for(let L=0;L<Ke.length;++L)Oe[L]=Ke.charCodeAt(L);return Oe}const ke="fcm_token_details_db",ue="fcm_token_object_Store";function Ce(q){return ye.apply(this,arguments)}function ye(){return ye=(0,_.Z)(function*(q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(L=>L.name).includes(ke))return null;let de=null;return(yield(0,oe.openDb)(ke,5,function(){var Ke=(0,_.Z)(function*(Oe){var L;if(Oe.oldVersion<2||!Oe.objectStoreNames.contains(ue))return;const re=Oe.transaction.objectStore(ue),Be=yield re.index("fcmSenderId").get(q);if(yield re.clear(),Be)if(2===Oe.oldVersion){const Ze=Be;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;de={token:Ze.fcmToken,createTime:null!==(L=Ze.createTime)&&void 0!==L?L:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:G(Ze.vapidKey)}}}else if(3===Oe.oldVersion){const Ze=Be;de={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:G(Ze.auth),p256dh:G(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:G(Ze.vapidKey)}}}else if(4===Oe.oldVersion){const Ze=Be;de={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:G(Ze.auth),p256dh:G(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:G(Ze.vapidKey)}}}});return function(Oe){return Ke.apply(this,arguments)}}())).close(),yield(0,oe.deleteDb)(ke),yield(0,oe.deleteDb)("fcm_vapid_details_db"),yield(0,oe.deleteDb)("undefined"),Qe(de)?de:null}),ye.apply(this,arguments)}function Qe(q){if(!q||!q.subscriptionOptions)return!1;const{subscriptionOptions:de}=q;return"number"==typeof q.createTime&&q.createTime>0&&"string"==typeof q.token&&q.token.length>0&&"string"==typeof de.auth&&de.auth.length>0&&"string"==typeof de.p256dh&&de.p256dh.length>0&&"string"==typeof de.endpoint&&de.endpoint.length>0&&"string"==typeof de.swScope&&de.swScope.length>0&&"string"==typeof de.vapidKey&&de.vapidKey.length>0}const Z="firebase-messaging-store";let pe=null;function ae(){return pe||(pe=(0,oe.openDb)("firebase-messaging-database",1,q=>{0===q.oldVersion&&q.createObjectStore(Z)})),pe}function fe(q){return $e.apply(this,arguments)}function $e(){return($e=(0,_.Z)(function*(q){const de=ut(q),Ke=yield(yield ae()).transaction(Z).objectStore(Z).get(de);if(Ke)return Ke;{const Oe=yield Ce(q.appConfig.senderId);if(Oe)return yield le(q,Oe),Oe}})).apply(this,arguments)}function le(q,de){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,_.Z)(function*(q,de){const ht=ut(q),Oe=(yield ae()).transaction(Z,"readwrite");return yield Oe.objectStore(Z).put(de,ht),yield Oe.complete,de})).apply(this,arguments)}function Bt(q){return _n.apply(this,arguments)}function _n(){return(_n=(0,_.Z)(function*(q){const de=ut(q),Ke=(yield ae()).transaction(Z,"readwrite");yield Ke.objectStore(Z).delete(de),yield Ke.complete})).apply(this,arguments)}function ut({appConfig:q}){return q.appId}const Gt=new me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yn(q,de){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(q,de){const ht=yield jt(q),Ke=qt(de),Oe={method:"POST",headers:ht,body:JSON.stringify(Ke)};let L;try{L=yield(yield fetch(mt(q.appConfig),Oe)).json()}catch(re){throw Gt.create("token-subscribe-failed",{errorInfo:re})}if(L.error)throw Gt.create("token-subscribe-failed",{errorInfo:L.error.message});if(!L.token)throw Gt.create("token-subscribe-no-token");return L.token})).apply(this,arguments)}function Ht(q,de){return kt.apply(this,arguments)}function kt(){return(kt=(0,_.Z)(function*(q,de){const ht=yield jt(q),Ke=qt(de.subscriptionOptions),Oe={method:"PATCH",headers:ht,body:JSON.stringify(Ke)};let L;try{L=yield(yield fetch(`${mt(q.appConfig)}/${de.token}`,Oe)).json()}catch(re){throw Gt.create("token-update-failed",{errorInfo:re})}if(L.error)throw Gt.create("token-update-failed",{errorInfo:L.error.message});if(!L.token)throw Gt.create("token-update-no-token");return L.token})).apply(this,arguments)}function ze(q,de){return gt.apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(q,de){const Ke={method:"DELETE",headers:yield jt(q)};try{const L=yield(yield fetch(`${mt(q.appConfig)}/${de}`,Ke)).json();if(L.error)throw Gt.create("token-unsubscribe-failed",{errorInfo:L.error.message})}catch(Oe){throw Gt.create("token-unsubscribe-failed",{errorInfo:Oe})}})).apply(this,arguments)}function mt({projectId:q}){return`https://fcmregistrations.googleapis.com/v1/projects/${q}/registrations`}function jt(q){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,_.Z)(function*({appConfig:q,installations:de}){const ht=yield de.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q.apiKey,"x-goog-firebase-installations-auth":`FIS ${ht}`})})).apply(this,arguments)}function qt({p256dh:q,auth:de,endpoint:ht,vapidKey:Ke}){const Oe={web:{endpoint:ht,auth:de,p256dh:q}};return Ke!==ge&&(Oe.web.applicationPubKey=Ke),Oe}const Cn=6048e5;function xn(q){return bn.apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(q){const de=yield Je(q.swRegistration,q.vapidKey),ht={vapidKey:q.vapidKey,swScope:q.swRegistration.scope,endpoint:de.endpoint,auth:G(de.getKey("auth")),p256dh:G(de.getKey("p256dh"))},Ke=yield fe(q.firebaseDependencies);if(Ke){if(St(Ke.subscriptionOptions,ht))return Date.now()>=Ke.createTime+Cn?he(q,{token:Ke.token,createTime:Date.now(),subscriptionOptions:ht}):Ke.token;try{yield ze(q.firebaseDependencies,Ke.token)}catch(Oe){console.warn(Oe)}return qe(q.firebaseDependencies,ht)}return qe(q.firebaseDependencies,ht)})).apply(this,arguments)}function zn(q){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,_.Z)(function*(q){const de=yield fe(q.firebaseDependencies);de&&(yield ze(q.firebaseDependencies,de.token),yield Bt(q.firebaseDependencies));const ht=yield q.swRegistration.pushManager.getSubscription();return!ht||ht.unsubscribe()})).apply(this,arguments)}function he(q,de){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,_.Z)(function*(q,de){try{const ht=yield Ht(q.firebaseDependencies,de),Ke=Object.assign(Object.assign({},de),{token:ht,createTime:Date.now()});return yield le(q.firebaseDependencies,Ke),ht}catch(ht){throw yield zn(q),ht}})).apply(this,arguments)}function qe(q,de){return Et.apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(q,de){const Ke={token:yield yn(q,de),createTime:Date.now(),subscriptionOptions:de};return yield le(q,Ke),Ke.token})).apply(this,arguments)}function Je(q,de){return tt.apply(this,arguments)}function tt(){return(tt=(0,_.Z)(function*(q,de){return(yield q.pushManager.getSubscription())||q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ie(de)})})).apply(this,arguments)}function St(q,de){return de.vapidKey===q.vapidKey&&de.endpoint===q.endpoint&&de.auth===q.auth&&de.p256dh===q.p256dh}function Ft(q){const de={from:q.from,collapseKey:q.collapse_key,messageId:q.fcmMessageId};return function zt(q,de){if(!de.notification)return;q.notification={};const ht=de.notification.title;ht&&(q.notification.title=ht);const Ke=de.notification.body;Ke&&(q.notification.body=Ke);const Oe=de.notification.image;Oe&&(q.notification.image=Oe)}(de,q),function yt(q,de){!de.data||(q.data=de.data)}(de,q),function dt(q,de){if(!de.fcmOptions)return;q.fcmOptions={};const ht=de.fcmOptions.link;ht&&(q.fcmOptions.link=ht);const Ke=de.fcmOptions.analytics_label;Ke&&(q.fcmOptions.analyticsLabel=Ke)}(de,q),de}function it(q){return"object"==typeof q&&!!q&&U in q}function Un(q,de){const ht=[];for(let Ke=0;Ke<q.length;Ke++)ht.push(q.charAt(Ke)),Ke<de.length&&ht.push(de.charAt(Ke));return ht.join("")}function Wt(q){return Gt.create("missing-app-config-values",{valueName:q})}Un("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Un("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gn{constructor(de,ht,Ke){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function Tr(q){if(!q||!q.options)throw Wt("App Configuration Object");if(!q.name)throw Wt("App Name");const de=["projectId","apiKey","appId","messagingSenderId"],{options:ht}=q;for(const Ke of de)if(!ht[Ke])throw Wt(Ke);return{appName:q.name,projectId:ht.projectId,apiKey:ht.apiKey,appId:ht.appId,senderId:ht.messagingSenderId}}(de);this.firebaseDependencies={app:de,appConfig:Oe,installations:ht,analyticsProvider:Ke}}_delete(){return Promise.resolve()}}function wn(q){return en.apply(this,arguments)}function en(){return(en=(0,_.Z)(function*(q){try{q.swRegistration=yield navigator.serviceWorker.register(se,{scope:ce}),q.swRegistration.update().catch(()=>{})}catch(de){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:de.message})}})).apply(this,arguments)}function F(q,de){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(q,de){if(!de&&!q.swRegistration&&(yield wn(q)),de||!q.swRegistration){if(!(de instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");q.swRegistration=de}})).apply(this,arguments)}function z(q,de){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,_.Z)(function*(q,de){de?q.vapidKey=de:q.vapidKey||(q.vapidKey=ge)})).apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(q,de){if(!navigator)throw Gt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gt.create("permission-blocked");return yield z(q,null==de?void 0:de.vapidKey),yield F(q,null==de?void 0:de.serviceWorkerRegistration),xn(q)})).apply(this,arguments)}function X(q,de,ht){return ve.apply(this,arguments)}function ve(){return(ve=(0,_.Z)(function*(q,de,ht){const Ke=Ve(de);(yield q.firebaseDependencies.analyticsProvider.get()).logEvent(Ke,{message_id:ht[U],message_name:ht[Y],message_time:ht[Ue],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ve(q){switch(q){case Le.NOTIFICATION_CLICKED:return"notification_open";case Le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function st(){return(st=(0,_.Z)(function*(q,de){const ht=de.data;if(!ht.isFirebaseMessaging)return;q.onMessageHandler&&ht.messageType===Le.PUSH_RECEIVED&&("function"==typeof q.onMessageHandler?q.onMessageHandler(Ft(ht)):q.onMessageHandler.next(Ft(ht)));const Ke=ht.data;it(Ke)&&"1"===Ke[xe]&&(yield X(q,ht.messageType,Ke))})).apply(this,arguments)}const Xe="@firebase/messaging",Q=q=>{const de=new Gn(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ht=>function at(q,de){return st.apply(this,arguments)}(de,ht)),de},B=q=>{const de=q.getProvider("messaging").getImmediate();return{getToken:Ke=>function ne(q,de){return ot.apply(this,arguments)}(de,Ke)}};function be(){return nt.apply(this,arguments)}function nt(){return(nt=(0,_.Z)(function*(){try{yield(0,me.eu)()}catch(q){return!1}return"undefined"!=typeof window&&(0,me.hl)()&&(0,me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function tn(q=(0,_e.getApp)()){return be().then(de=>{if(!de)throw Gt.create("unsupported-browser")},de=>{throw Gt.create("indexed-db-unsupported")}),(0,_e._getProvider)((0,me.m9)(q),"messaging").getImmediate()}!function j(){(0,_e._registerComponent)(new N.wA("messaging",Q,"PUBLIC")),(0,_e._registerComponent)(new N.wA("messaging-internal",B,"PRIVATE")),(0,_e.registerVersion)(Xe,"0.9.8"),(0,_e.registerVersion)(Xe,"0.9.8","esm2017")}()},3226:(Tt,Me,x)=>{"use strict";x.d(Me,{sN:()=>ke,Gb:()=>bn});var _=x(5861),O=x(9681),N=x(2090),oe=x(4859),me=x(1877);x(2833);const se="@firebase/remote-config",V="remote-config",Y=new N.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function ke(Ae=(0,O.getApp)()){return Ae=(0,N.m9)(Ae),(0,O._getProvider)(Ae,V).getImmediate()}class le{constructor(he,Pe,qe,Et){this.client=he,this.storage=Pe,this.storageCache=qe,this.logger=Et}isCachedDataFresh(he,Pe){if(!Pe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const qe=Date.now()-Pe,Et=qe<=he;return this.logger.debug(`Config fetch cache check. Cache age millis: ${qe}. Cache max age millis (minimumFetchIntervalMillis setting): ${he}. Is cache hit: ${Et}.`),Et}fetch(he){var Pe=this;return(0,_.Z)(function*(){const[qe,Et]=yield Promise.all([Pe.storage.getLastSuccessfulFetchTimestampMillis(),Pe.storage.getLastSuccessfulFetchResponse()]);if(Et&&Pe.isCachedDataFresh(he.cacheMaxAgeMillis,qe))return Et;he.eTag=Et&&Et.eTag;const Je=yield Pe.client.fetch(he),tt=[Pe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Je.status&&tt.push(Pe.storage.setLastSuccessfulFetchResponse(Je)),yield Promise.all(tt),Je})()}}function Dt(Ae=navigator){return Ae.languages&&Ae.languages[0]||Ae.language}class Bt{constructor(he,Pe,qe,Et,Je,tt){this.firebaseInstallations=he,this.sdkVersion=Pe,this.namespace=qe,this.projectId=Et,this.apiKey=Je,this.appId=tt}fetch(he){var Pe=this;return(0,_.Z)(function*(){const[qe,Et]=yield Promise.all([Pe.firebaseInstallations.getId(),Pe.firebaseInstallations.getToken()]),tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Pe.projectId}/namespaces/${Pe.namespace}:fetch?key=${Pe.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":he.eTag||"*"},Ft={sdk_version:Pe.sdkVersion,app_instance_id:qe,app_instance_id_token:Et,app_id:Pe.appId,language_code:Dt()},zt={method:"POST",headers:St,body:JSON.stringify(Ft)},yt=fetch(tt,zt),dt=new Promise((wn,en)=>{he.signal.addEventListener(()=>{const F=new Error("The operation was aborted.");F.name="AbortError",en(F)})});let it;try{yield Promise.race([yt,dt]),it=yield yt}catch(wn){let en="fetch-client-network";throw"AbortError"===wn.name&&(en="fetch-timeout"),Y.create(en,{originalErrorMessage:wn.message})}let Un=it.status;const Tr=it.headers.get("ETag")||void 0;let Wt,Gn;if(200===it.status){let wn;try{wn=yield it.json()}catch(en){throw Y.create("fetch-client-parse",{originalErrorMessage:en.message})}Wt=wn.entries,Gn=wn.state}if("INSTANCE_STATE_UNSPECIFIED"===Gn?Un=500:"NO_CHANGE"===Gn?Un=304:("NO_TEMPLATE"===Gn||"EMPTY_CONFIG"===Gn)&&(Wt={}),304!==Un&&200!==Un)throw Y.create("fetch-status",{httpStatus:Un});return{status:Un,eTag:Tr,config:Wt}})()}}class pt{constructor(he,Pe){this.client=he,this.storage=Pe}fetch(he){var Pe=this;return(0,_.Z)(function*(){const qe=(yield Pe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Pe.attemptFetch(he,qe)})()}attemptFetch(he,{throttleEndTimeMillis:Pe,backoffCount:qe}){var Et=this;return(0,_.Z)(function*(){yield function _n(Ae,he){return new Promise((Pe,qe)=>{const Et=Math.max(he-Date.now(),0),Je=setTimeout(Pe,Et);Ae.addEventListener(()=>{clearTimeout(Je),qe(Y.create("fetch-throttle",{throttleEndTimeMillis:he}))})})}(he.signal,Pe);try{const Je=yield Et.client.fetch(he);return yield Et.storage.deleteThrottleMetadata(),Je}catch(Je){if(!function ut(Ae){if(!(Ae instanceof N.ZR&&Ae.customData))return!1;const he=Number(Ae.customData.httpStatus);return 429===he||500===he||503===he||504===he}(Je))throw Je;const tt={throttleEndTimeMillis:Date.now()+(0,N.$s)(qe),backoffCount:qe+1};return yield Et.storage.setThrottleMetadata(tt),Et.attemptFetch(he,tt)}})()}}class Bn{constructor(he,Pe,qe,Et,Je){this.app=he,this._client=Pe,this._storageCache=qe,this._storage=Et,this._logger=Je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ht(Ae,he){const Pe=Ae.target.error||void 0;return Y.create(he,{originalErrorMessage:Pe&&Pe.message})}const kt="app_namespace_store";class jt{constructor(he,Pe,qe,Et=function mt(){return new Promise((Ae,he)=>{try{const Pe=indexedDB.open("firebase_remote_config",1);Pe.onerror=qe=>{he(Ht(qe,"storage-open"))},Pe.onsuccess=qe=>{Ae(qe.target.result)},Pe.onupgradeneeded=qe=>{0===qe.oldVersion&&qe.target.result.createObjectStore(kt,{keyPath:"compositeKey"})}}catch(Pe){he(Y.create("storage-open",{originalErrorMessage:Pe}))}})}()){this.appId=he,this.appName=Pe,this.namespace=qe,this.openDbPromise=Et}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(he){return this.set("last_fetch_status",he)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(he){return this.set("last_successful_fetch_timestamp_millis",he)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(he){return this.set("last_successful_fetch_response",he)}getActiveConfig(){return this.get("active_config")}setActiveConfig(he){return this.set("active_config",he)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(he){return this.set("active_config_etag",he)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(he){return this.set("throttle_metadata",he)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(he){var Pe=this;return(0,_.Z)(function*(){const qe=yield Pe.openDbPromise;return new Promise((Et,Je)=>{const St=qe.transaction([kt],"readonly").objectStore(kt),Ft=Pe.createCompositeKey(he);try{const zt=St.get(Ft);zt.onerror=yt=>{Je(Ht(yt,"storage-get"))},zt.onsuccess=yt=>{const dt=yt.target.result;Et(dt?dt.value:void 0)}}catch(zt){Je(Y.create("storage-get",{originalErrorMessage:zt&&zt.message}))}})})()}set(he,Pe){var qe=this;return(0,_.Z)(function*(){const Et=yield qe.openDbPromise;return new Promise((Je,tt)=>{const Ft=Et.transaction([kt],"readwrite").objectStore(kt),zt=qe.createCompositeKey(he);try{const yt=Ft.put({compositeKey:zt,value:Pe});yt.onerror=dt=>{tt(Ht(dt,"storage-set"))},yt.onsuccess=()=>{Je()}}catch(yt){tt(Y.create("storage-set",{originalErrorMessage:yt&&yt.message}))}})})()}delete(he){var Pe=this;return(0,_.Z)(function*(){const qe=yield Pe.openDbPromise;return new Promise((Et,Je)=>{const St=qe.transaction([kt],"readwrite").objectStore(kt),Ft=Pe.createCompositeKey(he);try{const zt=St.delete(Ft);zt.onerror=yt=>{Je(Ht(yt,"storage-delete"))},zt.onsuccess=()=>{Et()}}catch(zt){Je(Y.create("storage-delete",{originalErrorMessage:zt&&zt.message}))}})})()}createCompositeKey(he){return[this.appId,this.appName,this.namespace,he].join()}}class Xt{constructor(he){this.storage=he}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var he=this;return(0,_.Z)(function*(){const Pe=he.storage.getLastFetchStatus(),qe=he.storage.getLastSuccessfulFetchTimestampMillis(),Et=he.storage.getActiveConfig(),Je=yield Pe;Je&&(he.lastFetchStatus=Je);const tt=yield qe;tt&&(he.lastSuccessfulFetchTimestampMillis=tt);const St=yield Et;St&&(he.activeConfig=St)})()}setLastFetchStatus(he){return this.lastFetchStatus=he,this.storage.setLastFetchStatus(he)}setLastSuccessfulFetchTimestampMillis(he){return this.lastSuccessfulFetchTimestampMillis=he,this.storage.setLastSuccessfulFetchTimestampMillis(he)}setActiveConfig(he){return this.activeConfig=he,this.storage.setActiveConfig(he)}}function bn(){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(){if(!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch(Ae){return!1}})).apply(this,arguments)}!function qt(){(0,O._registerComponent)(new oe.wA(V,function Ae(he,{instanceIdentifier:Pe}){const qe=he.getProvider("app").getImmediate(),Et=he.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Y.create("registration-window");if(!(0,N.hl)())throw Y.create("indexed-db-unavailable");const{projectId:Je,apiKey:tt,appId:St}=qe.options;if(!Je)throw Y.create("registration-project-id");if(!tt)throw Y.create("registration-api-key");if(!St)throw Y.create("registration-app-id");const Ft=new jt(St,qe.name,Pe=Pe||"firebase"),zt=new Xt(Ft),yt=new me.Yd(se);yt.logLevel=me.in.ERROR;const dt=new Bt(Et,O.SDK_VERSION,Pe,Je,tt,St),it=new pt(dt,Ft),Un=new le(it,Ft,zt,yt),Tr=new Bn(qe,Un,zt,Ft,yt);return function Ce(Ae){const he=(0,N.m9)(Ae);he._initializePromise||(he._initializePromise=he._storageCache.loadFromStorage().then(()=>{he._isInitializationComplete=!0}))}(Tr),Tr},"PUBLIC").setMultipleInstances(!0)),(0,O.registerVersion)(se,"0.3.4"),(0,O.registerVersion)(se,"0.3.4","esm2017")}()},2940:function(Tt,Me){!function(x){"use strict";function _(G){return Array.prototype.slice.call(G)}function O(G){return new Promise(function(ie,ke){G.onsuccess=function(){ie(G.result)},G.onerror=function(){ke(G.error)}})}function N(G,ie,ke){var Re,ue=new Promise(function(Ce,ye){O(Re=G[ie].apply(G,ke)).then(Ce,ye)});return ue.request=Re,ue}function oe(G,ie,ke){var Re=N(G,ie,ke);return Re.then(function(ue){if(ue)return new V(ue,Re.request)})}function me(G,ie,ke){ke.forEach(function(Re){Object.defineProperty(G.prototype,Re,{get:function(){return this[ie][Re]},set:function(ue){this[ie][Re]=ue}})})}function _e(G,ie,ke,Re){Re.forEach(function(ue){ue in ke.prototype&&(G.prototype[ue]=function(){return N(this[ie],ue,arguments)})})}function se(G,ie,ke,Re){Re.forEach(function(ue){ue in ke.prototype&&(G.prototype[ue]=function(){return this[ie][ue].apply(this[ie],arguments)})})}function ce(G,ie,ke,Re){Re.forEach(function(ue){ue in ke.prototype&&(G.prototype[ue]=function(){return oe(this[ie],ue,arguments)})})}function ge(G){this._index=G}function V(G,ie){this._cursor=G,this._request=ie}function U(G){this._store=G}function Y(G){this._tx=G,this.complete=new Promise(function(ie,ke){G.oncomplete=function(){ie()},G.onerror=function(){ke(G.error)},G.onabort=function(){ke(G.error)}})}function Ue(G,ie,ke){this._db=G,this.oldVersion=ie,this.transaction=new Y(ke)}function xe(G){this._db=G}me(ge,"_index",["name","keyPath","multiEntry","unique"]),_e(ge,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ce(ge,"_index",IDBIndex,["openCursor","openKeyCursor"]),me(V,"_cursor",["direction","key","primaryKey","value"]),_e(V,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(G){G in IDBCursor.prototype&&(V.prototype[G]=function(){var ie=this,ke=arguments;return Promise.resolve().then(function(){return ie._cursor[G].apply(ie._cursor,ke),O(ie._request).then(function(Re){if(Re)return new V(Re,ie._request)})})})}),U.prototype.createIndex=function(){return new ge(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new ge(this._store.index.apply(this._store,arguments))},me(U,"_store",["name","keyPath","indexNames","autoIncrement"]),_e(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ce(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),se(U,"_store",IDBObjectStore,["deleteIndex"]),Y.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},me(Y,"_tx",["objectStoreNames","mode"]),se(Y,"_tx",IDBTransaction,["abort"]),Ue.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},me(Ue,"_db",["name","version","objectStoreNames"]),se(Ue,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new Y(this._db.transaction.apply(this._db,arguments))},me(xe,"_db",["name","version","objectStoreNames"]),se(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(G){[U,ge].forEach(function(ie){G in ie.prototype&&(ie.prototype[G.replace("open","iterate")]=function(){var ke=_(arguments),Re=ke[ke.length-1],ue=this._store||this._index,Ce=ue[G].apply(ue,ke.slice(0,-1));Ce.onsuccess=function(){Re(Ce.result)}})})}),[ge,U].forEach(function(G){G.prototype.getAll||(G.prototype.getAll=function(ie,ke){var Re=this,ue=[];return new Promise(function(Ce){Re.iterateCursor(ie,function(ye){ye?(ue.push(ye.value),void 0===ke||ue.length!=ke?ye.continue():Ce(ue)):Ce(ue)})})})}),x.openDb=function je(G,ie,ke){var Re=N(indexedDB,"open",[G,ie]),ue=Re.request;return ue&&(ue.onupgradeneeded=function(Ce){ke&&ke(new Ue(ue.result,Ce.oldVersion,ue.transaction))}),Re.then(function(Ce){return new xe(Ce)})},x.deleteDb=function Le(G){return N(indexedDB,"deleteDatabase",[G])},Object.defineProperty(x,"__esModule",{value:!0})}(Me)},8306:(Tt,Me,x)=>{"use strict";x.d(Me,{y:()=>V});var _=x(2961),O=x(727),N=x(8822),oe=x(4671);var se=x(2416),ce=x(576),ge=x(2806);let V=(()=>{class xe{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const G=new xe;return G.source=this,G.operator=Le,G}subscribe(Le,G,ie){const ke=function Ue(xe){return xe&&xe instanceof _.Lv||function Y(xe){return xe&&(0,ce.m)(xe.next)&&(0,ce.m)(xe.error)&&(0,ce.m)(xe.complete)}(xe)&&(0,O.Nn)(xe)}(Le)?Le:new _.Hp(Le,G,ie);return(0,ge.x)(()=>{const{operator:Re,source:ue}=this;ke.add(Re?Re.call(ke,ue):ue?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(Le){try{return this._subscribe(Le)}catch(G){Le.error(G)}}forEach(Le,G){return new(G=U(G))((ie,ke)=>{const Re=new _.Hp({next:ue=>{try{Le(ue)}catch(Ce){ke(Ce),Re.unsubscribe()}},error:ke,complete:ie});this.subscribe(Re)})}_subscribe(Le){var G;return null===(G=this.source)||void 0===G?void 0:G.subscribe(Le)}[N.L](){return this}pipe(...Le){return function _e(xe){return 0===xe.length?oe.y:1===xe.length?xe[0]:function(Le){return xe.reduce((G,ie)=>ie(G),Le)}}(Le)(this)}toPromise(Le){return new(Le=U(Le))((G,ie)=>{let ke;this.subscribe(Re=>ke=Re,Re=>ie(Re),()=>G(ke))})}}return xe.create=je=>new xe(je),xe})();function U(xe){var je;return null!==(je=null!=xe?xe:se.v.Promise)&&void 0!==je?je:Promise}},7579:(Tt,Me,x)=>{"use strict";x.d(Me,{x:()=>se});var _=x(8306),O=x(727);const oe=(0,x(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=x(8737),_e=x(2806);let se=(()=>{class ge extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Y=new ce(this,this);return Y.operator=U,Y}_throwIfClosed(){if(this.closed)throw new oe}next(U){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Y=this.observers.slice();for(const Ue of Y)Ue.next(U)}})}error(U){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Y}=this;for(;Y.length;)Y.shift().error(U)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Y,isStopped:Ue,observers:xe}=this;return Y||Ue?O.Lc:(xe.push(U),new O.w0(()=>(0,me.P)(xe,U)))}_checkFinalizedStatuses(U){const{hasError:Y,thrownError:Ue,isStopped:xe}=this;Y?U.error(Ue):xe&&U.complete()}asObservable(){const U=new _.y;return U.source=this,U}}return ge.create=(V,U)=>new ce(V,U),ge})();class ce extends se{constructor(V,U){super(),this.destination=V,this.source=U}next(V){var U,Y;null===(Y=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Y||Y.call(U,V)}error(V){var U,Y;null===(Y=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Y||Y.call(U,V)}complete(){var V,U;null===(U=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===U||U.call(V)}_subscribe(V){var U,Y;return null!==(Y=null===(U=this.source)||void 0===U?void 0:U.subscribe(V))&&void 0!==Y?Y:O.Lc}}},2961:(Tt,Me,x)=>{"use strict";x.d(Me,{Hp:()=>Le,Lv:()=>Y});var _=x(576),O=x(727),N=x(2416),oe=x(7849);function me(){}const _e=ge("C",void 0,void 0);function ge(ue,Ce,ye){return{kind:ue,value:Ce,error:ye}}var V=x(3410),U=x(2806);class Y extends O.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,O.Nn)(Ce)&&Ce.add(this)):this.destination=Re}static create(Ce,ye,Qe){return new Le(Ce,ye,Qe)}next(Ce){this.isStopped?ke(function ce(ue){return ge("N",ue,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?ke(function se(ue){return ge("E",void 0,ue)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?ke(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function xe(ue,Ce){return Ue.call(ue,Ce)}class je{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:ye}=this;if(ye.next)try{ye.next(Ce)}catch(Qe){G(Qe)}}error(Ce){const{partialObserver:ye}=this;if(ye.error)try{ye.error(Ce)}catch(Qe){G(Qe)}else G(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(ye){G(ye)}}}class Le extends Y{constructor(Ce,ye,Qe){let J;if(super(),(0,_.m)(Ce)||!Ce)J={next:null!=Ce?Ce:void 0,error:null!=ye?ye:void 0,complete:null!=Qe?Qe:void 0};else{let ct;this&&N.v.useDeprecatedNextContext?(ct=Object.create(Ce),ct.unsubscribe=()=>this.unsubscribe(),J={next:Ce.next&&xe(Ce.next,ct),error:Ce.error&&xe(Ce.error,ct),complete:Ce.complete&&xe(Ce.complete,ct)}):J=Ce}this.destination=new je(J)}}function G(ue){N.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(ue):(0,oe.h)(ue)}function ke(ue,Ce){const{onStoppedNotification:ye}=N.v;ye&&V.z.setTimeout(()=>ye(ue,Ce))}const Re={closed:!0,next:me,error:function ie(ue){throw ue},complete:me}},727:(Tt,Me,x)=>{"use strict";x.d(Me,{Lc:()=>_e,w0:()=>me,Nn:()=>se});var _=x(576);const N=(0,x(3888).d)(ge=>function(U){ge(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Y,Ue)=>`${Ue+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var oe=x(8737);class me{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const xe of U)xe.remove(this);else U.remove(this);const{initialTeardown:Y}=this;if((0,_.m)(Y))try{Y()}catch(xe){V=xe instanceof N?xe.errors:[xe]}const{_teardowns:Ue}=this;if(Ue){this._teardowns=null;for(const xe of Ue)try{ce(xe)}catch(je){V=null!=V?V:[],je instanceof N?V=[...V,...je.errors]:V.push(je)}}if(V)throw new N(V)}}add(V){var U;if(V&&V!==this)if(this.closed)ce(V);else{if(V instanceof me){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._teardowns=null!==(U=this._teardowns)&&void 0!==U?U:[]).push(V)}}_hasParent(V){const{_parentage:U}=this;return U===V||Array.isArray(U)&&U.includes(V)}_addParent(V){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(V),U):U?[U,V]:V}_removeParent(V){const{_parentage:U}=this;U===V?this._parentage=null:Array.isArray(U)&&(0,oe.P)(U,V)}remove(V){const{_teardowns:U}=this;U&&(0,oe.P)(U,V),V instanceof me&&V._removeParent(this)}}me.EMPTY=(()=>{const ge=new me;return ge.closed=!0,ge})();const _e=me.EMPTY;function se(ge){return ge instanceof me||ge&&"closed"in ge&&(0,_.m)(ge.remove)&&(0,_.m)(ge.add)&&(0,_.m)(ge.unsubscribe)}function ce(ge){(0,_.m)(ge)?ge():ge.unsubscribe()}},2416:(Tt,Me,x)=>{"use strict";x.d(Me,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Tt,Me,x)=>{"use strict";x.d(Me,{E:()=>O});const O=new(x(8306).y)(me=>me.complete())},8996:(Tt,Me,x)=>{"use strict";x.d(Me,{D:()=>Ce});var _=x(8421),O=x(5363),N=x(9468),_e=x(8306),ce=x(2202),ge=x(576),V=x(9672);function Y(ye,Qe){if(!ye)throw new Error("Iterable cannot be null");return new _e.y(J=>{(0,V.f)(J,Qe,()=>{const ct=ye[Symbol.asyncIterator]();(0,V.f)(J,Qe,()=>{ct.next().then(Z=>{Z.done?J.complete():J.next(Z.value)})},0,!0)})})}var Ue=x(3670),xe=x(8239),je=x(1144),Le=x(6495),G=x(2206),ie=x(4532),ke=x(3260);function Ce(ye,Qe){return Qe?function ue(ye,Qe){if(null!=ye){if((0,Ue.c)(ye))return function oe(ye,Qe){return(0,_.Xf)(ye).pipe((0,N.R)(Qe),(0,O.Q)(Qe))}(ye,Qe);if((0,je.z)(ye))return function se(ye,Qe){return new _e.y(J=>{let ct=0;return Qe.schedule(function(){ct===ye.length?J.complete():(J.next(ye[ct++]),J.closed||this.schedule())})})}(ye,Qe);if((0,xe.t)(ye))return function me(ye,Qe){return(0,_.Xf)(ye).pipe((0,N.R)(Qe),(0,O.Q)(Qe))}(ye,Qe);if((0,G.D)(ye))return Y(ye,Qe);if((0,Le.T)(ye))return function U(ye,Qe){return new _e.y(J=>{let ct;return(0,V.f)(J,Qe,()=>{ct=ye[ce.h](),(0,V.f)(J,Qe,()=>{let Z,pe;try{({value:Z,done:pe}=ct.next())}catch(ae){return void J.error(ae)}pe?J.complete():J.next(Z)},0,!0)}),()=>(0,ge.m)(null==ct?void 0:ct.return)&&ct.return()})}(ye,Qe);if((0,ke.L)(ye))return function Re(ye,Qe){return Y((0,ke.Q)(ye),Qe)}(ye,Qe)}throw(0,ie.z)(ye)}(ye,Qe):(0,_.Xf)(ye)}},8421:(Tt,Me,x)=>{"use strict";x.d(Me,{Xf:()=>Ue});var _=x(655),O=x(1144),N=x(8239),oe=x(8306),me=x(3670),_e=x(2206),se=x(4532),ce=x(6495),ge=x(3260),V=x(576),U=x(7849),Y=x(8822);function Ue(ue){if(ue instanceof oe.y)return ue;if(null!=ue){if((0,me.c)(ue))return function xe(ue){return new oe.y(Ce=>{const ye=ue[Y.L]();if((0,V.m)(ye.subscribe))return ye.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ue);if((0,O.z)(ue))return function je(ue){return new oe.y(Ce=>{for(let ye=0;ye<ue.length&&!Ce.closed;ye++)Ce.next(ue[ye]);Ce.complete()})}(ue);if((0,N.t)(ue))return function Le(ue){return new oe.y(Ce=>{ue.then(ye=>{Ce.closed||(Ce.next(ye),Ce.complete())},ye=>Ce.error(ye)).then(null,U.h)})}(ue);if((0,_e.D)(ue))return ie(ue);if((0,ce.T)(ue))return function G(ue){return new oe.y(Ce=>{for(const ye of ue)if(Ce.next(ye),Ce.closed)return;Ce.complete()})}(ue);if((0,ge.L)(ue))return function ke(ue){return ie((0,ge.Q)(ue))}(ue)}throw(0,se.z)(ue)}function ie(ue){return new oe.y(Ce=>{(function Re(ue,Ce){var ye,Qe,J,ct;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ye=(0,_.KL)(ue);!(Qe=yield ye.next()).done;)if(Ce.next(Qe.value),Ce.closed)return}catch(Z){J={error:Z}}finally{try{Qe&&!Qe.done&&(ct=ye.return)&&(yield ct.call(ye))}finally{if(J)throw J.error}}Ce.complete()})})(ue,Ce).catch(ye=>Ce.error(ye))})}},6451:(Tt,Me,x)=>{"use strict";x.d(Me,{T:()=>_e});var _=x(8189),O=x(8421),N=x(515),oe=x(7669),me=x(8996);function _e(...se){const ce=(0,oe.yG)(se),ge=(0,oe._6)(se,1/0),V=se;return V.length?1===V.length?(0,O.Xf)(V[0]):(0,_.J)(ge)((0,me.D)(V,ce)):N.E}},5403:(Tt,Me,x)=>{"use strict";x.d(Me,{x:()=>O,Q:()=>N});var _=x(2961);function O(oe,me,_e,se,ce){return new N(oe,me,_e,se,ce)}class N extends _.Lv{constructor(me,_e,se,ce,ge,V){super(me),this.onFinalize=ge,this.shouldUnsubscribe=V,this._next=_e?function(U){try{_e(U)}catch(Y){me.error(Y)}}:super._next,this._error=ce?function(U){try{ce(U)}catch(Y){me.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(U){me.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},4004:(Tt,Me,x)=>{"use strict";x.d(Me,{U:()=>N});var _=x(4482),O=x(5403);function N(oe,me){return(0,_.e)((_e,se)=>{let ce=0;_e.subscribe((0,O.x)(se,ge=>{se.next(oe.call(me,ge,ce++))}))})}},8189:(Tt,Me,x)=>{"use strict";x.d(Me,{J:()=>N});var _=x(5577),O=x(4671);function N(oe=1/0){return(0,_.z)(O.y,oe)}},5577:(Tt,Me,x)=>{"use strict";x.d(Me,{z:()=>ce});var _=x(4004),O=x(8421),N=x(4482),oe=x(9672),me=x(5403),se=x(576);function ce(ge,V,U=1/0){return(0,se.m)(V)?ce((Y,Ue)=>(0,_.U)((xe,je)=>V(Y,xe,Ue,je))((0,O.Xf)(ge(Y,Ue))),U):("number"==typeof V&&(U=V),(0,N.e)((Y,Ue)=>function _e(ge,V,U,Y,Ue,xe,je,Le){const G=[];let ie=0,ke=0,Re=!1;const ue=()=>{Re&&!G.length&&!ie&&V.complete()},Ce=Qe=>ie<Y?ye(Qe):G.push(Qe),ye=Qe=>{xe&&V.next(Qe),ie++;let J=!1;(0,O.Xf)(U(Qe,ke++)).subscribe((0,me.x)(V,ct=>{null==Ue||Ue(ct),xe?Ce(ct):V.next(ct)},()=>{J=!0},void 0,()=>{if(J)try{for(ie--;G.length&&ie<Y;){const ct=G.shift();je?(0,oe.f)(V,je,()=>ye(ct)):ye(ct)}ue()}catch(ct){V.error(ct)}}))};return ge.subscribe((0,me.x)(V,Ce,()=>{Re=!0,ue()})),()=>{null==Le||Le()}}(Y,Ue,ge,U)))}},5363:(Tt,Me,x)=>{"use strict";x.d(Me,{Q:()=>oe});var _=x(9672),O=x(4482),N=x(5403);function oe(me,_e=0){return(0,O.e)((se,ce)=>{se.subscribe((0,N.x)(ce,ge=>(0,_.f)(ce,me,()=>ce.next(ge),_e),()=>(0,_.f)(ce,me,()=>ce.complete(),_e),ge=>(0,_.f)(ce,me,()=>ce.error(ge),_e)))})}},3099:(Tt,Me,x)=>{"use strict";x.d(Me,{B:()=>_e});var _=x(8996),O=x(5698),N=x(7579),oe=x(2961),me=x(4482);function _e(ce={}){const{connector:ge=(()=>new N.x),resetOnError:V=!0,resetOnComplete:U=!0,resetOnRefCountZero:Y=!0}=ce;return Ue=>{let xe=null,je=null,Le=null,G=0,ie=!1,ke=!1;const Re=()=>{null==je||je.unsubscribe(),je=null},ue=()=>{Re(),xe=Le=null,ie=ke=!1},Ce=()=>{const ye=xe;ue(),null==ye||ye.unsubscribe()};return(0,me.e)((ye,Qe)=>{G++,!ke&&!ie&&Re();const J=Le=null!=Le?Le:ge();Qe.add(()=>{G--,0===G&&!ke&&!ie&&(je=se(Ce,Y))}),J.subscribe(Qe),xe||(xe=new oe.Hp({next:ct=>J.next(ct),error:ct=>{ke=!0,Re(),je=se(ue,V,ct),J.error(ct)},complete:()=>{ie=!0,Re(),je=se(ue,U),J.complete()}}),(0,_.D)(ye).subscribe(xe))})(Ue)}}function se(ce,ge,...V){return!0===ge?(ce(),null):!1===ge?null:ge(...V).pipe((0,O.q)(1)).subscribe(()=>ce())}},9468:(Tt,Me,x)=>{"use strict";x.d(Me,{R:()=>O});var _=x(4482);function O(N,oe=0){return(0,_.e)((me,_e)=>{_e.add(N.schedule(()=>me.subscribe(_e),oe))})}},5698:(Tt,Me,x)=>{"use strict";x.d(Me,{q:()=>oe});var _=x(515),O=x(4482),N=x(5403);function oe(me){return me<=0?()=>_.E:(0,O.e)((_e,se)=>{let ce=0;_e.subscribe((0,N.x)(se,ge=>{++ce<=me&&(se.next(ge),me<=ce&&se.complete())}))})}},8505:(Tt,Me,x)=>{"use strict";x.d(Me,{b:()=>me});var _=x(576),O=x(4482),N=x(5403),oe=x(4671);function me(_e,se,ce){const ge=(0,_.m)(_e)||se||ce?{next:_e,error:se,complete:ce}:_e;return ge?(0,O.e)((V,U)=>{var Y;null===(Y=ge.subscribe)||void 0===Y||Y.call(ge);let Ue=!0;V.subscribe((0,N.x)(U,xe=>{var je;null===(je=ge.next)||void 0===je||je.call(ge,xe),U.next(xe)},()=>{var xe;Ue=!1,null===(xe=ge.complete)||void 0===xe||xe.call(ge),U.complete()},xe=>{var je;Ue=!1,null===(je=ge.error)||void 0===je||je.call(ge,xe),U.error(xe)},()=>{var xe,je;Ue&&(null===(xe=ge.unsubscribe)||void 0===xe||xe.call(ge)),null===(je=ge.finalize)||void 0===je||je.call(ge)}))}):oe.y}},4408:(Tt,Me,x)=>{"use strict";x.d(Me,{o:()=>me});var _=x(727);class O extends _.w0{constructor(se,ce){super()}schedule(se,ce=0){return this}}const N={setInterval(..._e){const{delegate:se}=N;return((null==se?void 0:se.setInterval)||setInterval)(..._e)},clearInterval(_e){const{delegate:se}=N;return((null==se?void 0:se.clearInterval)||clearInterval)(_e)},delegate:void 0};var oe=x(8737);class me extends O{constructor(se,ce){super(se,ce),this.scheduler=se,this.work=ce,this.pending=!1}schedule(se,ce=0){if(this.closed)return this;this.state=se;const ge=this.id,V=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(V,ge,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(V,this.id,ce),this}requestAsyncId(se,ce,ge=0){return N.setInterval(se.flush.bind(se,this),ge)}recycleAsyncId(se,ce,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ce;N.clearInterval(ce)}execute(se,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(se,ce);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ce){let V,ge=!1;try{this.work(se)}catch(U){ge=!0,V=U||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:se,scheduler:ce}=this,{actions:ge}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ge,this),null!=se&&(this.id=this.recycleAsyncId(ce,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Tt,Me,x)=>{"use strict";x.d(Me,{v:()=>N});var _=x(6063);class O{constructor(me,_e=O.now){this.schedulerActionCtor=me,this.now=_e}schedule(me,_e=0,se){return new this.schedulerActionCtor(this,me).schedule(se,_e)}}O.now=_.l.now;class N extends O{constructor(me,_e=O.now){super(me,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(me){const{actions:_e}=this;if(this._active)return void _e.push(me);let se;this._active=!0;do{if(se=me.execute(me.state,me.delay))break}while(me=_e.shift());if(this._active=!1,se){for(;me=_e.shift();)me.unsubscribe();throw se}}}},4986:(Tt,Me,x)=>{"use strict";x.d(Me,{z:()=>N});var _=x(4408);const N=new(x(7565).v)(_.o)},6063:(Tt,Me,x)=>{"use strict";x.d(Me,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Tt,Me,x)=>{"use strict";x.d(Me,{z:()=>_});const _={setTimeout(...O){const{delegate:N}=_;return((null==N?void 0:N.setTimeout)||setTimeout)(...O)},clearTimeout(O){const{delegate:N}=_;return((null==N?void 0:N.clearTimeout)||clearTimeout)(O)},delegate:void 0}},2202:(Tt,Me,x)=>{"use strict";x.d(Me,{h:()=>O});const O=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Tt,Me,x)=>{"use strict";x.d(Me,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Tt,Me,x)=>{"use strict";x.d(Me,{_6:()=>_e,jO:()=>oe,yG:()=>me});var _=x(576);function N(se){return se[se.length-1]}function oe(se){return(0,_.m)(N(se))?se.pop():void 0}function me(se){return function O(se){return se&&(0,_.m)(se.schedule)}(N(se))?se.pop():void 0}function _e(se,ce){return"number"==typeof N(se)?se.pop():ce}},8737:(Tt,Me,x)=>{"use strict";function _(O,N){if(O){const oe=O.indexOf(N);0<=oe&&O.splice(oe,1)}}x.d(Me,{P:()=>_})},3888:(Tt,Me,x)=>{"use strict";function _(O){const oe=O(me=>{Error.call(me),me.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}x.d(Me,{d:()=>_})},2806:(Tt,Me,x)=>{"use strict";x.d(Me,{x:()=>N,O:()=>oe});var _=x(2416);let O=null;function N(me){if(_.v.useDeprecatedSynchronousErrorHandling){const _e=!O;if(_e&&(O={errorThrown:!1,error:null}),me(),_e){const{errorThrown:se,error:ce}=O;if(O=null,se)throw ce}}else me()}function oe(me){_.v.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=me)}},9672:(Tt,Me,x)=>{"use strict";function _(O,N,oe,me=0,_e=!1){const se=N.schedule(function(){oe(),_e?O.add(this.schedule(null,me)):this.unsubscribe()},me);if(O.add(se),!_e)return se}x.d(Me,{f:()=>_})},4671:(Tt,Me,x)=>{"use strict";function _(O){return O}x.d(Me,{y:()=>_})},1144:(Tt,Me,x)=>{"use strict";x.d(Me,{z:()=>_});const _=O=>O&&"number"==typeof O.length&&"function"!=typeof O},2206:(Tt,Me,x)=>{"use strict";x.d(Me,{D:()=>O});var _=x(576);function O(N){return Symbol.asyncIterator&&(0,_.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Tt,Me,x)=>{"use strict";function _(O){return"function"==typeof O}x.d(Me,{m:()=>_})},3670:(Tt,Me,x)=>{"use strict";x.d(Me,{c:()=>N});var _=x(8822),O=x(576);function N(oe){return(0,O.m)(oe[_.L])}},6495:(Tt,Me,x)=>{"use strict";x.d(Me,{T:()=>N});var _=x(2202),O=x(576);function N(oe){return(0,O.m)(null==oe?void 0:oe[_.h])}},8239:(Tt,Me,x)=>{"use strict";x.d(Me,{t:()=>O});var _=x(576);function O(N){return(0,_.m)(null==N?void 0:N.then)}},3260:(Tt,Me,x)=>{"use strict";x.d(Me,{Q:()=>N,L:()=>oe});var _=x(655),O=x(576);function N(me){return(0,_.FC)(this,arguments,function*(){const se=me.getReader();try{for(;;){const{value:ce,done:ge}=yield(0,_.qq)(se.read());if(ge)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ce)}}finally{se.releaseLock()}})}function oe(me){return(0,O.m)(null==me?void 0:me.getReader)}},4482:(Tt,Me,x)=>{"use strict";x.d(Me,{A:()=>O,e:()=>N});var _=x(576);function O(oe){return(0,_.m)(null==oe?void 0:oe.lift)}function N(oe){return me=>{if(O(me))return me.lift(function(_e){try{return oe(_e,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Tt,Me,x)=>{"use strict";x.d(Me,{h:()=>N});var _=x(2416),O=x(3410);function N(oe){O.z.setTimeout(()=>{const{onUnhandledError:me}=_.v;if(!me)throw oe;me(oe)})}},4532:(Tt,Me,x)=>{"use strict";function _(O){return new TypeError(`You provided ${null!==O&&"object"==typeof O?"an invalid object":`'${O}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(Me,{z:()=>_})},655:(Tt,Me,x)=>{"use strict";function oe(Z,pe){var ae={};for(var fe in Z)Object.prototype.hasOwnProperty.call(Z,fe)&&pe.indexOf(fe)<0&&(ae[fe]=Z[fe]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(fe=Object.getOwnPropertySymbols(Z);$e<fe.length;$e++)pe.indexOf(fe[$e])<0&&Object.prototype.propertyIsEnumerable.call(Z,fe[$e])&&(ae[fe[$e]]=Z[fe[$e]])}return ae}function me(Z,pe,ae,fe){var Dt,$e=arguments.length,le=$e<3?pe:null===fe?fe=Object.getOwnPropertyDescriptor(pe,ae):fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(Z,pe,ae,fe);else for(var Bt=Z.length-1;Bt>=0;Bt--)(Dt=Z[Bt])&&(le=($e<3?Dt(le):$e>3?Dt(pe,ae,le):Dt(pe,ae))||le);return $e>3&&le&&Object.defineProperty(pe,ae,le),le}function ce(Z,pe,ae,fe){return new(ae||(ae=Promise))(function(le,Dt){function Bt(pt){try{ut(fe.next(pt))}catch(Gt){Dt(Gt)}}function _n(pt){try{ut(fe.throw(pt))}catch(Gt){Dt(Gt)}}function ut(pt){pt.done?le(pt.value):function $e(le){return le instanceof ae?le:new ae(function(Dt){Dt(le)})}(pt.value).then(Bt,_n)}ut((fe=fe.apply(Z,pe||[])).next())})}function G(Z){return this instanceof G?(this.v=Z,this):new G(Z)}function ie(Z,pe,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,fe=ae.apply(Z,pe||[]),le=[];return $e={},Dt("next"),Dt("throw"),Dt("return"),$e[Symbol.asyncIterator]=function(){return this},$e;function Dt(yn){fe[yn]&&($e[yn]=function(Bn){return new Promise(function(Ht,kt){le.push([yn,Bn,Ht,kt])>1||Bt(yn,Bn)})})}function Bt(yn,Bn){try{!function _n(yn){yn.value instanceof G?Promise.resolve(yn.value.v).then(ut,pt):Gt(le[0][2],yn)}(fe[yn](Bn))}catch(Ht){Gt(le[0][3],Ht)}}function ut(yn){Bt("next",yn)}function pt(yn){Bt("throw",yn)}function Gt(yn,Bn){yn(Bn),le.shift(),le.length&&Bt(le[0][0],le[0][1])}}function Re(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,pe=Z[Symbol.asyncIterator];return pe?pe.call(Z):(Z=function Y(Z){var pe="function"==typeof Symbol&&Symbol.iterator,ae=pe&&Z[pe],fe=0;if(ae)return ae.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&fe>=Z.length&&(Z=void 0),{value:Z&&Z[fe++],done:!Z}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ae={},fe("next"),fe("throw"),fe("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function fe(le){ae[le]=Z[le]&&function(Dt){return new Promise(function(Bt,_n){!function $e(le,Dt,Bt,_n){Promise.resolve(_n).then(function(ut){le({value:ut,done:Bt})},Dt)}(Bt,_n,(Dt=Z[le](Dt)).done,Dt.value)})}}}x.d(Me,{_T:()=>oe,gn:()=>me,mG:()=>ce,qq:()=>G,FC:()=>ie,KL:()=>Re})},5e3:(Tt,Me,x)=>{"use strict";x.d(Me,{deG:()=>g_,tb:()=>ym,AFp:()=>mm,ip1:()=>iE,CZH:()=>tu,hGG:()=>pi,z2F:()=>Uf,sBO:()=>bE,Sil:()=>cE,_Vd:()=>id,EJc:()=>lE,SBq:()=>wf,qLn:()=>Ih,vpe:()=>Si,tBr:()=>Vs,XFs:()=>Ae,OlP:()=>Zn,zs3:()=>Or,ZZ4:()=>Rm,aQg:()=>xm,soG:()=>vm,LVF:()=>HT,YKP:()=>Ko,h0i:()=>Nl,PXZ:()=>IE,R0b:()=>rs,FiY:()=>Bs,Lbi:()=>_m,g9A:()=>WT,Qsj:()=>uT,FYo:()=>Jg,JOm:()=>ho,tp0:()=>Po,Rgc:()=>Xa,dDg:()=>qT,q4F:()=>If,GfV:()=>Rv,s_b:()=>nm,ifc:()=>yt,eFA:()=>wm,G48:()=>CE,X6Q:()=>XT,_c5:()=>Nm,VLi:()=>yE,c2e:()=>uE,zSh:()=>_g,wAp:()=>Pt,vHH:()=>je,cg1:()=>hv,kL8:()=>FI,dqk:()=>Wt,sIi:()=>jc,CqO:()=>qy,QGY:()=>$o,F4k:()=>Wc,RDi:()=>gp,AaK:()=>ce,TTD:()=>mu,xp6:()=>hw,uIk:()=>Sg,Suo:()=>am,Xpm:()=>Ve,lG2:()=>be,Yz7:()=>Ht,cJS:()=>ze,oAB:()=>Q,Yjl:()=>nt,Y36:()=>Jh,_UZ:()=>er,qZA:()=>Ys,TgZ:()=>Mg,LFG:()=>sr,$8M:()=>xo,$Z:()=>Fr,NdJ:()=>vt,CRH:()=>Gv,ALo:()=>kv,lcZ:()=>Fv,iGM:()=>om,LSH:()=>bc,_uU:()=>AI,hij:()=>sf});var _=x(7579),O=x(727),N=x(8306),oe=x(6451),me=x(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function se(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const V=_e({__forward_ref__:_e});function U(s){return s.__forward_ref__=U,s.toString=function(){return ce(this())},s}function Y(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(V)&&s.__forward_ref__===U}class je extends Error{constructor(o,u){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function G(s){return"string"==typeof s?s:null==s?"":String(s)}function ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():G(s)}function Ce(s,o){const u=o?` in ${o}`:"";throw new je(-201,`No provider for ${ie(s)} found${u}`)}function pt(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}function Ht(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ze(s){return{providers:s.providers||[],imports:s.imports||[]}}function gt(s){return mt(s,Cn)||mt(s,bn)}function mt(s,o){return s.hasOwnProperty(o)?s[o]:null}function qt(s){return s&&(s.hasOwnProperty(xn)||s.hasOwnProperty(zn))?s[xn]:null}const Cn=_e({\u0275prov:_e}),xn=_e({\u0275inj:_e}),bn=_e({ngInjectableDef:_e}),zn=_e({ngInjectorDef:_e});var Ae=(()=>((Ae=Ae||{})[Ae.Default=0]="Default",Ae[Ae.Host=1]="Host",Ae[Ae.Self=2]="Self",Ae[Ae.SkipSelf=4]="SkipSelf",Ae[Ae.Optional=8]="Optional",Ae))();let he;function qe(s){const o=he;return he=s,o}function Et(s,o,u){const l=gt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&Ae.Optional?null:void 0!==o?o:void Ce(ce(s),"Injector")}function tt(s){return{toString:s}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const dt="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,Un="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=dt||"undefined"!=typeof global&&global||it||Un,en={},F=[],H=_e({\u0275cmp:_e}),z=_e({\u0275dir:_e}),Ie=_e({\u0275pipe:_e}),ne=_e({\u0275mod:_e}),ot=_e({\u0275fac:_e}),X=_e({__NG_ELEMENT_ID__:_e});let ve=0;function Ve(s){return tt(()=>{const u={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||F,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c",styles:s.styles||F,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return l.id+=ve++,l.inputs=j(s.inputs,u),l.outputs=j(s.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(st):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(Xe):null,l})}function at(s,o,u){const l=s.\u0275cmp;l.directiveDefs=()=>o.map(st),l.pipeDefs=()=>u.map(Xe)}function st(s){return _t(s)||function Mt(s){return s[z]||null}(s)}function Xe(s){return function on(s){return s[Ie]||null}(s)}const Ct={};function Q(s){return tt(()=>{const o={type:s.type,bootstrap:s.bootstrap||F,declarations:s.declarations||F,imports:s.imports||F,exports:s.exports||F,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Ct[s.id]=s.type),o})}function B(s,o){return tt(()=>{const u=tn(s,!0);u.declarations=o.declarations||F,u.imports=o.imports||F,u.exports=o.exports||F})}function j(s,o){if(null==s)return en;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}const be=Ve;function nt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function _t(s){return s[H]||null}function tn(s,o){const u=s[ne]||null;if(!u&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return u}function ii(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function pu(s){return 0!=(8&s.flags)}function $d(s){return 2==(2&s.flags)}function Io(s){return 1==(1&s.flags)}function ji(s){return null!==s.template}function Hd(s){return 0!=(512&s[2])}function $i(s,o){return s.hasOwnProperty(ot)?s[ot]:null}class Xm{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function mu(){return Hl}function Hl(s){return s.type.prototype.ngOnChanges&&(s.setInput=_u),e_}function e_(){const s=ua(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===en)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function _u(s,o,u,l){const d=ua(s)||function t_(s,o){return s[fp]=o}(s,{previous:en,current:null}),f=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[u],T=y[w];f[w]=new Xm(T&&T.currentValue,o,y===en),s[l]=o}mu.ngInherit=!0;const fp="__ngSimpleChanges__";function ua(s){return s[fp]||null}const zl="math";let Gl;function gp(s){Gl=s}function vu(){return void 0!==Gl?Gl:"undefined"!=typeof document?document:void 0}function Hn(s){return!!s.listen}const Eu={createRenderer:(s,o)=>vu()};function Vn(s){for(;Array.isArray(s);)s=s[0];return s}function la(s,o){return Vn(o[s])}function Vr(s,o){return Vn(o[s.index])}function Kl(s,o){return s.data[o]}function fs(s,o){return s[o]}function si(s,o){const u=o[s];return ii(u)?u:u[0]}function To(s){return 4==(4&s[2])}function ca(s){return 128==(128&s[2])}function Ms(s,o){return null==o?null:s[o]}function so(s){s[18]=0}function Co(s,o){s[5]+=o;let u=s,l=s[3];for(;null!==l&&(1===o&&1===u[5]||-1===o&&0===u[5]);)l[5]+=o,u=l,l=l[3]}const Lt={lFrame:Xd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ql(){return Lt.bindingsEnabled}function i_(){Lt.bindingsEnabled=!0}function Kd(){Lt.bindingsEnabled=!1}function He(){return Lt.lFrame.lView}function fn(){return Lt.lFrame.tView}function k0(s){return Lt.lFrame.contextLView=s,s[8]}function qn(){let s=Jl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Jl(){return Lt.lFrame.currentTNode}function bo(){const s=Lt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Hi(s,o){const u=Lt.lFrame;u.currentTNode=s,u.isParent=o}function Zd(){return Lt.lFrame.isParent}function Tu(){Lt.lFrame.isParent=!1}function da(){return Lt.isInCheckNoChangesMode}function Xl(s){Lt.isInCheckNoChangesMode=s}function Cr(){const s=Lt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ps(){return Lt.lFrame.bindingIndex}function ec(s){return Lt.lFrame.bindingIndex=s}function ha(){return Lt.lFrame.bindingIndex++}function Wi(s){const o=Lt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function tc(s){Lt.lFrame.inI18n=s}function o_(s,o){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Qd(o)}function Qd(s){Lt.lFrame.currentDirectiveIndex=s}function Cu(s){const o=Lt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function a_(){return Lt.lFrame.currentQueryIndex}function Jd(s){Lt.lFrame.currentQueryIndex=s}function u_(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function nc(s,o,u){if(u&Ae.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&Ae.Host||(d=u_(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=Lt.lFrame=Do();return l.currentTNode=o,l.lView=s,!0}function bu(s){const o=Do(),u=s[1];Lt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Do(){const s=Lt.lFrame,o=null===s?null:s.child;return null===o?Xd(s):o}function Xd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function l_(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const c_=l_;function Du(){const s=l_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function oi(){return Lt.lFrame.selectedIndex}function Os(s){Lt.lFrame.selectedIndex=s}function Kn(){const s=Lt.lFrame;return Kl(s.tView,s.selectedIndex)}function Db(){Lt.lFrame.currentNamespace="svg"}function Sb(){Lt.lFrame.currentNamespace=zl}function Ab(){!function L0(){Lt.lFrame.currentNamespace=null}()}function Su(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:D,ngOnDestroy:A}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),w&&((s.contentHooks||(s.contentHooks=[])).push(u,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,w)),T&&(s.viewHooks||(s.viewHooks=[])).push(-u,T),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=A&&(s.destroyHooks||(s.destroyHooks=[])).push(u,A)}}function eh(s,o,u){h_(s,o,3,u)}function th(s,o,u,l){(3&s[2])===u&&h_(s,o,u,l)}function nh(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function h_(s,o,u,l){const f=null!=l?l:-1,y=o.length-1;let w=0;for(let T=void 0!==l?65535&s[18]:0;T<y;T++)if("number"==typeof o[T+1]){if(w=o[T],null!=l&&w>=l)break}else o[T]<0&&(s[18]+=65536),(w<f||-1==f)&&(vp(s,u,o,T),s[18]=(4294901760&s[18])+T+2),T++}function vp(s,o,u,l){const d=u[l]<0,f=u[l+1],w=s[d?-u[l]:u[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class rc{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function ps(s,o,u){const l=Hn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],w=u[d++],T=u[d++];l?s.setAttribute(o,w,T,y):o.setAttributeNS(y,w,T)}else{const y=f,w=u[++d];zi(y)?l&&s.setProperty(o,y,w):l?s.setAttribute(o,y,w):o.setAttribute(y,w),d++}}return d}function Ot(s){return 3===s||4===s||6===s}function zi(s){return 64===s.charCodeAt(0)}function br(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||ai(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function ai(s,o,u,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const w=s[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<s.length;){const w=s[f];if("number"==typeof w)break;if(w===u){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function ar(s){return-1!==s}function fa(s){return 32767&s}function pa(s,o){let u=function ih(s){return s>>16}(s),l=o;for(;u>0;)l=l[15],u--;return l}let Au=!0;function sc(s){const o=Au;return Au=s,o}let ac=0;function Fs(s,o){const u=sh(s,o);if(-1!==u)return u;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ur(l.data,s),ur(o,null),ur(l.blueprint,null));const d=ga(s,o),f=s.injectorIndex;if(ar(d)){const y=fa(d),w=pa(d,o),T=w[1].data;for(let D=0;D<8;D++)o[f+D]=w[y+D]|T[y+D]}return o[f+8]=d,f}function ur(s,o){s.push(0,0,0,0,0,0,0,0,o)}function sh(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ga(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(u++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function Ru(s,o,u){!function Tp(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(X)&&(l=u[X]),null==l&&(l=u[X]=ac++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Cp(s,o,u){if(u&Ae.Optional)return s;Ce(o,"NodeInjector")}function Ao(s,o,u,l){if(u&Ae.Optional&&void 0===l&&(l=null),0==(u&(Ae.Self|Ae.Host))){const d=s[9],f=qe(void 0);try{return d?d.get(o,l,u&Ae.Optional):Et(o,l,u&Ae.Optional)}finally{qe(f)}}return Cp(l,o,u)}function ma(s,o,u,l=Ae.Default,d){if(null!==s){const f=function Dp(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(X)?s[X]:void 0;return"number"==typeof o?o>=0?255&o:oh:o}(u);if("function"==typeof f){if(!nc(o,s,l))return l&Ae.Host?Cp(d,u,l):Ao(o,u,l,d);try{const y=f(l);if(null!=y||l&Ae.Optional)return y;Ce(u)}finally{c_()}}else if("number"==typeof f){let y=null,w=sh(s,o),T=-1,D=l&Ae.Host?o[16][6]:null;for((-1===w||l&Ae.SkipSelf)&&(T=-1===w?ga(s,o):o[w+8],-1!==T&&xu(l,!1)?(y=o[1],w=fa(T),o=pa(T,o)):w=-1);-1!==w;){const A=o[1];if(Yr(f,w,A.data)){const P=ah(w,o,u,y,l,D);if(P!==bp)return P}T=o[w+8],-1!==T&&xu(l,o[1].data[w+8]===D)&&Yr(f,w,o)?(y=A,w=fa(T),o=pa(T,o)):w=-1}}}return Ao(o,u,l,d)}const bp={};function oh(){return new ya(qn(),He())}function ah(s,o,u,l,d,f){const y=o[1],w=y.data[s+8],A=_a(w,y,u,null==l?$d(w)&&Au:l!=y&&0!=(3&w.type),d&Ae.Host&&f===w);return null!==A?gs(o,y,A,w):bp}function _a(s,o,u,l,d){const f=s.providerIndexes,y=o.data,w=1048575&f,T=s.directiveStart,A=f>>20,$=d?w+A:s.directiveEnd;for(let ee=l?w:w+A;ee<$;ee++){const Se=y[ee];if(ee<T&&u===Se||ee>=T&&Se.type===u)return ee}if(d){const ee=y[T];if(ee&&ji(ee)&&ee.type===u)return T}return null}function gs(s,o,u,l){let d=s[u];const f=o.data;if(function rh(s){return s instanceof rc}(d)){const y=d;y.resolving&&function ke(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new je(-200,`Circular dependency in DI detected for ${s}${u}`)}(ie(f[u]));const w=sc(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?qe(y.injectImpl):null;nc(s,l,Ae.Default);try{d=s[u]=y.factory(void 0,f,s,l),o.firstCreatePass&&u>=l.directiveStart&&function So(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=Hl(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==T&&qe(T),sc(w),y.resolving=!1,c_()}}return d}function Yr(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function xu(s,o){return!(s&Ae.Self||s&Ae.Host&&o)}class ya{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return ma(this._tNode,this._lView,o,l,u)}}function Dr(s){return tt(()=>{const o=s.prototype.constructor,u=o[ot]||Ro(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const f=d[ot]||Ro(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Ro(s){return Ue(s)?()=>{const o=Ro(Y(s));return o&&o()}:$i(s)}function xo(s){return function uc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(Ot(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(qn(),s)}const va="__annotations__",Ii="__parameters__",Br="__prop__metadata__";function Ls(s,o,u,l,d){return tt(()=>{const f=yr(o);function y(...w){if(this instanceof y)return f.call(this,...w),this;const T=new y(...w);return function(A){return d&&d(A,...w),(A.hasOwnProperty(va)?A[va]:Object.defineProperty(A,va,{value:[]})[va]).push(T),l&&l(A),A}}return u&&(y.prototype=Object.create(u.prototype)),y.prototype.ngMetadataName=s,y.annotationCls=y,y})}function yr(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}function Us(s,o,u){return tt(()=>{const l=yr(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(T,D,A){const P=T.hasOwnProperty(Ii)?T[Ii]:Object.defineProperty(T,Ii,{value:[]})[Ii];for(;P.length<=A;)P.push(null);return(P[A]=P[A]||[]).push(y),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}const uh=Us("Attribute",s=>({attributeName:s,__NG_ELEMENT_ID__:()=>xo(s)}));class Zn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ht({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const g_=new Zn("AnalyzeForEntryComponents");function lr(s){const o=Wt.ng;if(o&&o.\u0275compilerFacade)return o.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const Nu=Function;function Mu(s){return"function"==typeof s}function ui(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let l=s[u];Array.isArray(l)?(o===s&&(o=s.slice(0,u)),ui(l,o)):o!==s&&o.push(l)}return o}function _s(s,o){s.forEach(u=>Array.isArray(u)?_s(u,o):o(u))}function Pu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ou(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Gi(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}function Sr(s,o,u){let l=ys(s,o);return l>=0?s[1|l]=u:(l=~l,function Ap(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function hc(s,o){const u=ys(s,o);if(u>=0)return s[1|u]}function ys(s,o){return function fc(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const f=l+(d-l>>1),y=s[f<<u];if(o===y)return f<<u;y>o?d=f:l=f+1}return~(d<<u)}(s,o,1)}const E_=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Mi=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,pc=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Rp=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class w_{constructor(o){this._reflect=o||Wt.Reflect}isReflectionEnabled(){return!0}factory(o){return(...u)=>new o(...u)}_zipTypesAndAnnotations(o,u){let l;l=Gi(void 0===o?u.length:o.length);for(let d=0;d<l.length;d++)l[d]=void 0===o?[]:o[d]&&o[d]!=Object?[o[d]]:[],u&&null!=u[d]&&(l[d]=l[d].concat(u[d]));return l}_ownParameters(o,u){if(function ku(s){return E_.test(s)||Rp.test(s)||Mi.test(s)&&!pc.test(s)}(o.toString()))return null;if(o.parameters&&o.parameters!==u.parameters)return o.parameters;const d=o.ctorParameters;if(d&&d!==u.ctorParameters){const w="function"==typeof d?d():d,T=w.map(A=>A&&A.type),D=w.map(A=>A&&vr(A.decorators));return this._zipTypesAndAnnotations(T,D)}const f=o.hasOwnProperty(Ii)&&o[Ii],y=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",o);return y||f?this._zipTypesAndAnnotations(y,f):Gi(o.length)}parameters(o){if(!Mu(o))return[];const u=Qr(o);let l=this._ownParameters(o,u);return!l&&u!==Object&&(l=this.parameters(u)),l||[]}_ownAnnotations(o,u){if(o.annotations&&o.annotations!==u.annotations){let l=o.annotations;return"function"==typeof l&&l.annotations&&(l=l.annotations),l}return o.decorators&&o.decorators!==u.decorators?vr(o.decorators):o.hasOwnProperty(va)?o[va]:null}annotations(o){if(!Mu(o))return[];const u=Qr(o),l=this._ownAnnotations(o,u)||[];return(u!==Object?this.annotations(u):[]).concat(l)}_ownPropMetadata(o,u){if(o.propMetadata&&o.propMetadata!==u.propMetadata){let l=o.propMetadata;return"function"==typeof l&&l.propMetadata&&(l=l.propMetadata),l}if(o.propDecorators&&o.propDecorators!==u.propDecorators){const l=o.propDecorators,d={};return Object.keys(l).forEach(f=>{d[f]=vr(l[f])}),d}return o.hasOwnProperty(Br)?o[Br]:null}propMetadata(o){if(!Mu(o))return{};const u=Qr(o),l={};if(u!==Object){const f=this.propMetadata(u);Object.keys(f).forEach(y=>{l[y]=f[y]})}const d=this._ownPropMetadata(o,u);return d&&Object.keys(d).forEach(f=>{const y=[];l.hasOwnProperty(f)&&y.push(...l[f]),y.push(...d[f]),l[f]=y}),l}ownPropMetadata(o){return Mu(o)&&this._ownPropMetadata(o,Qr(o))||{}}hasLifecycleHook(o,u){return o instanceof Nu&&u in o.prototype}guards(o){return{}}getter(o){return new Function("o","return o."+o+";")}setter(o){return new Function("o","v","return o."+o+" = v;")}method(o){return new Function("o","args",`if (!o.${o}) throw new Error('"${o}" is undefined');\n        return o.${o}.apply(o, args);`)}importUri(o){return"object"==typeof o&&o.filePath?o.filePath:`./${ce(o)}`}resourceUri(o){return`./${ce(o)}`}resolveIdentifier(o,u,l,d){return d}resolveEnum(o,u){return o[u]}}function vr(s){return s?s.map(o=>new(0,o.type.annotationCls)(...o.args?o.args:[])):[]}function Qr(s){const o=s.prototype?Object.getPrototypeOf(s.prototype):null;return(o?o.constructor:null)||Object}const Mo={},gc="__NG_DI_FLAG__",Ia="ngTempTokenPath",Mp=/\n/gm,Fu="__source",Pp=_e({provide:String,useValue:_e});let ao;function vs(s){const o=ao;return ao=s,o}function pn(s,o=Ae.Default){if(void 0===ao)throw new je(203,"");return null===ao?Et(s,void 0,o):ao.get(s,o&Ae.Optional?null:void 0,o)}function sr(s,o=Ae.Default){return(function Pe(){return he}()||pn)(Y(s),o)}function mc(s){throw new Error("invalid")}function Lu(s){const o=[];for(let u=0;u<s.length;u++){const l=Y(s[u]);if(Array.isArray(l)){if(0===l.length)throw new je(900,"");let d,f=Ae.Default;for(let y=0;y<l.length;y++){const w=l[y],T=_c(w);"number"==typeof T?-1===T?d=w.token:f|=T:d=w}o.push(sr(d,f))}else o.push(sr(l))}return o}function uo(s,o){return s[gc]=o,s.prototype[gc]=o,s}function _c(s){return s[gc]}const Vs=uo(Us("Inject",s=>({token:s})),-1),Bs=uo(Us("Optional"),8),ba=uo(Us("Self"),2),Po=uo(Us("SkipSelf"),4),ch=uo(Us("Host"),1);let Hs,vc,Da=null;function Uu(s){return function kp(s){return s.map(o=>function T_(s){const o={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(s)&&s.length>0)for(let u=0;u<s.length;u++){const l=s[u];if(void 0===l)continue;const d=Object.getPrototypeOf(l);if(l instanceof Bs||"Optional"===d.ngMetadataName)o.optional=!0;else if(l instanceof Po||"SkipSelf"===d.ngMetadataName)o.skipSelf=!0;else if(l instanceof ba||"Self"===d.ngMetadataName)o.self=!0;else if(l instanceof ch||"Host"===d.ngMetadataName)o.host=!0;else if(l instanceof Vs)o.token=l.token;else if(l instanceof uh){if(void 0===l.attributeName)throw new Error("Attribute name must be defined.");o.attribute=l.attributeName}else o.token=l}else o.token=void 0===s||Array.isArray(s)&&0===s.length?null:s;return o}(o))}(function Sa(){return Da=Da||new w_}().parameters(s))}function yc(){if(void 0===Hs&&(Hs=null,Wt.trustedTypes))try{Hs=Wt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Hs}function Oo(s){var o;return(null===(o=yc())||void 0===o?void 0:o.createHTML(s))||s}function Ra(){if(void 0===vc&&(vc=null,Wt.trustedTypes))try{vc=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return vc}function gh(s){var o;return(null===(o=Ra())||void 0===o?void 0:o.createHTML(s))||s}function ju(s){var o;return(null===(o=Ra())||void 0===o?void 0:o.createScript(s))||s}function mh(s){var o;return(null===(o=Ra())||void 0===o?void 0:o.createScriptURL(s))||s}class Ec{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function lo(s){return s instanceof Ec?s.changingThisBreaksApplicationSecurity:s}function Ws(s,o){const u=function $u(s){return s instanceof Ec&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function Vp(s){const o=new M_(s);return function v(){try{return!!(new window.DOMParser).parseFromString(Oo(""),"text/html")}catch(s){return!1}}()?new N_(o):o}class N_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(Oo(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class M_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const l=this.inertDocument.createElement("body");u.appendChild(l)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Oo(o),u;const l=this.inertDocument.createElement("body");return l.innerHTML=Oo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const u=o.attributes;for(let d=u.length-1;0<d;d--){const y=u.item(d).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function S(s){return(s=String(s)).match(p)||s.match(I)?s:"unsafe:"+s}function M(s){return(s=String(s)).split(",").map(o=>S(o.trim())).join(", ")}function te(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function We(...s){const o={};for(const u of s)for(const l in u)u.hasOwnProperty(l)&&(o[l]=!0);return o}const wt=te("area,br,col,hr,img,wbr"),Ut=te("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sn=te("rp,rt"),xa=We(wt,We(Ut,te("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),We(sn,te("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),We(sn,Ut)),Ic=te("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hu=te("srcset"),co=We(Ic,Hu,te("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),te("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bp=te("script,style,template");class Na{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,l=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?l=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,l&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!xa.hasOwnProperty(u))return this.sanitizedSomething=!0,!Bp.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),y=f.name,w=y.toLowerCase();if(!co.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let T=f.value;Ic[w]&&(T=S(T)),Hu[w]&&(T=M(T)),this.buf.push(" ",y,'="',Cc(T),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();xa.hasOwnProperty(u)&&!wt.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Cc(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Tc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jp=/([^\#-~ |!])/g;function Cc(s){return s.replace(/&/g,"&amp;").replace(Tc,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(jp,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fo;function k_(s){return"content"in s&&function F_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function j0(s){const o=Lo();return o?gh(o.sanitize(Sn.HTML,s)||""):Ws(s,"HTML")?gh(lo(s)):function O_(s,o){let u=null;try{Fo=Fo||Vp(s);let l=o?String(o):"";u=Fo.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=u.innerHTML,u=Fo.getInertBodyElement(l)}while(l!==f);return Oo((new Na).sanitizeChildren(k_(u)||u))}finally{if(u){const l=k_(u)||u;for(;l.firstChild;)l.removeChild(l.firstChild)}}}(vu(),G(s))}function $0(s){const o=Lo();return o?o.sanitize(Sn.STYLE,s)||"":Ws(s,"Style")?lo(s):G(s)}function bc(s){const o=Lo();return o?o.sanitize(Sn.URL,s)||"":Ws(s,"URL")?lo(s):S(G(s))}function vh(s){const o=Lo();if(o)return mh(o.sanitize(Sn.RESOURCE_URL,s)||"");if(Ws(s,"ResourceURL"))return mh(lo(s));throw new je(904,"")}function xb(s){const o=Lo();if(o)return ju(o.sanitize(Sn.SCRIPT,s)||"");if(Ws(s,"Script"))return ju(lo(s));throw new je(905,"")}function Nb(s){return Oo(s[0])}function Mb(s){return function Aa(s){var o;return(null===(o=yc())||void 0===o?void 0:o.createScriptURL(s))||s}(s[0])}function $p(s,o,u){return function Pb(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?vh:bc}(o,u)(s)}function Lo(){const s=He();return s&&s[12]}const H0="__ngContext__";function ci(s,o){s[H0]=o}function U_(s){const o=function Eh(s){return s[H0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Gu(s){return s.ngOriginalError}function $b(s,...o){s.error(...o)}class Ih{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),l=function jb(s){return s&&s.ngErrorLogger||$b}(o);l(this._console,"ERROR",o),u&&l(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Gu(o);for(;u&&Gu(u);)u=Gu(u);return u||null}}const zb=/^>|^->|<!--|-->|--!>|<!-$/g,Gb=/(<|>)/;const Z0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function Qb(s){return s.ownerDocument.defaultView}function Y0(s){return s.ownerDocument}function Nx(s){return s.ownerDocument.body}function Gs(s){return s instanceof Function?s():s}var ho=(()=>((ho=ho||{})[ho.Important=1]="Important",ho[ho.DashCase=2]="DashCase",ho))();let B_;function Wp(s,o){return B_(s,o)}function Th(s){const o=s[3];return Bi(o)?o[3]:o}function Ch(s){return ew(s[13])}function Gp(s){return ew(s[4])}function ew(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function Sc(s,o,u,l,d){if(null!=l){let f,y=!1;Bi(l)?f=l:ii(l)&&(y=!0,l=l[0]);const w=Vn(l);0===s&&null!==u?null==d?Z_(o,u,w):qi(o,u,w,d||null,!0):1===s&&null!==u?qi(o,u,w,d||null,!0):2===s?X_(o,w,y):3===s&&o.destroyNode(w),null!=f&&function aD(s,o,u,l,d){const f=u[7];f!==Vn(u)&&Sc(o,s,l,f,d);for(let w=10;w<u.length;w++){const T=u[w];Yp(T[1],T,s,o,l,f)}}(o,s,f,u,d)}}function j_(s,o){return Hn(s)?s.createText(o):s.createTextNode(o)}function $_(s,o,u){Hn(s)?s.setValue(o,u):o.textContent=u}function tD(s,o){return s.createComment(function q0(s){return s.replace(zb,o=>o.replace(Gb,"\u200b$1\u200b"))}(o))}function H_(s,o,u){if(Hn(s))return s.createElement(o,u);{const l=null!==u?function pp(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":o===zl?"http://www.w3.org/1998/MathML/":null}(u):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function tw(s,o){const u=s[9],l=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Co(d,-1)),u.splice(l,1)}function G_(s,o){if(s.length<=10)return;const u=10+o,l=s[u];if(l){const d=l[17];null!==d&&d!==s&&tw(d,l),o>0&&(s[u-1][4]=l[4]);const f=Ou(s,10+o);!function Pi(s,o){Yp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function q_(s,o){if(!(256&o[2])){const u=o[11];Hn(u)&&u.destroyNode&&Yp(s,o,u,3,null,null),function W_(s){let o=s[13];if(!o)return K_(s[1],s);for(;o;){let u=null;if(ii(o))u=o[13];else{const l=o[10];l&&(u=l)}if(!u){for(;o&&!o[4]&&o!==s;)ii(o)&&K_(o[1],o),o=o[3];null===o&&(o=s),ii(o)&&K_(o[1],o),u=o&&o[4]}o=u}}(o)}}function K_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function rw(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof rc)){const f=u[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],T=f[y+1];try{T.call(w)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function nw(s,o){const u=s.cleanup,l=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],w="function"==typeof y?y(o):Vn(o[y]),T=l[d=u[f+2]],D=u[f+3];"boolean"==typeof D?w.removeEventListener(u[f],T,D):D>=0?l[d=D]():l[d=-D].unsubscribe(),f+=2}else{const y=l[d=u[f+1]];u[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(s,o),1===o[1].type&&Hn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Bi(o[3])){u!==o[3]&&tw(u,o);const l=o[19];null!==l&&l.detachView(s)}}}function Kp(s,o,u){return rD(s,o.parent,u)}function rD(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===yt.None||d===yt.Emulated)return null}return Vr(l,u)}function qi(s,o,u,l,d){Hn(s)?s.insertBefore(o,u,l,d):o.insertBefore(u,l,d)}function Z_(s,o,u){Hn(s)?s.appendChild(o,u):o.appendChild(u)}function iw(s,o,u,l,d){null!==l?qi(s,o,u,l,d):Z_(s,o,u)}function bh(s,o){return Hn(s)?s.parentNode(o):o.parentNode}function sw(s,o,u){return Y_(s,o,u)}function ow(s,o,u){return 40&s.type?Vr(s,u):null}let Q_,Y_=ow;function aw(s,o){Y_=s,Q_=o}function Zp(s,o,u,l){const d=Kp(s,l,o),f=o[11],w=sw(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)iw(f,d,u[T],w,!1);else iw(f,d,u,w,!1);void 0!==Q_&&Q_(f,l,o,u,d)}function Rc(s,o){if(null!==o){const u=o.type;if(3&u)return Vr(o,s);if(4&u)return J_(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Rc(s,l);{const d=s[o.index];return Bi(d)?J_(-1,d):Vn(d)}}if(32&u)return Wp(o,s)()||Vn(s[o.index]);{const l=uw(s,o);return null!==l?Array.isArray(l)?l[0]:Rc(Th(s[16]),l):Rc(s,o.next)}}return null}function uw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function J_(s,o){const u=10+s+1;if(u<o.length){const l=o[u],d=l[1].firstChild;if(null!==d)return Rc(l,d)}return o[7]}function X_(s,o,u){const l=bh(s,o);l&&function iD(s,o,u,l){Hn(s)?s.removeChild(o,u,l):o.removeChild(u)}(s,l,o,u)}function ey(s,o,u,l,d,f,y){for(;null!=u;){const w=l[u.index],T=u.type;if(y&&0===o&&(w&&ci(Vn(w),l),u.flags|=4),64!=(64&u.flags))if(8&T)ey(s,o,u.child,l,d,f,!1),Sc(o,s,d,w,f);else if(32&T){const D=Wp(u,l);let A;for(;A=D();)Sc(o,s,d,A,f);Sc(o,s,d,w,f)}else 16&T?lw(s,o,l,u,d,f):Sc(o,s,d,w,f);u=y?u.projectionNext:u.next}}function Yp(s,o,u,l,d,f){ey(u,l,s.firstChild,o,d,f,!1)}function lw(s,o,u,l,d,f){const y=u[16],T=y[6].projection[l.projection];if(Array.isArray(T))for(let D=0;D<T.length;D++)Sc(o,s,d,T[D],f);else ey(s,o,T,y[3],d,f,!0)}function Dh(s,o,u){Hn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Qp(s,o,u){Hn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function cw(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}u=d+1}}const uD="ng-template";function lD(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==cw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Te(s){return 4===s.type&&s.value!==uD}function An(s,o,u){return o===(4!==s.type||u?s.value:uD)}function Ma(s,o,u){let l=4;const d=s.attrs||[],f=function It(s){for(let o=0;o<s.length;o++)if(Ot(s[o]))return o;return s.length}(d);let y=!1;for(let w=0;w<o.length;w++){const T=o[w];if("number"!=typeof T){if(!y)if(4&l){if(l=2|1&l,""!==T&&!An(s,T,u)||""===T&&1===o.length){if(cr(l))return!1;y=!0}}else{const D=8&l?T:o[++w];if(8&l&&null!==s.attrs){if(!lD(s.attrs,D,u)){if(cr(l))return!1;y=!0}continue}const P=K(8&l?"class":T,d,Te(s),u);if(-1===P){if(cr(l))return!1;y=!0;continue}if(""!==D){let $;$=P>f?"":d[P+1].toLowerCase();const ee=8&l?$:null;if(ee&&-1!==cw(ee,D,0)||2&l&&D!==$){if(cr(l))return!1;y=!0}}}}else{if(!y&&!cr(l)&&!cr(T))return!1;if(y&&cr(T))continue;y=!1,l=T|1&l}}return cr(l)||y}function cr(s){return 0==(1&s)}function K(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function ty(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function dw(s,o,u=!1){for(let l=0;l<o.length;l++)if(Ma(s,o[l],u))return!0;return!1}function Qt(s,o){e:for(let u=0;u<o.length;u++){const l=o[u];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function Sh(s,o){return s?":not("+o.trim()+")":o}function ny(s){let o=s[0],u=1,l=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&l){const w=s[++u];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!cr(y)&&(o+=Sh(f,d),d=""),l=y,f=f||!cr(l);u++}return""!==d&&(o+=Sh(f,d)),o}const Zt={};function hw(s){fw(fn(),He(),oi()+s,da())}function fw(s,o,u,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&eh(o,f,u)}else{const f=s.preOrderHooks;null!==f&&th(o,f,0,u)}Os(u)}function Ar(s,o){return s<<17|o<<2}function Oi(s){return s>>17&32767}function ry(s){return 2|s}function Vo(s){return(131068&s)>>2}function Jp(s,o){return-131069&s|o<<2}function sy(s){return 1|s}function py(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const d=u[l],f=u[l+1];if(-1!==f){const y=s.data[f];Jd(d),y.contentQueries(2,o[f],f)}}}function xc(s,o,u,l,d,f,y,w,T,D){const A=o.blueprint.slice();return A[0]=d,A[2]=140|l,so(A),A[3]=A[15]=s,A[8]=u,A[10]=y||s&&s[10],A[11]=w||s&&s[11],A[12]=T||s&&s[12]||null,A[9]=D||s&&s[9]||null,A[6]=f,A[16]=2==o.type?s[16]:A,A}function Zu(s,o,u,l,d){let f=s.data[o];if(null===f)f=Oh(s,o,u,l,d),function s_(){return Lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const y=bo();f.injectorIndex=null===y?-1:y.injectorIndex}return Hi(f,!0),f}function Oh(s,o,u,l,d){const f=Jl(),y=Zd(),T=s.data[o]=function _y(s,o,u,l,d,f){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=T),null!==f&&(y?null==f.child&&null!==T.parent&&(f.child=T):null===f.next&&(f.next=T)),T}function Yu(s,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function kh(s,o,u){bu(o);try{const l=s.viewQuery;null!==l&&mg(1,l,u);const d=s.template;null!==d&&sg(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&py(s,o),s.staticViewQueries&&mg(2,s.viewQuery,u);const f=s.components;null!==f&&function mD(s,o){for(let u=0;u<o.length;u++)by(s,o[u])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Du()}}function ka(s,o,u,l){const d=o[2];if(256==(256&d))return;bu(o);const f=da();try{so(o),ec(s.bindingStartIndex),null!==u&&sg(s,o,u,2,l);const y=3==(3&d);if(!f)if(y){const D=s.preOrderCheckHooks;null!==D&&eh(o,D,null)}else{const D=s.preOrderHooks;null!==D&&th(o,D,0,null),nh(o,0)}if(function kw(s){for(let o=Ch(s);null!==o;o=Gp(o)){if(!o[2])continue;const u=o[9];for(let l=0;l<u.length;l++){const d=u[l],f=d[3];0==(1024&d[2])&&Co(f,1),d[2]|=1024}}}(o),function Cy(s){for(let o=Ch(s);null!==o;o=Gp(o))for(let u=10;u<o.length;u++){const l=o[u],d=l[1];ca(l)&&ka(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&py(s,o),!f)if(y){const D=s.contentCheckHooks;null!==D&&eh(o,D)}else{const D=s.contentHooks;null!==D&&th(o,D,1),nh(o,1)}!function fy(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)Os(~d);else{const f=d,y=u[++l],w=u[++l];o_(y,f),w(2,o[f])}}}finally{Os(-1)}}(s,o);const w=s.components;null!==w&&function bw(s,o){for(let u=0;u<o.length;u++)Fw(s,o[u])}(o,w);const T=s.viewQuery;if(null!==T&&mg(2,T,l),!f)if(y){const D=s.viewCheckHooks;null!==D&&eh(o,D)}else{const D=s.viewHooks;null!==D&&th(o,D,2),nh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Co(o[3],-1))}finally{Du()}}function gy(s,o,u,l){const d=o[10],f=!da(),y=To(o);try{f&&!y&&d.begin&&d.begin(),y&&kh(s,o,l),ka(s,o,u,l)}finally{f&&!y&&d.end&&d.end()}}function sg(s,o,u,l,d){const f=oi(),y=2&l;try{Os(-1),y&&o.length>20&&fw(s,o,20,da()),u(l,d)}finally{Os(f)}}function Mr(s,o,u){if(pu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}function Pr(s,o,u){!Ql()||(function vD(s,o,u,l){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||Fs(u,o),ci(l,o);const y=u.initialInputs;for(let w=d;w<f;w++){const T=s.data[w],D=ji(T);D&&Lh(o,u,T);const A=gs(o,s,w,u);ci(A,o),null!==y&&Ow(0,w-d,A,T,0,y),D&&(si(u.index,o)[8]=A)}}(s,o,u,Vr(u,o)),128==(128&u.flags)&&function ED(s,o,u){const l=u.directiveStart,d=u.directiveEnd,y=u.index,w=function Yd(){return Lt.lFrame.currentDirectiveIndex}();try{Os(y);for(let T=l;T<d;T++){const D=s.data[T],A=o[T];Qd(T),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Qu(D,A)}}finally{Os(-1),Qd(w)}}(s,o,u))}function Nc(s,o,u=Vr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?u(o,s):s[y];s[d++]=w}}}function og(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ag(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ag(s,o,u,l,d,f,y,w,T,D){const A=20+l,P=A+d,$=function _D(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Zt);return u}(A,P),ee="function"==typeof D?D():D;return $[1]={type:s,blueprint:$,template:u,queries:null,viewQuery:w,declTNode:o,data:$.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:ee,incompleteFirstPass:!1}}function ug(s,o,u,l){const d=Uw(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&Oc(s).push(l,d.length-1))}function Sw(s,o,u){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(o,d):u[l]=[o,d]}return u}function Ki(s,o,u,l,d,f,y,w){const T=Vr(o,u);let A,D=o.inputs;!w&&null!=D&&(A=D[l])?(kc(s,u,A,l,d),$d(o)&&function lg(s,o){const u=si(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(l=function Aw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,Hn(f)?f.setProperty(T,l,d):zi(l)||(T.setProperty?T.setProperty(l,d):T[l]=d))}function dg(s,o,u,l){let d=!1;if(Ql()){const f=function wD(s,o,u){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];dw(u,y.selectors,!1)&&(d||(d=[]),Ru(Fs(u,o),s,y.type),ji(y)?(Mw(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===l?null:{"":-1};if(null!==f){d=!0,Fh(u,s.data.length,f.length);for(let A=0;A<f.length;A++){const P=f[A];P.providersResolver&&P.providersResolver(P)}let w=!1,T=!1,D=Yu(s,o,f.length,null);for(let A=0;A<f.length;A++){const P=f[A];u.mergedAttrs=br(u.mergedAttrs,P.hostAttrs),wy(s,u,o,D,P),Pw(D,P,y),null!==P.contentQueries&&(u.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=128);const $=P.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),w=!0),!T&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),T=!0),D++}!function yy(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,y=[];let w=null,T=null;for(let D=o.directiveStart;D<l;D++){const A=d[D],P=A.inputs,$=null===f||Te(o)?null:Uh(P,f);y.push($),w=Sw(P,D,w),T=Sw(A.outputs,D,T)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=T}(s,u)}y&&function Ju(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new je(-301,!1);l.push(o[d],f)}}}(u,l,y)}return u.mergedAttrs=br(u.mergedAttrs,u.attrs),d}function Ey(s,o,u,l,d,f){const y=f.hostBindings;if(y){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const T=~o.index;(function hg(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(w)!=T&&w.push(T),w.push(l,d,y)}}function Qu(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Mw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Pw(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;ji(o)&&(u[""]=s)}}function Fh(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function wy(s,o,u,l,d){s.data[l]=d;const f=d.factory||(d.factory=$i(d.type)),y=new rc(f,ji(d),null);s.blueprint[l]=y,u[l]=y,Ey(s,o,0,l,Yu(s,u,d.hostVars,Zt),d)}function Lh(s,o,u){const l=Vr(o,s),d=og(u),f=s[10],y=Mc(s,xc(s,d,null,u.onPush?64:16,l,o,f,f.createRenderer(l,u),null,null));s[o.index]=y}function Ks(s,o,u,l,d,f){const y=Vr(s,o);Xr(o[11],y,f,s.value,u,l,d)}function Xr(s,o,u,l,d,f,y){if(null==f)Hn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const w=null==y?G(f):y(f,l||"",d);Hn(s)?s.setAttribute(o,d,w,u):u?o.setAttributeNS(u,d,w):o.setAttribute(d,w)}}function Ow(s,o,u,l,d,f){const y=f[o];if(null!==y){const w=l.setInput;for(let T=0;T<y.length;){const D=y[T++],A=y[T++],P=y[T++];null!==w?l.setInput(u,P,D,A):u[A]=P}}}function Uh(s,o){let u=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return u}function Ty(s,o,u,l){return new Array(s,!0,!1,o,null,0,l,u,null,null)}function Fw(s,o){const u=si(o,s);if(ca(u)){const l=u[1];80&u[2]?ka(l,u,l.template,u[8]):u[5]>0&&Xu(u)}}function Xu(s){for(let l=Ch(s);null!==l;l=Gp(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];ka(y,f,y.template,f[8])}else f[5]>0&&Xu(f)}const u=s[1].components;if(null!==u)for(let l=0;l<u.length;l++){const d=si(u[l],s);ca(d)&&d[5]>0&&Xu(d)}}function by(s,o){const u=si(o,s),l=u[1];(function Dy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),kh(l,u,u[8])}function Mc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Pc(s){for(;s;){s[2]|=64;const o=Th(s);if(Hd(s)&&!o)return s;s=o}return null}function Sy(s,o,u){const l=o[10];l.begin&&l.begin();try{ka(s,o,s.template,u)}catch(d){throw Bh(o,d),d}finally{l.end&&l.end()}}function pg(s){!function fg(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],l=U_(u),d=l[1];gy(d,l,d.template,u)}}(s[8])}function mg(s,o,u){Jd(0),o(s,u)}const Lw=(()=>Promise.resolve(null))();function Uw(s){return s[7]||(s[7]=[])}function Oc(s){return s.cleanup||(s.cleanup=[])}function Ry(s,o,u){return(null===s||ji(s))&&(u=function Gd(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(u[o.index])),u[11]}function Bh(s,o){const u=s[9],l=u?u.get(Ih,null):null;l&&l.handleError(o)}function kc(s,o,u,l,d){for(let f=0;f<u.length;){const y=u[f++],w=u[f++],T=o[y],D=s.data[y];null!==D.setInput?D.setInput(T,d,l,w):T[w]=d}}function Ci(s,o,u){const l=la(o,s);$_(s[11],l,u)}function Fc(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?d=ge(d,w):2==f&&(l=ge(l,w+": "+o[++y]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}const $h=new Zn("INJECTOR",-1);class Fa{get(o,u=Mo){if(u===Mo){const l=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw l.name="NullInjectorError",l}return u}}const _g=new Zn("Set Injector scope."),Hh={},el={};let Zs;function Wh(){return void 0===Zs&&(Zs=new Fa),Zs}function zh(s,o=null,u=null,l){const d=Gh(s,o,u,l);return d._resolveInjectorDefTypes(),d}function Gh(s,o=null,u=null,l){return new Vw(s,u,o||Wh(),l)}class Vw{constructor(o,u,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&_s(u,w=>this.processProvider(w,o,u)),_s([o],w=>this.processInjectorType(w,[],f)),this.records.set($h,po(void 0,this));const y=this.records.get(_g);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Mo,l=Ae.Default){this.assertNotDestroyed();const d=vs(this),f=qe(void 0);try{if(!(l&Ae.SkipSelf)){let w=this.records.get(o);if(void 0===w){const T=function qh(s){return"function"==typeof s||"object"==typeof s&&s instanceof Zn}(o)&&gt(o);w=T&&this.injectableDefInScope(T)?po(Wn(o),Hh):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Ae.Self?Wh():this.parent).get(o,u=l&Ae.Optional&&u===Mo?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Ia]=y[Ia]||[]).unshift(ce(o)),d)throw y;return function Op(s,o,u,l){const d=s[Ia];throw o[Fu]&&d.unshift(o[Fu]),s.message=function Ca(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ce(o);if(Array.isArray(o))d=o.map(ce).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(Mp,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[Ia]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{qe(f),vs(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ce(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processInjectorType(o,u,l){if(!(o=Y(o)))return!1;let d=qt(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,w=-1!==l.indexOf(y);if(void 0!==f&&(d=qt(f)),null==d)return!1;if(null!=d.imports&&!w){let A;l.push(y);try{_s(d.imports,P=>{this.processInjectorType(P,u,l)&&(void 0===A&&(A=[]),A.push(P))})}finally{}if(void 0!==A)for(let P=0;P<A.length;P++){const{ngModule:$,providers:ee}=A[P];_s(ee,Se=>this.processProvider(Se,$,ee||F))}}this.injectorDefTypes.add(y);const T=$i(y)||(()=>new y);this.records.set(y,po(T,Hh));const D=d.providers;if(null!=D&&!w){const A=o;_s(D,P=>this.processProvider(P,A,D))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,l){let d=Uc(o=Y(o))?o:Y(o&&o.provide);const f=function CD(s,o,u){return Lc(s)?po(void 0,s.useValue):po(Bw(s),Hh)}(o);if(Uc(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=po(void 0,Hh,!0),y.factory=()=>Lu(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===Hh&&(u.value=el,u.value=u.factory()),"object"==typeof u.value&&u.value&&function AD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Wn(s){const o=gt(s),u=null!==o?o.factory:$i(s);if(null!==u)return u;if(s instanceof Zn)throw new je(204,!1);if(s instanceof Function)return function yg(s){const o=s.length;if(o>0)throw Gi(o,"?"),new je(204,!1);const u=function jt(s){const o=s&&(s[Cn]||s[bn]);if(o){const u=function Xt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new je(204,!1)}function Bw(s,o,u){let l;if(Uc(s)){const d=Y(s);return $i(d)||Wn(d)}if(Lc(s))l=()=>Y(s.useValue);else if(function jw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Lu(s.deps||[]));else if(function bD(s){return!(!s||!s.useExisting)}(s))l=()=>sr(Y(s.useExisting));else{const d=Y(s&&(s.useClass||s.provide));if(!function SD(s){return!!s.deps}(s))return $i(d)||Wn(d);l=()=>new d(...Lu(s.deps))}return l}function po(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Lc(s){return null!==s&&"object"==typeof s&&Pp in s}function Uc(s){return"function"==typeof s}let Or=(()=>{class s{static create(u,l){var d;if(Array.isArray(u))return zh({name:""},l,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return zh({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Mo,s.NULL=new Fa,s.\u0275prov=Ht({token:s,providedIn:"any",factory:()=>sr($h)}),s.__NG_ELEMENT_ID__=-1,s})();function Yw(s,o){Su(U_(s)[1],qn())}function Qw(s){return Object.getPrototypeOf(s.prototype).constructor}function Jw(s){let o=Qw(s.type),u=!0;const l=[s];for(;o;){let d;if(ji(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new je(903,"");d=o.\u0275dir}if(d){if(u){l.push(d);const y=s;y.inputs=Ig(s.inputs),y.declaredInputs=Ig(s.declaredInputs),y.outputs=Ig(s.outputs);const w=d.hostBindings;w&&Tg(s,w);const T=d.viewQuery,D=d.contentQueries;if(T&&Xw(s,T),D&&eI(s,D),se(s.inputs,d.inputs),se(s.declaredInputs,d.declaredInputs),se(s.outputs,d.outputs),ji(d)&&d.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(s),w===Jw&&(u=!1)}}o=Object.getPrototypeOf(o)}!function PD(s){let o=0,u=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=br(d.hostAttrs,u=br(u,d.hostAttrs))}}(l)}function Ig(s){return s===en?{}:s===F?[]:s}function Xw(s,o){const u=s.viewQuery;s.viewQuery=u?(l,d)=>{o(l,d),u(l,d)}:o}function eI(s,o){const u=s.contentQueries;s.contentQueries=u?(l,d,f)=>{o(l,d,f),u(l,d,f)}:o}function Tg(s,o){const u=s.hostBindings;s.hostBindings=u?(l,d)=>{o(l,d),u(l,d)}:o}const tI=["providersResolver"],Bo=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function nI(s){let u,o=Qw(s.type);u=ji(s)?o.\u0275cmp:o.\u0275dir;const l=s;for(const d of tI)l[d]=u[d];if(ji(u))for(const d of Bo)l[d]=u[d]}let Cg=null;function La(){if(!Cg){const s=Wt.Symbol;if(s&&s.iterator)Cg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const l=o[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Cg=l)}}}return Cg}function jc(s){return!!Dg(s)&&(Array.isArray(s)||!(s instanceof Map)&&La()in s)}function Dg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Es(s,o,u){return s[o]=u}function Ua(s,o){return s[o]}function di(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Va(s,o,u,l){const d=di(s,o,u);return di(s,o+1,l)||d}function Ba(s,o,u,l,d){const f=Va(s,o,u,l);return di(s,o+2,d)||f}function Yi(s,o,u,l,d,f){const y=Va(s,o,u,l);return Va(s,o+2,d,f)||y}function Sg(s,o,u,l){const d=He();return di(d,ha(),o)&&(fn(),Ks(Kn(),d,s,o,u,l)),Sg}function ja(s,o){let u=!1,l=Ps();for(let f=1;f<o.length;f+=2)u=di(s,l++,o[f])||u;if(ec(l),!u)return Zt;let d=o[0];for(let f=1;f<o.length;f+=2)d+=G(o[f])+o[f+1];return d}function $a(s,o,u,l){return di(s,ha(),u)?o+G(u)+l:Zt}function nl(s,o,u,l,d,f){const w=Va(s,Ps(),u,d);return Wi(2),w?o+G(u)+l+G(d)+f:Zt}function jo(s,o,u,l,d,f,y,w){const D=Ba(s,Ps(),u,d,y);return Wi(3),D?o+G(u)+l+G(d)+f+G(y)+w:Zt}function rl(s,o,u,l,d,f,y,w,T,D){const P=Yi(s,Ps(),u,d,y,T);return Wi(4),P?o+G(u)+l+G(d)+f+G(y)+w+G(T)+D:Zt}function il(s,o,u,l,d,f,y,w,T,D,A,P){const $=Ps();let ee=Yi(s,$,u,d,y,T);return ee=di(s,$+4,A)||ee,Wi(5),ee?o+G(u)+l+G(d)+f+G(y)+w+G(T)+D+G(A)+P:Zt}function ws(s,o,u,l,d,f,y,w,T,D,A,P,$,ee){const Se=Ps();let Ye=Yi(s,Se,u,d,y,T);return Ye=Va(s,Se+4,A,$)||Ye,Wi(6),Ye?o+G(u)+l+G(d)+f+G(y)+w+G(T)+D+G(A)+P+G($)+ee:Zt}function sl(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye){const rt=Ps();let bt=Yi(s,rt,u,d,y,T);return bt=Ba(s,rt+4,A,$,Se)||bt,Wi(7),bt?o+G(u)+l+G(d)+f+G(y)+w+G(T)+D+G(A)+P+G($)+ee+G(Se)+Ye:Zt}function ol(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt){const Ne=Ps();let At=Yi(s,Ne,u,d,y,T);return At=Yi(s,Ne+4,A,$,Se,rt)||At,Wi(8),At?o+G(u)+l+G(d)+f+G(y)+w+G(T)+D+G(A)+P+G($)+ee+G(Se)+Ye+G(rt)+bt:Zt}function Ly(s,o,u,l,d,f){const y=He(),w=$a(y,o,u,l);return w!==Zt&&Ks(Kn(),y,s,w,d,f),Ly}function Uy(s,o,u,l,d,f,y,w){const T=He(),D=nl(T,o,u,l,d,f);return D!==Zt&&Ks(Kn(),T,s,D,y,w),Uy}function Yh(s,o,u,l,d,f,y,w,T,D){const A=He(),P=jo(A,o,u,l,d,f,y,w);return P!==Zt&&Ks(Kn(),A,s,P,T,D),Yh}function ki(s,o,u,l,d,f,y,w,T,D,A,P){const $=He(),ee=rl($,o,u,l,d,f,y,w,T,D);return ee!==Zt&&Ks(Kn(),$,s,ee,A,P),ki}function Vy(s,o,u,l,d,f,y,w,T,D,A,P,$,ee){const Se=He(),Ye=il(Se,o,u,l,d,f,y,w,T,D,A,P);return Ye!==Zt&&Ks(Kn(),Se,s,Ye,$,ee),Vy}function By(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye){const rt=He(),bt=ws(rt,o,u,l,d,f,y,w,T,D,A,P,$,ee);return bt!==Zt&&Ks(Kn(),rt,s,bt,Se,Ye),By}function al(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt){const Ne=He(),At=sl(Ne,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye);return At!==Zt&&Ks(Kn(),Ne,s,At,rt,bt),al}function rI(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt,Ne,At){const hn=He(),Nn=ol(hn,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt);return Nn!==Zt&&Ks(Kn(),hn,s,Nn,Ne,At),rI}function iI(s,o,u,l){const d=He(),f=ja(d,o);return f!==Zt&&Ks(Kn(),d,s,f,u,l),iI}function OD(s,o,u,l,d,f,y,w){const T=He(),D=fn(),A=s+20,P=D.firstCreatePass?function jy(s,o,u,l,d,f,y,w,T){const D=o.consts,A=Zu(o,s,4,y||null,Ms(D,w));dg(o,u,A,Ms(D,T)),Su(o,A);const P=A.tViews=ag(2,A,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,A),P.queries=o.queries.embeddedTView(A)),A}(A,D,T,o,u,l,d,f,y):D.data[A];Hi(P,!1);const $=T[11].createComment("");Zp(D,T,$,P),ci($,T),Mc(T,T[A]=Ty($,T,$,P)),Io(P)&&Pr(D,T,P),null!=y&&Nc(T,P,w)}function sI(s){return fs(function _p(){return Lt.lFrame.contextLView}(),20+s)}function Jh(s,o=Ae.Default){const u=He();return null===u?sr(s,o):ma(qn(),u,Y(s),o)}function Fr(){throw new Error("invalid")}function hl(s,o,u){const l=He();return di(l,ha(),o)&&Ki(fn(),Kn(),l,s,o,l[11],u,!1),hl}function zy(s,o,u,l,d){const y=d?"class":"style";kc(s,u,o.inputs[y],y,l)}function Mg(s,o,u,l){const d=He(),f=fn(),y=20+s,w=d[11],T=d[y]=H_(w,o,function yp(){return Lt.lFrame.currentNamespace}()),D=f.firstCreatePass?function Lr(s,o,u,l,d,f,y){const w=o.consts,D=Zu(o,s,2,d,Ms(w,f));return dg(o,u,D,Ms(w,y)),null!==D.attrs&&Fc(D,D.attrs,!1),null!==D.mergedAttrs&&Fc(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(y,f,d,0,o,u,l):f.data[y];Hi(D,!0);const A=D.mergedAttrs;null!==A&&ps(w,T,A);const P=D.classes;null!==P&&Qp(w,T,P);const $=D.styles;return null!==$&&Dh(w,T,$),64!=(64&D.flags)&&Zp(f,d,T,D),0===function mp(){return Lt.lFrame.elementDepthCount}()&&ci(T,d),function Yl(){Lt.lFrame.elementDepthCount++}(),Io(D)&&(Pr(f,d,D),Mr(f,D,d)),null!==l&&Nc(d,D),Mg}function Ys(){let s=qn();Zd()?Tu():(s=s.parent,Hi(s,!1));const o=s;!function r_(){Lt.lFrame.elementDepthCount--}();const u=fn();return u.firstCreatePass&&(Su(u,s),pu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function p_(s){return 0!=(16&s.flags)}(o)&&zy(u,o,He(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Rb(s){return 0!=(32&s.flags)}(o)&&zy(u,o,He(),o.stylesWithoutHost,!1),Ys}function er(s,o,u,l){return Mg(s,o,u,l),Ys(),er}function Pg(s,o,u){const l=He(),d=fn(),f=s+20,y=d.firstCreatePass?function Gy(s,o,u,l,d){const f=o.consts,y=Ms(f,l),w=Zu(o,s,8,"ng-container",y);return null!==y&&Fc(w,y,!0),dg(o,u,w,Ms(f,d)),null!==o.queries&&o.queries.elementStart(o,w),w}(f,d,l,o,u):d.data[f];Hi(y,!0);const w=l[f]=l[11].createComment("");return Zp(d,l,w,y),ci(w,l),Io(y)&&(Pr(d,l,y),Mr(d,y,l)),null!=u&&Nc(l,y),Pg}function fl(){let s=qn();const o=fn();return Zd()?Tu():(s=s.parent,Hi(s,!1)),o.firstCreatePass&&(Su(o,s),pu(s)&&o.queries.elementEnd(s)),fl}function fI(s,o,u){return Pg(s,o,u),fl(),fI}function pl(){return He()}function $o(s){return!!s&&"function"==typeof s.then}function Wc(s){return!!s&&"function"==typeof s.subscribe}const qy=Wc;function vt(s,o,u,l){const d=He(),f=fn(),y=qn();return Is(f,d,d[11],y,s,o,!!u,l),vt}function pI(s,o){const u=qn(),l=He(),d=fn();return Is(d,l,Ry(Cu(d.data),u,l),u,s,o,!1),pI}function Is(s,o,u,l,d,f,y,w){const T=Io(l),A=s.firstCreatePass&&Oc(s),P=o[8],$=Uw(o);let ee=!0;if(3&l.type||w){const rt=Vr(l,o),bt=w?w(rt):rt,Ne=$.length,At=w?hn=>w(Vn(hn[l.index])):l.index;if(Hn(u)){let hn=null;if(!w&&T&&(hn=function gl(s,o,u,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===l){const w=o[7],T=d[f+2];return w.length>T?w[T]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==hn)(hn.__ngLastListenerFn__||hn).__ngNextListenerFn__=f,hn.__ngLastListenerFn__=f,ee=!1;else{f=Wa(l,o,P,f,!1);const Nn=u.listen(bt,d,f);$.push(f,Nn),A&&A.push(d,At,Ne,Ne+1)}}else f=Wa(l,o,P,f,!0),bt.addEventListener(d,f,y),$.push(f),A&&A.push(d,At,Ne,y)}else f=Wa(l,o,P,f,!1);const Se=l.outputs;let Ye;if(ee&&null!==Se&&(Ye=Se[d])){const rt=Ye.length;if(rt)for(let bt=0;bt<rt;bt+=2){const ss=o[Ye[bt]][Ye[bt+1]].subscribe(f),nu=$.length;$.push(f,ss),A&&A.push(d,l.index,nu,-(nu+1))}}}function zc(s,o,u,l){try{return!1!==u(l)}catch(d){return Bh(s,d),!1}}function Wa(s,o,u,l,d){return function f(y){if(y===Function)return l;const w=2&s.flags?si(s.index,o):o;0==(32&o[2])&&Pc(w);let T=zc(o,0,l,y),D=f.__ngNextListenerFn__;for(;D;)T=zc(o,0,D,y)&&T,D=D.__ngNextListenerFn__;return d&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function gI(s=1){return function oo(s){return(Lt.lFrame.contextLView=function d_(s,o){for(;s>0;)o=o[15],s--;return o}(s,Lt.lFrame.contextLView))[8]}(s)}function Gc(s,o){let u=null;const l=function Uo(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let d=0;d<o.length;d++){const f=o[d];if("*"!==f){if(null===l?dw(s,f,!0):Qt(l,f))return d}else u=d}return u}function Ky(s){const o=He()[16][6];if(!o.projection){const l=o.projection=Gi(s?s.length:1,null),d=l.slice();let f=o.child;for(;null!==f;){const y=s?Gc(f,s):0;null!==y&&(d[y]?d[y].projectionNext=f:l[y]=f,d[y]=f),f=f.next}}}function Og(s,o=0,u){const l=He(),d=fn(),f=Zu(d,20+s,16,null,u||null);null===f.projection&&(f.projection=o),Tu(),64!=(64&f.flags)&&function oD(s,o,u){lw(o[11],0,o,u,Kp(s,u,o),sw(u.parent||o[6],u,o))}(d,l,f)}function kg(s,o,u){return qc(s,"",o,"",u),kg}function qc(s,o,u,l,d){const f=He(),y=$a(f,o,u,l);return y!==Zt&&Ki(fn(),Kn(),f,s,y,f[11],d,!1),qc}function Zy(s,o,u,l,d,f,y){const w=He(),T=nl(w,o,u,l,d,f);return T!==Zt&&Ki(fn(),Kn(),w,s,T,w[11],y,!1),Zy}function Yy(s,o,u,l,d,f,y,w,T){const D=He(),A=jo(D,o,u,l,d,f,y,w);return A!==Zt&&Ki(fn(),Kn(),D,s,A,D[11],T,!1),Yy}function Xh(s,o,u,l,d,f,y,w,T,D,A){const P=He(),$=rl(P,o,u,l,d,f,y,w,T,D);return $!==Zt&&Ki(fn(),Kn(),P,s,$,P[11],A,!1),Xh}function Kc(s,o,u,l,d,f,y,w,T,D,A,P,$){const ee=He(),Se=il(ee,o,u,l,d,f,y,w,T,D,A,P);return Se!==Zt&&Ki(fn(),Kn(),ee,s,Se,ee[11],$,!1),Kc}function ti(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se){const Ye=He(),rt=ws(Ye,o,u,l,d,f,y,w,T,D,A,P,$,ee);return rt!==Zt&&Ki(fn(),Kn(),Ye,s,rt,Ye[11],Se,!1),ti}function Qy(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt){const bt=He(),Ne=sl(bt,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye);return Ne!==Zt&&Ki(fn(),Kn(),bt,s,Ne,bt[11],rt,!1),Qy}function tr(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt,Ne){const At=He(),hn=ol(At,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt);return hn!==Zt&&Ki(fn(),Kn(),At,s,hn,At[11],Ne,!1),tr}function Fg(s,o,u){const l=He(),d=ja(l,o);return d!==Zt&&Ki(fn(),Kn(),l,s,d,l[11],u,!1),Fg}function mI(s,o,u,l,d){const f=s[u+1],y=null===o;let w=l?Oi(f):Vo(f),T=!1;for(;0!==w&&(!1===T||y);){const A=s[w+1];_I(s[w],o)&&(T=!0,s[w+1]=l?sy(A):ry(A)),w=l?Oi(A):Vo(A)}T&&(s[u+1]=l?ry(f):sy(f))}function _I(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ys(s,o)>=0}const or={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yI(s){return s.substring(or.key,or.keyEnd)}function Ug(s){return s.substring(or.value,or.valueEnd)}function hi(s,o){const u=or.textEnd;return u===o?-1:(o=or.keyEnd=function jD(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,or.key=o,u),ml(s,o,u))}function vI(s,o){const u=or.textEnd;let l=or.key=ml(s,o,u);return u===l?-1:(l=or.keyEnd=function $D(s,o,u){let l;for(;o<u&&(45===(l=s.charCodeAt(o))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)o++;return o}(s,l,u),l=wI(s,l,u),l=or.value=ml(s,l,u),l=or.valueEnd=function HD(s,o,u){let l=-1,d=-1,f=-1,y=o,w=y;for(;y<u;){const T=s.charCodeAt(y++);if(59===T)return w;34===T||39===T?w=y=_l(s,T,y,u):o===y-4&&85===f&&82===d&&76===l&&40===T?w=y=_l(s,41,y,u):T>32&&(w=y),f=d,d=l,l=-33&T}return w}(s,l,u),wI(s,l,u))}function EI(s){or.key=0,or.keyEnd=0,or.value=0,or.valueEnd=0,or.textEnd=s.length}function ml(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function wI(s,o,u,l){return(o=ml(s,o,u))<u&&o++,o}function _l(s,o,u,l){let d=-1,f=u;for(;f<l;){const y=s.charCodeAt(f++);if(y==o&&92!==d)return f;d=92==y&&92===d?0:y}throw new Error}function II(s,o,u){return Fi(s,o,u,!1),II}function Xy(s,o){return Fi(s,o,null,!0),Xy}function Qs(s){Li($g,Ho,s,!1)}function Ho(s,o){for(let u=function BD(s){return EI(s),vI(s,ml(s,0,or.textEnd))}(o);u>=0;u=vI(o,u))$g(s,yI(o),Ug(o))}function TI(s){Li(Sr,bi,s,!0)}function bi(s,o){for(let u=function Vg(s){return EI(s),hi(s,ml(s,0,or.textEnd))}(o);u>=0;u=hi(o,u))Sr(s,yI(o),!0)}function Fi(s,o,u,l){const d=He(),f=fn(),y=Wi(2);f.firstUpdatePass&&jg(f,s,y,l),o!==Zt&&di(d,y,o)&&DI(f,f.data[oi()],d,d[11],s,d[y+1]=function SI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(lo(s)))),s}(o,u),l,y)}function Li(s,o,u,l){const d=fn(),f=Wi(2);d.firstUpdatePass&&jg(d,null,f,l);const y=He();if(u!==Zt&&di(y,f,u)){const w=d.data[oi()];if(rf(w,l)&&!Bg(d,f)){let T=l?w.classesWithoutHost:w.stylesWithoutHost;null!==T&&(u=ge(T,u||"")),zy(d,w,y,u,l)}else!function bI(s,o,u,l,d,f,y,w){d===Zt&&(d=F);let T=0,D=0,A=0<d.length?d[0]:null,P=0<f.length?f[0]:null;for(;null!==A||null!==P;){const $=T<d.length?d[T+1]:void 0,ee=D<f.length?f[D+1]:void 0;let Ye,Se=null;A===P?(T+=2,D+=2,$!==ee&&(Se=P,Ye=ee)):null===P||null!==A&&A<P?(T+=2,Se=A):(D+=2,Se=P,Ye=ee),null!==Se&&DI(s,o,u,l,Se,Ye,y,w),A=T<d.length?d[T]:null,P=D<f.length?f[D]:null}}(d,w,y,y[11],y[f+1],y[f+1]=function tv(s,o,u){if(null==u||""===u)return F;const l=[],d=lo(u);if(Array.isArray(d))for(let f=0;f<d.length;f++)s(l,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&s(l,f,d[f]);else"string"==typeof d&&o(l,d);return l}(s,o,u),l,f)}}function Bg(s,o){return o>=s.expandoStartIndex}function jg(s,o,u,l){const d=s.data;if(null===d[u+1]){const f=d[oi()],y=Bg(s,u);rf(f,l)&&null===o&&!y&&(o=!1),o=function ev(s,o,u,l){const d=Cu(s);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=Yc(u=yl(null,s,o,u,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=yl(d,s,o,u,l),null===f){let T=function Zc(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Vo(l))return s[Oi(l)]}(s,o,l);void 0!==T&&Array.isArray(T)&&(T=yl(null,s,o,T[1],l),T=Yc(T,o.attrs,l),function Ts(s,o,u,l){s[Oi(u?o.classBindings:o.styleBindings)]=l}(s,o,l,T))}else f=function CI(s,o,u){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=Yc(l,s[f].hostAttrs,u);return Yc(l,o.attrs,u)}(s,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,l),function ef(s,o,u,l,d,f){let y=f?o.classBindings:o.styleBindings,w=Oi(y),T=Vo(y);s[l]=u;let A,D=!1;if(Array.isArray(u)){const P=u;A=P[1],(null===A||ys(P,A)>0)&&(D=!0)}else A=u;if(d)if(0!==T){const $=Oi(s[w+1]);s[l+1]=Ar($,w),0!==$&&(s[$+1]=Jp(s[$+1],l)),s[w+1]=function Pa(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=Ar(w,0),0!==w&&(s[w+1]=Jp(s[w+1],l)),w=l;else s[l+1]=Ar(T,0),0===w?w=l:s[T+1]=Jp(s[T+1],l),T=l;D&&(s[l+1]=ry(s[l+1])),mI(s,A,l,!0),mI(s,A,l,!1),function Lg(s,o,u,l,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&ys(f,o)>=0&&(u[l+1]=sy(u[l+1]))}(o,A,s,l,f),y=Ar(w,T),f?o.classBindings=y:o.styleBindings=y}(d,f,o,u,y,l)}}function yl(s,o,u,l,d){let f=null;const y=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<y&&(f=o[w],l=Yc(l,f.hostAttrs,d),f!==s);)w++;return null!==s&&(u.directiveStylingLast=w),l}function Yc(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Sr(s,y,!!u||o[++f]))}return void 0===s?null:s}function $g(s,o,u){Sr(s,o,lo(u))}function DI(s,o,u,l,d,f,y,w){if(!(3&o.type))return;const T=s.data,D=T[w+1];nf(function iy(s){return 1==(1&s)}(D)?nv(T,o,u,d,Vo(D),y):void 0)||(nf(f)||function jr(s){return 2==(2&s)}(D)&&(f=nv(T,null,u,d,w,y)),function lt(s,o,u,l,d){const f=Hn(s);if(o)d?f?s.addClass(u,l):u.classList.add(l):f?s.removeClass(u,l):u.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:ho.DashCase;if(null==d)f?s.removeStyle(u,l,y):u.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),y|=ho.Important),f?s.setStyle(u,l,d,y):u.style.setProperty(l,d,w?"important":"")}}}(l,y,la(oi(),u),d,f))}function nv(s,o,u,l,d,f){const y=null===o;let w;for(;d>0;){const T=s[d],D=Array.isArray(T),A=D?T[1]:T,P=null===A;let $=u[d+1];$===Zt&&($=P?F:void 0);let ee=P?hc($,l):A===l?$:void 0;if(D&&!nf(ee)&&(ee=hc(T,l)),nf(ee)&&(w=ee,y))return w;const Se=s[d+1];d=y?Oi(Se):Vo(Se)}if(null!==o){let T=f?o.residualClasses:o.residualStyles;null!=T&&(w=hc(T,l))}return w}function nf(s){return void 0!==s}function rf(s,o){return 0!=(s.flags&(o?16:32))}function AI(s,o=""){const u=He(),l=fn(),d=s+20,f=l.firstCreatePass?Zu(l,d,1,o,null):l.data[d],y=u[d]=j_(u[11],o);Zp(l,u,y,f),Hi(f,!1)}function RI(s){return sf("",s,""),RI}function sf(s,o,u){const l=He(),d=$a(l,s,o,u);return d!==Zt&&Ci(l,oi(),d),sf}function vl(s,o,u,l,d){const f=He(),y=nl(f,s,o,u,l,d);return y!==Zt&&Ci(f,oi(),y),vl}function za(s,o,u,l,d,f,y){const w=He(),T=jo(w,s,o,u,l,d,f,y);return T!==Zt&&Ci(w,oi(),T),za}function rv(s,o,u,l,d,f,y,w,T){const D=He(),A=rl(D,s,o,u,l,d,f,y,w,T);return A!==Zt&&Ci(D,oi(),A),rv}function Ga(s,o,u,l,d,f,y,w,T,D,A){const P=He(),$=il(P,s,o,u,l,d,f,y,w,T,D,A);return $!==Zt&&Ci(P,oi(),$),Ga}function iv(s,o,u,l,d,f,y,w,T,D,A,P,$){const ee=He(),Se=ws(ee,s,o,u,l,d,f,y,w,T,D,A,P,$);return Se!==Zt&&Ci(ee,oi(),Se),iv}function El(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se){const Ye=He(),rt=sl(Ye,s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se);return rt!==Zt&&Ci(Ye,oi(),rt),El}function sv(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt){const bt=He(),Ne=ol(bt,s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt);return Ne!==Zt&&Ci(bt,oi(),Ne),sv}function ov(s){const o=He(),u=ja(o,s);return u!==Zt&&Ci(o,oi(),u),ov}function af(s,o,u){Li(Sr,bi,$a(He(),s,o,u),!0)}function WD(s,o,u,l,d){Li(Sr,bi,nl(He(),s,o,u,l,d),!0)}function zD(s,o,u,l,d,f,y){Li(Sr,bi,jo(He(),s,o,u,l,d,f,y),!0)}function Rr(s,o,u,l,d,f,y,w,T){Li(Sr,bi,rl(He(),s,o,u,l,d,f,y,w,T),!0)}function Hg(s,o,u,l,d,f,y,w,T,D,A){Li(Sr,bi,il(He(),s,o,u,l,d,f,y,w,T,D,A),!0)}function Wg(s,o,u,l,d,f,y,w,T,D,A,P,$){Li(Sr,bi,ws(He(),s,o,u,l,d,f,y,w,T,D,A,P,$),!0)}function GD(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se){Li(Sr,bi,sl(He(),s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se),!0)}function av(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt){Li(Sr,bi,ol(He(),s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt),!0)}function qD(s){Li(Sr,bi,ja(He(),s),!0)}function xI(s,o,u){Qs($a(He(),s,o,u))}function NI(s,o,u,l,d){Qs(nl(He(),s,o,u,l,d))}function uf(s,o,u,l,d,f,y){Qs(jo(He(),s,o,u,l,d,f,y))}function wl(s,o,u,l,d,f,y,w,T){Qs(rl(He(),s,o,u,l,d,f,y,w,T))}function MI(s,o,u,l,d,f,y,w,T,D,A){Qs(il(He(),s,o,u,l,d,f,y,w,T,D,A))}function PI(s,o,u,l,d,f,y,w,T,D,A,P,$){Qs(ws(He(),s,o,u,l,d,f,y,w,T,D,A,P,$))}function OI(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se){Qs(sl(He(),s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se))}function lf(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt){Qs(ol(He(),s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt))}function uv(s){Qs(ja(He(),s))}function kI(s,o,u,l,d){return Fi(s,$a(He(),o,u,l),d,!1),kI}function wr(s,o,u,l,d,f,y){return Fi(s,nl(He(),o,u,l,d,f),y,!1),wr}function In(s,o,u,l,d,f,y,w,T){return Fi(s,jo(He(),o,u,l,d,f,y,w),T,!1),In}function lv(s,o,u,l,d,f,y,w,T,D,A){return Fi(s,rl(He(),o,u,l,d,f,y,w,T,D),A,!1),lv}function cv(s,o,u,l,d,f,y,w,T,D,A,P,$){return Fi(s,il(He(),o,u,l,d,f,y,w,T,D,A,P),$,!1),cv}function hr(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se){return Fi(s,ws(He(),o,u,l,d,f,y,w,T,D,A,P,$,ee),Se,!1),hr}function cf(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt){return Fi(s,sl(He(),o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye),rt,!1),cf}function zr(s,o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt,Ne){return Fi(s,ol(He(),o,u,l,d,f,y,w,T,D,A,P,$,ee,Se,Ye,rt,bt),Ne,!1),zr}function Yn(s,o,u){return Fi(s,ja(He(),o),u,!1),Yn}function dv(s,o,u){const l=He();return di(l,ha(),o)&&Ki(fn(),Kn(),l,s,o,l[11],u,!0),dv}function Il(s,o,u){const l=He();if(di(l,ha(),o)){const f=fn(),y=Kn();Ki(f,y,l,s,o,Ry(Cu(f.data),y,l),u,!0)}return Il}const Tl=void 0;var KD=["en",[["a","p"],["AM","PM"],Tl],[["AM","PM"],Tl,Tl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Tl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Tl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Tl,"{1} 'at' {0}",Tl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cs(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let qa={};function hv(s){const o=function Gg(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=df(o);if(u)return u;const l=o.split("-")[0];if(u=df(l),u)return u;if("en"===l)return KD;throw new Error(`Missing locale data for the locale "${s}".`)}function FI(s){return hv(s)[Pt.PluralCase]}function df(s){return s in qa||(qa[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),qa[s]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const LI=["zero","one","two","few","many"],hf="en-US",ff={marker:"element"},pf={marker:"ICU"};var fr=(()=>((fr=fr||{})[fr.SHIFT=2]="SHIFT",fr[fr.APPEND_EAGERLY=1]="APPEND_EAGERLY",fr[fr.COMMENT=2]="COMMENT",fr))();let VI=hf;function jI(s,o,u){const l=o.insertBeforeIndex,d=Array.isArray(l)?l[0]:l;return null===d?ow(s,0,u):Vn(u[d])}function Ur(s,o,u,l,d){const f=o.insertBeforeIndex;if(Array.isArray(f)){let y=l,w=null;if(3&o.type||(w=y,y=d),null!==y&&0==(2&o.flags))for(let T=1;T<f.length;T++)qi(s,y,u[f[T]],w,!1)}}function qg(s,o){if(s.push(o),s.length>1)for(let u=s.length-2;u>=0;u--){const l=s[u];fv(l)||mf(l,o)&&null===go(l)&&pv(l,o.index)}}function fv(s){return!(64&s.type)}function mf(s,o){return fv(o)||s.index>o.index}function go(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function pv(s,o){const u=s.insertBeforeIndex;Array.isArray(u)?u[0]=o:(aw(jI,Ur),s.insertBeforeIndex=o)}function Qc(s,o){const u=s.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function HI(s,o,u){const l=Oh(s,u,64,null,null);return qg(o,l),l}function yf(s,o){const u=o[s.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function WI(s){return s>>>17}function zI(s){return(131070&s)>>>1}let vf=0,Xc=0;function mv(s,o,u,l){const d=u[11];let y,f=null;for(let w=0;w<o.length;w++){const T=o[w];if("string"==typeof T){const D=o[++w];null===u[D]&&(u[D]=j_(d,T))}else if("number"==typeof T)switch(1&T){case 0:const D=WI(T);let A,P;if(null===f&&(f=D,y=bh(d,l)),D===f?(A=l,P=y):(A=null,P=Vn(u[D])),null!==P){const Ye=zI(T);qi(d,P,u[Ye],A,!1);const bt=Qc(s,Ye);if(null!==bt&&"object"==typeof bt){const Ne=yf(bt,u);null!==Ne&&mv(s,bt.create[Ne],u,u[bt.anchorIdx])}}break;case 1:const ee=o[++w],Se=o[++w];Xr(d,la(T>>>1,u),null,null,ee,Se,null)}else switch(T){case pf:const D=o[++w],A=o[++w];null===u[A]&&ci(u[A]=tD(d,D),u);break;case ff:const P=o[++w],$=o[++w];null===u[$]&&ci(u[$]=H_(d,P,null),u)}}}function KI(s,o,u,l,d){for(let f=0;f<u.length;f++){const y=u[f],w=u[++f];if(y&d){let T="";for(let D=f+1;D<=f+w;D++){const A=u[D];if("string"==typeof A)T+=A;else if("number"==typeof A)if(A<0)T+=G(o[l-A]);else{const P=A>>>2;switch(3&A){case 1:const $=u[++D],ee=u[++D],Se=s.data[P];"string"==typeof Se?Xr(o[11],o[P],null,Se,$,T,ee):Ki(s,Se,o,$,T,o[11],ee,!1);break;case 0:const Ye=o[P];null!==Ye&&$_(o[11],Ye,T);break;case 2:ed(s,Qc(s,P),o,T);break;case 3:ZI(s,Qc(s,P),l,o)}}}}else{const T=u[f+1];if(T>0&&3==(3&T)){const A=Qc(s,T>>>2);o[A.currentCaseLViewIndex]<0&&ZI(s,A,l,o)}}f+=w}}function ZI(s,o,u,l){let d=l[o.currentCaseLViewIndex];if(null!==d){let f=vf;d<0&&(d=l[o.currentCaseLViewIndex]=~d,f=-1),KI(s,l,o.update[d],u,f)}}function ed(s,o,u,l){const d=function QD(s,o){let u=s.cases.indexOf(o);if(-1===u)switch(s.type){case 1:{const l=function UI(s,o){const u=FI(o)(parseInt(s,10)),l=LI[u];return void 0!==l?l:"other"}(o,function BI(){return VI}());u=s.cases.indexOf(l),-1===u&&"other"!==l&&(u=s.cases.indexOf("other"));break}case 0:u=s.cases.indexOf("other")}return-1===u?null:u}(o,l);if(yf(o,u)!==d&&(Cl(s,o,u),u[o.currentCaseLViewIndex]=null===d?null:~d,null!==d)){const y=u[o.anchorIdx];y&&mv(s,o.create[d],u,y)}}function Cl(s,o,u){let l=yf(o,u);if(null!==l){const d=o.remove[l];for(let f=0;f<d.length;f++){const y=d[f];if(y>0){const w=la(y,u);null!==w&&X_(u[11],w)}else Cl(s,Qc(s,~y),u)}}}function JD(){const s=[];let u,l,o=-1;function f(w,T){o=0;const D=yf(w,T);l=null!==D?w.remove[D]:F}function y(){if(o<l.length){const w=l[o++];return w>0?u[w]:(s.push(o,l),f(u[1].data[~w],u),y())}return 0===s.length?null:(l=s.pop(),o=s.pop(),y())}return function d(w,T){for(u=T;s.length;)s.pop();return f(w.value,T),y}}const Ji=/\ufffd(\d+):?\d*\ufffd/gi,eS=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Xi=/\ufffd(\d+)\ufffd/,Wo=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,fi=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,tS=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,nS=/\uE500/g;function Di(s,o,u,l,d,f,y){const w=Yu(s,l,1,null);let T=w<<fr.SHIFT,D=bo();o===D&&(D=null),null===D&&(T|=fr.APPEND_EAGERLY),y&&(T|=fr.COMMENT,function eD(s){void 0===B_&&(B_=s())}(JD)),d.push(T,null===f?"":f);const A=Oh(s,w,y?32:1,null===f?"":f,null);qg(u,A);const P=A.index;return Hi(A,!1),null!==D&&o!==D&&function $I(s,o){let u=s.insertBeforeIndex;null===u?(aw(jI,Ur),u=s.insertBeforeIndex=[null,o]):(function Z(s,o,u){s!=o&&pt(u,s,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(D,P),A}function ri(s,o,u,l,d,f,y){const w=y.match(Ji),T=Di(s,o,u,f,l,w?null:y,!1);w&&bs(d,y,T.index,null,0,null)}function bs(s,o,u,l,d,f){const y=s.length,w=y+1;s.push(null,null);const T=y+2,D=o.split(Ji);let A=0;for(let P=0;P<D.length;P++){const $=D[P];if(1&P){const ee=d+parseInt($,10);s.push(-1-ee),A|=bl(ee)}else""!==$&&s.push($)}return s.push(u<<2|(l?1:0)),l&&s.push(l,f),s[y]=A,s[w]=s.length-T,A}function zo(s){let o=0;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l&&l<0&&o++}return o}function bl(s){return 1<<Math.min(s,31)}function Ui(s){let o,f,u="",l=0,d=!1;for(;null!==(o=fi.exec(s));)d?o[0]===`\ufffd/*${f}\ufffd`&&(l=o.index,d=!1):(u+=s.substring(l,o.index+o[0].length),f=o[1],d=!0);return u+=s.substr(l),u}function ts(s,o,u,l,d,f){let y=0;const w={type:d.type,currentCaseLViewIndex:Yu(s,o,1,null),anchorIdx:f,cases:[],create:[],remove:[],update:[]};(function De(s,o,u){s.push(bl(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,d,f),function _f(s,o,u){const l=s.data[o];null===l?s.data[o]=u:l.value=u}(s,f,w);const T=d.values;for(let D=0;D<T.length;D++){const A=T[D],P=[];for(let $=0;$<A.length;$++){const ee=A[$];if("string"!=typeof ee){const Se=P.push(ee)-1;A[$]=`\x3c!--\ufffd${Se}\ufffd--\x3e`}}y=YI(s,w,o,u,l,d.cases[D],A.join(""),P)|y}y&&function Zg(s,o,u){s.push(o,1,u<<2|3)}(u,y,f)}function Gr(s){const o=[],u=[];let l=1,d=0;const f=Kg(s=s.replace(Wo,function(y,w,T){return l="select"===T?0:1,d=parseInt(w.substr(1),10),""}));for(let y=0;y<f.length;){let w=f[y++].trim();1===l&&(w=w.replace(/\s*(?:=)?(\w+)\s*/,"$1")),w.length&&o.push(w);const T=Kg(f[y++]);o.length>u.length&&u.push(T)}return{type:l,mainBinding:d,cases:o,values:u}}function Kg(s){if(!s)return[];let o=0;const u=[],l=[],d=/[{}]/g;let f;for(d.lastIndex=0;f=d.exec(s);){const w=f.index;if("}"==f[0]){if(u.pop(),0==u.length){const T=s.substring(o,w);Wo.test(T)?l.push(Gr(T)):l.push(T),o=w+1}}else{if(0==u.length){const T=s.substring(o,w);l.push(T),o=w+1}u.push("{")}}const y=s.substring(o);return l.push(y),l}function YI(s,o,u,l,d,f,y,w){const T=[],D=[],A=[];o.cases.push(f),o.create.push(T),o.remove.push(D),o.update.push(A);const $=Vp(vu()).getInertBodyElement(y),ee=k_($)||$;return ee?QI(s,o,u,l,T,D,A,ee,d,w,0):0}function QI(s,o,u,l,d,f,y,w,T,D,A){let P=0,$=w.firstChild;for(;$;){const ee=Yu(s,u,1,null);switch($.nodeType){case Node.ELEMENT_NODE:const Se=$,Ye=Se.tagName.toLowerCase();if(xa.hasOwnProperty(Ye)){ns(d,ff,Ye,T,ee),s.data[ee]=Ye;const At=Se.attributes;for(let hn=0;hn<At.length;hn++){const Nn=At.item(hn),ss=Nn.name.toLowerCase();Nn.value.match(Ji)?co.hasOwnProperty(ss)&&bs(y,Nn.value,ee,Nn.name,0,Ic[ss]?S:Hu[ss]?M:null):rS(d,ee,Nn)}P=QI(s,o,u,l,d,f,y,$,ee,D,A+1)|P,yv(f,ee,A)}break;case Node.TEXT_NODE:const rt=$.textContent||"",bt=rt.match(Ji);ns(d,null,bt?"":rt,T,ee),yv(f,ee,A),bt&&(P=bs(y,rt,ee,null,0,null)|P);break;case Node.COMMENT_NODE:const Ne=Xi.exec($.textContent||"");if(Ne){const hn=D[parseInt(Ne[1],10)];ns(d,pf,"",T,ee),ts(s,u,l,T,hn,ee),JI(f,ee,A)}}$=$.nextSibling}return P}function yv(s,o,u){0===u&&s.push(o)}function JI(s,o,u){0===u&&(s.push(~o),s.push(o))}function ns(s,o,u,l,d){null!==o&&s.push(o),s.push(u,d,function gv(s,o,u){return s|o<<17|u<<1}(0,l,d))}function rS(s,o,u){s.push(o<<1|1,u.name,u.value)}const Dl=/\[(\ufffd.+?\ufffd?)\]/,iS=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Sl=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,XI=/{([A-Z0-9_]+)}/g,vv=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,eT=/\/\*/,qr=/\d+\:(\d+)/;function Yg(s,o,u=-1){const l=fn(),d=He(),f=20+s,y=Ms(l.consts,o),w=bo();l.firstCreatePass&&function mo(s,o,u,l,d,f){const y=bo(),w=[],T=[],D=[[]];d=function Ds(s,o){if(function td(s){return-1===s}(o))return Ui(s);{const u=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,l=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return Ui(s.substring(u,l))}}(d,f);const A=function pr(s){return s.replace(nS," ")}(d).split(tS);for(let P=0;P<A.length;P++){let $=A[P];if(0==(1&P)){const ee=Kg($);for(let Se=0;Se<ee.length;Se++){let Ye=ee[Se];if(0==(1&Se)){const rt=Ye;""!==rt&&ri(s,y,D[0],w,T,u,rt)}else{const rt=Ye;if("object"!=typeof rt)throw new Error(`Unable to parse ICU expression in "${d}" message.`);ts(s,u,T,o,rt,Di(s,y,D[0],u,w,"",!0).index)}}}else{const ee=47===$.charCodeAt(0),Ye=($.charCodeAt(ee?1:0),20+Number.parseInt($.substring(ee?2:1)));if(ee)D.shift(),Hi(bo(),!1);else{const rt=HI(s,D[0],Ye);D.unshift([]),Hi(rt,!0)}}}s.data[l]={create:w,update:T}}(l,null===w?0:w.index,d,f,y,u);const T=l.data[f],A=rD(l,w===d[6]?null:w,d);(function YD(s,o,u,l){const d=s[11];for(let f=0;f<o.length;f++){const y=o[f++],w=o[f],T=(y&fr.COMMENT)===fr.COMMENT,D=(y&fr.APPEND_EAGERLY)===fr.APPEND_EAGERLY,A=y>>>fr.SHIFT;let P=s[A];null===P&&(P=s[A]=T?d.createComment(w):j_(d,w)),D&&null!==u&&qi(d,u,P,l,!1)}})(d,T.create,A,w&&8&w.type?d[w.index]:null),tc(!0)}function Qg(){tc(!1)}function Ka(s,o,u){Yg(s,o,u),Qg()}function tT(s,o){const u=fn();!function es(s,o,u){const d=qn().index,f=[];if(s.firstCreatePass&&null===s.data[o]){for(let y=0;y<u.length;y+=2){const w=u[y],T=u[y+1];if(""!==T){if(eS.test(T))throw new Error(`ICU expressions are not supported in attributes. Message: "${T}".`);bs(f,T,d,w,zo(f),null)}}s.data[o]=f}}(u,s+20,Ms(u.consts,o))}function wv(s){return function GI(s){s&&(vf|=1<<Math.min(Xc,31)),Xc++}(di(He(),ha(),s)),wv}function nT(s){!function qI(s,o,u){if(Xc>0){const l=s.data[u];KI(s,o,Array.isArray(l)?l:l.update,Ps()-Xc-1,vf)}vf=0,Xc=0}(fn(),He(),s+20)}function Iv(s,o={}){return function Ev(s,o={}){let u=s;if(Dl.test(s)){const l={},d=[0];u=u.replace(iS,(f,y,w)=>{const T=y||w,D=l[T]||[];if(D.length||(T.split("|").forEach(Ye=>{const rt=Ye.match(qr),bt=rt?parseInt(rt[1],10):0,Ne=eT.test(Ye);D.push([bt,Ne,Ye])}),l[T]=D),!D.length)throw new Error(`i18n postprocess: unmatched placeholder - ${T}`);const A=d[d.length-1];let P=0;for(let Ye=0;Ye<D.length;Ye++)if(D[Ye][0]===A){P=Ye;break}const[$,ee,Se]=D[P];return ee?d.pop():A!==$&&d.push($),D.splice(P,1),Se})}return Object.keys(o).length&&(u=u.replace(Sl,(l,d,f,y,w,T)=>o.hasOwnProperty(f)?`${d}${o[f]}${T}`:l),u=u.replace(XI,(l,d)=>o.hasOwnProperty(d)?o[d]:l),u=u.replace(vv,(l,d)=>{if(o.hasOwnProperty(d)){const f=o[d];if(!f.length)throw new Error(`i18n postprocess: unmatched ICU - ${l} with key: ${d}`);return f.shift()}return l})),u}(s,o)}function Go(s,o,u,l,d){if(s=Y(s),Array.isArray(s))for(let f=0;f<s.length;f++)Go(s[f],o,u,l,d);else{const f=fn(),y=He();let w=Uc(s)?s:Y(s.provide),T=Bw(s);const D=qn(),A=1048575&D.providerIndexes,P=D.directiveStart,$=D.providerIndexes>>20;if(Uc(s)||!s.multi){const ee=new rc(T,d,Jh),Se=Rl(w,o,d?A:A+$,P);-1===Se?(Ru(Fs(D,y),f,w),qo(f,s,o.length),o.push(w),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[Se]=ee,y[Se]=ee)}else{const ee=Rl(w,o,A+$,P),Se=Rl(w,o,A,A+$),Ye=ee>=0&&u[ee],rt=Se>=0&&u[Se];if(d&&!rt||!d&&!Ye){Ru(Fs(D,y),f,w);const bt=function iT(s,o,u,l,d){const f=new rc(s,u,Jh);return f.multi=[],f.index=o,f.componentProviders=0,Al(f,d,l&&!u),f}(d?Cv:rT,u.length,d,l,T);!d&&rt&&(u[Se].providerFactory=bt),qo(f,s,o.length,0),o.push(w),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),u.push(bt),y.push(bt)}else qo(f,s,ee>-1?ee:Se,Al(u[d?Se:ee],T,!d&&l));!d&&l&&rt&&u[Se].componentProviders++}}}function qo(s,o,u,l){const d=Uc(o),f=function DD(s){return!!s.useClass}(o);if(d||f){const T=(f?Y(o.useClass):o).prototype.ngOnDestroy;if(T){const D=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const A=D.indexOf(u);-1===A?D.push(u,[l,T]):D[A+1].push(l,T)}else D.push(u,T)}}}function Al(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Rl(s,o,u,l){for(let d=u;d<l;d++)if(o[d]===s)return d;return-1}function rT(s,o,u,l){return Ef(this.multi,[])}function Cv(s,o,u,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=gs(u,u[1],this.providerFactory.index,l);f=w.slice(0,y),Ef(d,f);for(let T=y;T<w.length;T++)f.push(w[T])}else f=[],Ef(d,f);return f}function Ef(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function sS(s,o=[]){return u=>{u.providersResolver=(l,d)=>function Tv(s,o,u){const l=fn();if(l.firstCreatePass){const d=ji(s);Go(u,l.data,l.blueprint,d,!0),Go(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class bv{}class oS{resolveComponentFactory(o){throw function Dv(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let id=(()=>{class s{}return s.NULL=new oS,s})();function aS(){return sd(qn(),He())}function sd(s,o){return new wf(Vr(s,o))}let wf=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=aS,s})();function oT(s){return s instanceof wf?s.nativeElement:s}class Jg{}let uT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Av(){const s=He(),u=si(qn().index,s);return function uS(s){return s[11]}(ii(u)?u:s)}(),s})(),lS=(()=>{class s{}return s.\u0275prov=Ht({token:s,providedIn:"root",factory:()=>null}),s})();class Rv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const If=new Rv("13.2.3"),od={};function xl(s,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&l.push(Vn(f)),Bi(f))for(let w=10;w<f.length;w++){const T=f[w],D=T[1].firstChild;null!==D&&xl(T[1],T,D,l)}const y=u.type;if(8&y)xl(s,o,u.child,l);else if(32&y){const w=Wp(u,o);let T;for(;T=w();)l.push(T)}else if(16&y){const w=uw(o,u);if(Array.isArray(w))l.push(...w);else{const T=Th(o[16]);xl(T[1],T,w,l,!0)}}u=d?u.projectionNext:u.next}return l}class ad{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return xl(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Bi(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(G_(o,l),Ou(u,l))}this._attachedToViewContainer=!1}q_(this._lView[1],this._lView)}onDestroy(o){ug(this._lView[1],this._lView,null,o)}markForCheck(){Pc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gg(s,o,u){Xl(!0);try{Sy(s,o,u)}finally{Xl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qp(s,o){Yp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new je(902,"");this._appRef=o}}class Vi extends ad{constructor(o){super(o),this._view=o}detectChanges(){pg(this._view)}checkNoChanges(){!function Ay(s){Xl(!0);try{pg(s)}finally{Xl(!1)}}(this._view)}get context(){return null}}class xv extends id{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=_t(o);return new Ya(u,this.ngModule)}}function Tf(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const lT=new Zn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Z0});class Ya extends bv{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ah(s){return s.map(ny).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Tf(this.componentDef.inputs)}get outputs(){return Tf(this.componentDef.outputs)}create(o,u,l,d){const f=(d=d||this.ngModule)?function Za(s,o){return{get:(u,l,d)=>{const f=s.get(u,od,d);return f!==od||l===od?f:o.get(u,l,d)}}}(o,d.injector):o,y=f.get(Jg,Eu),w=f.get(lS,null),T=y.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",A=l?function Dw(s,o,u){if(Hn(s))return s.selectRootElement(o,u===yt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(T,l,this.componentDef.encapsulation):H_(y.createRenderer(null,this.componentDef),D,function Nv(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?zl:null}(D)),P=this.componentDef.onPush?576:528,$=function Er(s,o){return{components:[],scheduler:s||Z0,clean:Lw,playerHandler:o||null,flags:0}}(),ee=ag(0,null,null,1,0,null,null,null,null,null),Se=xc(null,ee,$,P,null,null,y,T,w,f);let Ye,rt;bu(Se);try{const bt=function Bc(s,o,u,l,d,f){const y=u[1];u[20]=s;const T=Zu(y,20,2,"#host",null),D=T.mergedAttrs=o.hostAttrs;null!==D&&(Fc(T,D,!0),null!==s&&(ps(d,s,D),null!==T.classes&&Qp(d,s,T.classes),null!==T.styles&&Dh(d,s,T.styles)));const A=l.createRenderer(s,o),P=xc(u,og(o),null,o.onPush?64:16,u[20],T,l,A,f||null,null);return y.firstCreatePass&&(Ru(Fs(T,u),y,o.type),Mw(y,T),Fh(T,u.length,1)),Mc(u,P),u[20]=P}(A,this.componentDef,Se,y,T);if(A)if(l)ps(T,A,["ng-version",If.full]);else{const{attrs:Ne,classes:At}=function cD(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&u.push(f);else{if(!cr(d))break;d=f}l++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ne&&ps(T,A,Ne),At&&At.length>0&&Qp(T,A,At.join(" "))}if(rt=Kl(ee,20),void 0!==u){const Ne=rt.projection=[];for(let At=0;At<this.ngContentSelectors.length;At++){const hn=u[At];Ne.push(null!=hn?Array.from(hn):null)}}Ye=function Zw(s,o,u,l,d){const f=u[1],y=function Nw(s,o,u){const l=qn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),wy(s,l,o,Yu(s,o,1,null),u));const d=gs(o,s,l.directiveStart,l);ci(d,o);const f=Vr(l,o);return f&&ci(f,o),d}(f,u,o);if(l.components.push(y),s[8]=y,d&&d.forEach(T=>T(y,o)),o.contentQueries){const T=qn();o.contentQueries(1,y,T.directiveStart)}const w=qn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Os(w.index),Ey(u[1],w,0,w.directiveStart,w.directiveEnd,o),Qu(o,y)),y}(bt,this.componentDef,Se,$,[Yw]),kh(ee,Se,null)}finally{Du()}return new cS(this.componentType,Ye,sd(rt,Se),Se,rt)}}class cS extends class sT{}{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new Vi(d),this.componentType=o}get injector(){return new ya(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Nl{}class Ko{}const Ss=new Map;class Cf extends Nl{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xv(this);const l=tn(o);this._bootstrapComponents=Gs(l.bootstrap),this._r3Injector=Gh(o,u,[{provide:Nl,useValue:this},{provide:id,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Or.THROW_IF_NOT_FOUND,l=Ae.Default){return o===Or||o===Nl||o===$h?this:this._r3Injector.get(o,u,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Qa extends Ko{constructor(o){super(),this.moduleType=o,null!==tn(o)&&function dS(s){const o=new Set;!function u(l){const d=tn(l,!0),f=d.id;null!==f&&(function Mv(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(f,Ss.get(f),l),Ss.set(f,l));const y=Gs(d.imports);for(const w of y)o.has(w)||(o.add(w),u(w))}(s)}(o)}create(o){return new Cf(this.moduleType,o)}}function fT(s,o,u){const l=Cr()+s,d=He();return d[l]===Zt?Es(d,l,u?o.call(u):o()):Ua(d,l)}function hS(s,o,u,l){return bf(He(),Cr(),s,o,u,l)}function fS(s,o,u,l,d){return em(He(),Cr(),s,o,u,l,d)}function pT(s,o,u,l,d,f){return mT(He(),Cr(),s,o,u,l,d,f)}function Ja(s,o,u,l,d,f,y){return _T(He(),Cr(),s,o,u,l,d,f,y)}function Xg(s,o,u,l,d,f,y,w){const T=Cr()+s,D=He(),A=Yi(D,T,u,l,d,f);return di(D,T+4,y)||A?Es(D,T+5,w?o.call(w,u,l,d,f,y):o(u,l,d,f,y)):Ua(D,T+5)}function pS(s,o,u,l,d,f,y,w,T){const D=Cr()+s,A=He(),P=Yi(A,D,u,l,d,f);return Va(A,D+4,y,w)||P?Es(A,D+6,T?o.call(T,u,l,d,f,y,w):o(u,l,d,f,y,w)):Ua(A,D+6)}function gT(s,o,u,l,d,f,y,w,T,D){const A=Cr()+s,P=He();let $=Yi(P,A,u,l,d,f);return Ba(P,A+4,y,w,T)||$?Es(P,A+7,D?o.call(D,u,l,d,f,y,w,T):o(u,l,d,f,y,w,T)):Ua(P,A+7)}function Pv(s,o,u,l,d,f,y,w,T,D,A){const P=Cr()+s,$=He(),ee=Yi($,P,u,l,d,f);return Yi($,P+4,y,w,T,D)||ee?Es($,P+8,A?o.call(A,u,l,d,f,y,w,T,D):o(u,l,d,f,y,w,T,D)):Ua($,P+8)}function Ov(s,o,u,l){return tm(He(),Cr(),s,o,u,l)}function Zo(s,o){const u=s[o];return u===Zt?void 0:u}function bf(s,o,u,l,d,f){const y=o+u;return di(s,y,d)?Es(s,y+1,f?l.call(f,d):l(d)):Zo(s,y+1)}function em(s,o,u,l,d,f,y){const w=o+u;return Va(s,w,d,f)?Es(s,w+2,y?l.call(y,d,f):l(d,f)):Zo(s,w+2)}function mT(s,o,u,l,d,f,y,w){const T=o+u;return Ba(s,T,d,f,y)?Es(s,T+3,w?l.call(w,d,f,y):l(d,f,y)):Zo(s,T+3)}function _T(s,o,u,l,d,f,y,w,T){const D=o+u;return Yi(s,D,d,f,y,w)?Es(s,D+4,T?l.call(T,d,f,y,w):l(d,f,y,w)):Zo(s,D+4)}function tm(s,o,u,l,d,f){let y=o+u,w=!1;for(let T=0;T<d.length;T++)di(s,y++,d[T])&&(w=!0);return w?Es(s,y,l.apply(f,d)):Zo(s,y)}function kv(s,o){const u=fn();let l;const d=s+20;u.firstCreatePass?(l=function gS(s,o){if(o)for(let u=o.length-1;u>=0;u--){const l=o[u];if(s===l.name)return l}}(o,u.pipeRegistry),u.data[d]=l,l.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,l.onDestroy)):l=u.data[d];const f=l.factory||(l.factory=$i(l.type)),y=qe(Jh);try{const w=sc(!1),T=f();return sc(w),function kD(s,o,u,l){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=l}(u,He(),d,T),T}finally{qe(y)}}function Fv(s,o,u){const l=s+20,d=He(),f=fs(d,l);return Df(d,l)?bf(d,Cr(),o,f.transform,u,f):f.transform(u)}function yT(s,o,u,l){const d=s+20,f=He(),y=fs(f,d);return Df(f,d)?em(f,Cr(),o,y.transform,u,l,y):y.transform(u,l)}function Lv(s,o,u,l,d){const f=s+20,y=He(),w=fs(y,f);return Df(y,f)?mT(y,Cr(),o,w.transform,u,l,d,w):w.transform(u,l,d)}function mS(s,o,u,l,d,f){const y=s+20,w=He(),T=fs(w,y);return Df(w,y)?_T(w,Cr(),o,T.transform,u,l,d,f,T):T.transform(u,l,d,f)}function vT(s,o,u){const l=s+20,d=He(),f=fs(d,l);return Df(d,l)?tm(d,Cr(),o,f.transform,u,f):f.transform.apply(f,u)}function Df(s,o){return s[1].data[o].pure}function Uv(s){return o=>{setTimeout(s,void 0,o)}}const Si=class ET extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){var d,f,y;let w=o,T=u||(()=>null),D=l;if(o&&"object"==typeof o){const P=o;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),T=null===(f=P.error)||void 0===f?void 0:f.bind(P),D=null===(y=P.complete)||void 0===y?void 0:y.bind(P)}this.__isAsync&&(T=Uv(T),w&&(w=Uv(w)),D&&(D=Uv(D)));const A=super.subscribe({next:w,error:T,complete:D});return o instanceof O.w0&&o.add(A),A}};function cd(){return this._results[La()]()}class Sf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=La(),l=Sf.prototype;l[u]||(l[u]=cd)}get changes(){return this._changes||(this._changes=new Si)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=ui(o);(this._changesDetected=!function cc(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xa=(()=>{class s{}return s.__NG_ELEMENT_ID__=_S,s})();const wT=Xa,IT=class extends wT{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o){const u=this._declarationTContainer.tViews,l=xc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(u)),kh(u,l,o),new ad(l)}};function _S(){return dd(qn(),He())}function dd(s,o){return 4&s.type?new IT(o,s,sd(s,o)):null}let nm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Vv,s})();function Vv(){return im(qn(),He())}const yS=nm,rm=class extends yS{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return sd(this._hostTNode,this._hostLView)}get injector(){return new ya(this._hostTNode,this._hostLView)}get parentInjector(){const o=ga(this._hostTNode,this._hostLView);if(ar(o)){const u=pa(o,this._hostLView),l=fa(o);return new ya(u[1].data[l+8],u)}return new ya(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=TT(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,l){const d=o.createEmbeddedView(u||{});return this.insert(d,l),d}createComponent(o,u,l,d,f){const y=o&&!Mu(o);let w;if(y)w=u;else{const P=u||{};w=P.index,l=P.injector,d=P.projectableNodes,f=P.ngModuleRef}const T=y?o:new Ya(_t(o)),D=l||this.parentInjector;if(!f&&null==T.ngModule){const $=(y?D:this.parentInjector).get(Nl,null);$&&(f=$)}const A=T.create(D,d,void 0,f);return this.insert(A.hostView,w),A}insert(o,u){const l=o._lView,d=l[1];if(function Zl(s){return Bi(s[3])}(l)){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const P=l[3],$=new rm(P,P[6],P[3]);$.detach($.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function z_(s,o,u,l){const d=10+l,f=u.length;l>0&&(u[d-1][4]=o),l<f-10?(o[4]=u[d],Pu(u,10+l,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Ac(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,y,f);const w=J_(f,y),T=l[11],D=bh(T,y[7]);return null!==D&&function nD(s,o,u,l,d,f){l[0]=d,l[6]=o,Yp(s,l,u,1,d,f)}(d,y[6],T,l,D,w),o.attachToViewContainerRef(),Pu(Bv(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=TT(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=G_(this._lContainer,u);l&&(Ou(Bv(this._lContainer),u),q_(l[1],l))}detach(o){const u=this._adjustIndex(o,-1),l=G_(this._lContainer,u);return l&&null!=Ou(Bv(this._lContainer),u)?new ad(l):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function TT(s){return s[8]}function Bv(s){return s[8]||(s[8]=[])}function im(s,o){let u;const l=o[s.index];if(Bi(l))u=l;else{let d;if(8&s.type)d=Vn(l);else{const f=o[11];d=f.createComment("");const y=Vr(s,o);qi(f,bh(f,y),d,function sD(s,o){return Hn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=Ty(l,o,d,s),Mc(o,u)}return new rm(u,s,o)}class jv{constructor(o){this.queryList=o,this.matches=null}clone(){return new jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class $v{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new $v(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==AT(o,u).matches&&this.queries[u].setDirty()}}class CT{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class Hv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new Hv(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Af{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Af(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,bT(u,f)),this.matchTNodeWithReadOption(o,u,_a(u,o,f,!1,!1))}else l===Xa?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,_a(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===wf||d===nm||d===Xa&&4&u.type)this.addMatch(u.index,-2);else{const f=_a(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function bT(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Wv(s,o,u,l){return-1===u?function DT(s,o){return 11&s.type?sd(s,o):4&s.type?dd(s,o):null}(o,s):-2===u?function sm(s,o,u){return u===wf?sd(o,s):u===Xa?dd(o,s):u===nm?im(o,s):void 0}(s,o,l):gs(s,s[1],u,o)}function hd(s,o,u,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,y=u.matches,w=[];for(let T=0;T<y.length;T+=2){const D=y[T];w.push(D<0?null:Wv(o,f[D],y[T+1],u.metadata.read))}d.matches=w}return d.matches}function fd(s,o,u,l){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=hd(s,o,d,u);for(let w=0;w<f.length;w+=2){const T=f[w];if(T>0)l.push(y[w/2]);else{const D=f[w+1],A=o[-T];for(let P=10;P<A.length;P++){const $=A[P];$[17]===$[3]&&fd($[1],$,D,l)}if(null!==A[9]){const P=A[9];for(let $=0;$<P.length;$++){const ee=P[$];fd(ee[1],ee,D,l)}}}}}return l}function om(s){const o=He(),u=fn(),l=a_();Jd(l+1);const d=AT(u,l);if(s.dirty&&To(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?fd(u,o,l,[]):hd(u,o,d,l);s.reset(f,oT),s.notifyOnChanges()}return!0}return!1}function zv(s,o,u){const l=fn();l.firstCreatePass&&(ST(l,new CT(s,o,u),-1),2==(2&o)&&(l.staticViewQueries=!0)),qv(l,He(),o)}function am(s,o,u,l){const d=fn();if(d.firstCreatePass){const f=qn();ST(d,new CT(o,u,l),f.index),function wS(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}qv(d,He(),u)}function Gv(){return function ES(s,o){return s[19].queries[o].queryList}(He(),a_())}function qv(s,o,u){const l=new Sf(4==(4&u));ug(s,o,l,l.destroy),null===o[19]&&(o[19]=new $v),o[19].queries.push(new jv(l))}function ST(s,o,u){null===s.queries&&(s.queries=new Hv),s.queries.track(new Af(o,u))}function AT(s,o){return s.queries.getByIndex(o)}function RT(s,o){return dd(s,o)}const Zr=(()=>({\u0275\u0275attribute:Sg,\u0275\u0275attributeInterpolate1:Ly,\u0275\u0275attributeInterpolate2:Uy,\u0275\u0275attributeInterpolate3:Yh,\u0275\u0275attributeInterpolate4:ki,\u0275\u0275attributeInterpolate5:Vy,\u0275\u0275attributeInterpolate6:By,\u0275\u0275attributeInterpolate7:al,\u0275\u0275attributeInterpolate8:rI,\u0275\u0275attributeInterpolateV:iI,\u0275\u0275defineComponent:Ve,\u0275\u0275defineDirective:be,\u0275\u0275defineInjectable:Ht,\u0275\u0275defineInjector:ze,\u0275\u0275defineNgModule:Q,\u0275\u0275definePipe:nt,\u0275\u0275directiveInject:Jh,\u0275\u0275getInheritedFactory:Dr,\u0275\u0275inject:sr,\u0275\u0275injectAttribute:xo,\u0275\u0275invalidFactory:Fr,\u0275\u0275invalidFactoryDep:mc,\u0275\u0275templateRefExtractor:RT,\u0275\u0275NgOnChangesFeature:mu,\u0275\u0275ProvidersFeature:sS,\u0275\u0275CopyDefinitionFeature:nI,\u0275\u0275InheritDefinitionFeature:Jw,\u0275\u0275nextContext:gI,\u0275\u0275namespaceHTML:Ab,\u0275\u0275namespaceMathML:Sb,\u0275\u0275namespaceSVG:Db,\u0275\u0275enableBindings:i_,\u0275\u0275disableBindings:Kd,\u0275\u0275elementStart:Mg,\u0275\u0275elementEnd:Ys,\u0275\u0275element:er,\u0275\u0275elementContainerStart:Pg,\u0275\u0275elementContainerEnd:fl,\u0275\u0275elementContainer:fI,\u0275\u0275pureFunction0:fT,\u0275\u0275pureFunction1:hS,\u0275\u0275pureFunction2:fS,\u0275\u0275pureFunction3:pT,\u0275\u0275pureFunction4:Ja,\u0275\u0275pureFunction5:Xg,\u0275\u0275pureFunction6:pS,\u0275\u0275pureFunction7:gT,\u0275\u0275pureFunction8:Pv,\u0275\u0275pureFunctionV:Ov,\u0275\u0275getCurrentView:pl,\u0275\u0275restoreView:k0,\u0275\u0275listener:vt,\u0275\u0275projection:Og,\u0275\u0275syntheticHostProperty:Il,\u0275\u0275syntheticHostListener:pI,\u0275\u0275pipeBind1:Fv,\u0275\u0275pipeBind2:yT,\u0275\u0275pipeBind3:Lv,\u0275\u0275pipeBind4:mS,\u0275\u0275pipeBindV:vT,\u0275\u0275projectionDef:Ky,\u0275\u0275hostProperty:dv,\u0275\u0275property:hl,\u0275\u0275propertyInterpolate:kg,\u0275\u0275propertyInterpolate1:qc,\u0275\u0275propertyInterpolate2:Zy,\u0275\u0275propertyInterpolate3:Yy,\u0275\u0275propertyInterpolate4:Xh,\u0275\u0275propertyInterpolate5:Kc,\u0275\u0275propertyInterpolate6:ti,\u0275\u0275propertyInterpolate7:Qy,\u0275\u0275propertyInterpolate8:tr,\u0275\u0275propertyInterpolateV:Fg,\u0275\u0275pipe:kv,\u0275\u0275queryRefresh:om,\u0275\u0275viewQuery:zv,\u0275\u0275loadQuery:Gv,\u0275\u0275contentQuery:am,\u0275\u0275reference:sI,\u0275\u0275classMap:TI,\u0275\u0275classMapInterpolate1:af,\u0275\u0275classMapInterpolate2:WD,\u0275\u0275classMapInterpolate3:zD,\u0275\u0275classMapInterpolate4:Rr,\u0275\u0275classMapInterpolate5:Hg,\u0275\u0275classMapInterpolate6:Wg,\u0275\u0275classMapInterpolate7:GD,\u0275\u0275classMapInterpolate8:av,\u0275\u0275classMapInterpolateV:qD,\u0275\u0275styleMap:Qs,\u0275\u0275styleMapInterpolate1:xI,\u0275\u0275styleMapInterpolate2:NI,\u0275\u0275styleMapInterpolate3:uf,\u0275\u0275styleMapInterpolate4:wl,\u0275\u0275styleMapInterpolate5:MI,\u0275\u0275styleMapInterpolate6:PI,\u0275\u0275styleMapInterpolate7:OI,\u0275\u0275styleMapInterpolate8:lf,\u0275\u0275styleMapInterpolateV:uv,\u0275\u0275styleProp:II,\u0275\u0275stylePropInterpolate1:kI,\u0275\u0275stylePropInterpolate2:wr,\u0275\u0275stylePropInterpolate3:In,\u0275\u0275stylePropInterpolate4:lv,\u0275\u0275stylePropInterpolate5:cv,\u0275\u0275stylePropInterpolate6:hr,\u0275\u0275stylePropInterpolate7:cf,\u0275\u0275stylePropInterpolate8:zr,\u0275\u0275stylePropInterpolateV:Yn,\u0275\u0275classProp:Xy,\u0275\u0275advance:hw,\u0275\u0275template:OD,\u0275\u0275text:AI,\u0275\u0275textInterpolate:RI,\u0275\u0275textInterpolate1:sf,\u0275\u0275textInterpolate2:vl,\u0275\u0275textInterpolate3:za,\u0275\u0275textInterpolate4:rv,\u0275\u0275textInterpolate5:Ga,\u0275\u0275textInterpolate6:iv,\u0275\u0275textInterpolate7:El,\u0275\u0275textInterpolate8:sv,\u0275\u0275textInterpolateV:ov,\u0275\u0275i18n:Ka,\u0275\u0275i18nAttributes:tT,\u0275\u0275i18nExp:wv,\u0275\u0275i18nStart:Yg,\u0275\u0275i18nEnd:Qg,\u0275\u0275i18nApply:nT,\u0275\u0275i18nPostprocess:Iv,\u0275\u0275resolveWindow:Qb,\u0275\u0275resolveDocument:Y0,\u0275\u0275resolveBody:Nx,\u0275\u0275setComponentScope:at,\u0275\u0275setNgModuleScope:B,\u0275\u0275sanitizeHtml:j0,\u0275\u0275sanitizeStyle:$0,\u0275\u0275sanitizeResourceUrl:vh,\u0275\u0275sanitizeScript:xb,\u0275\u0275sanitizeUrl:bc,\u0275\u0275sanitizeUrlOrResourceUrl:$p,\u0275\u0275trustConstantHtml:Nb,\u0275\u0275trustConstantResourceUrl:Mb,forwardRef:U,resolveForwardRef:Y}))(),Rf=[];function dm(s){return function CS(s){return void 0!==s.ngModule}(s)?s.ngModule:s}const HT=Ls("NgModule",s=>s,void 0,void 0,(s,o)=>function Yv(s,o={}){(function gd(s,o,u=!1){const l=ui(o.declarations||F);let d=null;Object.defineProperty(s,ne,{configurable:!0,get:()=>(null===d&&(d=lr().compileNgModule(Zr,`ng:///${s.name}/\u0275mod.js`,{type:s,bootstrap:ui(o.bootstrap||F).map(Y),declarations:l.map(Y),imports:ui(o.imports||F).map(Y).map(dm),exports:ui(o.exports||F).map(Y).map(dm),schemas:o.schemas?ui(o.schemas):null,id:o.id||null}),d.schemas||(d.schemas=[])),d)});let f=null;Object.defineProperty(s,ot,{get:()=>{if(null===f){const w=lr();f=w.compileFactory(Zr,`ng:///${s.name}/\u0275fac.js`,{name:s.name,type:s,deps:Uu(s),target:w.FactoryTarget.NgModule,typeArgumentCount:0})}return f},configurable:!1});let y=null;Object.defineProperty(s,xn,{get:()=>{if(null===y){const w={name:s.name,type:s,providers:o.providers||F,imports:[(o.imports||F).map(Y),(o.exports||F).map(Y)]};y=lr().compileInjector(Zr,`ng:///${s.name}/\u0275inj.js`,w)}return y},configurable:!1})})(s,o),function IS(s,o){Rf.push({moduleType:s,ngModule:o})}(s,o)}(s,o));function Yo(...s){}const iE=new Zn("Application Initializer");let tu=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Yo,this.reject=Yo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if($o(f))u.push(f);else if(qy(f)){const y=new Promise((w,T)=>{f.subscribe({complete:w,error:T})});u.push(y)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(sr(iE,8))},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();const mm=new Zn("AppId"),oE={provide:mm,useFactory:function sE(){return`${aE()}${aE()}${aE()}`},deps:[]};function aE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WT=new Zn("Platform Initializer"),_m=new Zn("Platform ID"),ym=new Zn("appBootstrapListener");let uE=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();const vm=new Zn("LocaleId"),lE=new Zn("DefaultCurrencyCode");class xS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let cE=(()=>{class s{compileModuleSync(u){return new Qa(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),f=Gs(tn(u).declarations).reduce((y,w)=>{const T=_t(w);return T&&y.push(new Ya(T)),y},[]);return new xS(l,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();const dE=(()=>Promise.resolve(0))();function Ff(s){"undefined"==typeof Zone?dE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class rs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hE(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function zT(s){const o=()=>{!function gE(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Lf(s),s.isCheckStableRunning=!0,pE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Lf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,y,w)=>{try{return mE(s),u.invokeTask(d,f,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),GT(s)}},onInvoke:(u,l,d,f,y,w,T)=>{try{return mE(s),u.invoke(d,f,y,w,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),GT(s)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Lf(s),pE(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,fE,Yo,Yo);try{return f.runTask(y,u,l)}finally{f.cancelTask(y)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const fE={};function pE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Lf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function mE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function GT(s){s._nesting--,pE(s)}class _E{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}let qT=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),Ff(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ff(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(sr(rs))},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})(),Em=(()=>{class s{constructor(){this._applications=new Map,vE.addToWindow(this)}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return vE.findTestabilityInTree(this,u,l)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();class MS{addToWindow(o){}findTestabilityInTree(o,u,l){return null}}function yE(s){vE=s}let is,vE=new MS;const wE=new Zn("AllowMultipleToken");class IE{constructor(o,u){this.name=o,this.token=u}}function wm(s,o,u=[]){const l=`Platform: ${o}`,d=new Zn(l);return(f=[])=>{let y=YT();if(!y||y.injector.get(wE,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const w=u.concat(f).concat({provide:d,useValue:!0},{provide:_g,useValue:"platform"});!function PS(s){if(is&&!is.destroyed&&!is.injector.get(wE,!1))throw new je(400,"");is=s.get(Im);const o=s.get(WT,null);o&&o.forEach(u=>u())}(Or.create({providers:w,name:l}))}return function Qo(s){const o=YT();if(!o)throw new je(401,"");return o}()}}function YT(){return is&&!is.destroyed?is:null}let Im=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const w=function OS(s,o){let u;return u="noop"===s?new _E:("zone.js"===s?void 0:s)||new rs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),T=[{provide:rs,useValue:w}];return w.run(()=>{const D=Or.create({providers:T,parent:this.injector,name:u.moduleType.name}),A=u.create(D),P=A.injector.get(Ih,null);if(!P)throw new je(402,"");return w.runOutsideAngular(()=>{const $=w.onError.subscribe({next:ee=>{P.handleError(ee)}});A.onDestroy(()=>{Vf(this._modules,A),$.unsubscribe()})}),function kS(s,o,u){try{const l=u();return $o(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,w,()=>{const $=A.injector.get(tu);return $.runInitializers(),$.donePromise.then(()=>(function gf(s){(function ut(s,o){null==s&&pt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(VI=s.toLowerCase().replace(/_/g,"-"))}(A.injector.get(vm,hf)||hf),this._moduleDoBootstrap(A),A))})})}bootstrapModule(u,l=[]){const d=Tm({},l);return function EE(s,o,u){const l=new Qa(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get(Uf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new je(403,"");u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(sr(Or))},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();function Tm(s,o){return Array.isArray(o)?o.reduce(Tm,s):Object.assign(Object.assign({},s),o)}let Uf=(()=>{class s{constructor(u,l,d,f,y){this._zone=u,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new N.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),T=new N.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{rs.assertNotInAngularZone(),Ff(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(w,T.pipe((0,me.B)()))}bootstrap(u,l){if(!this._initStatus.done)throw new je(405,"");let d;d=u instanceof bv?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function yd(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Nl),w=d.create(Or.NULL,[],l||d.selector,f),T=w.location.nativeElement,D=w.injector.get(qT,null),A=D&&w.injector.get(Em);return D&&A&&A.registerApplication(T,D),w.onDestroy(()=>{this.detachView(w.hostView),Vf(this.components,w),A&&A.unregisterApplication(T)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new je(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Vf(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ym,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(sr(rs),sr(Or),sr(Ih),sr(id),sr(tu))},s.\u0275prov=Ht({token:s,factory:s.\u0275fac}),s})();function Vf(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let JT=!0,Cm=!1;function XT(){return Cm=!0,JT}function CE(){if(Cm)throw new Error("Cannot enable prod mode after platform setup.");JT=!1}let bE=(()=>{class s{}return s.__NG_ELEMENT_ID__=LS,s})();function LS(s){return function DE(s,o,u){if($d(s)&&!u){const l=si(s.index,o);return new ad(l,l)}return 47&s.type?new ad(o[16],o):null}(qn(),He(),16==(16&s))}class Am{constructor(){}supports(o){return jc(o)}create(o){return new xE(o)}}const uC=(s,o)=>o;class xE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||uC}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const y=!l||u&&u.currentIndex<cC(l,d,f)?u:l,w=cC(y,d,f),T=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const D=w-d,A=T-d;if(D!=A){for(let $=0;$<D;$++){const ee=$<f.length?f[$]:f[$]=0,Se=ee+$;A<=Se&&Se<D&&(f[$]=ee+1)}f[y.previousIndex]=A-D}}w!==T&&o(y,w,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!jc(o))throw new je(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,f,y,w)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,w),l=!0),u=u._next}else d=0,function bg(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[La()]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,w,y,d)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,y,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new wd(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new lC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class wd{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class lC{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new NE,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cC(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class dC{constructor(){}supports(o){return o instanceof Map||Dg(o)}create(){return new hC}}class hC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Dg(o)))throw new je(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new $S(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class $S{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ME(){return new Rm([new Am])}let Rm=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||ME()),deps:[[s,new Po,new Bs]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new je(901,"")}}return s.\u0275prov=Ht({token:s,providedIn:"root",factory:ME}),s})();function fC(){return new xm([new dC])}let xm=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||fC()),deps:[[s,new Po,new Bs]]}}find(u){const l=this.factories.find(f=>f.supports(u));if(l)return l;throw new je(901,"")}}return s.\u0275prov=Ht({token:s,providedIn:"root",factory:fC}),s})();const pC=[new dC],gC=new Rm([new Am]),mC=new xm(pC),Nm=wm(null,"core",[{provide:_m,useValue:"unknown"},{provide:Im,deps:[Or]},{provide:Em,deps:[]},{provide:uE,deps:[]}]),WS=[{provide:Uf,useClass:Uf,deps:[rs,Or,Ih,id,tu]},{provide:lT,deps:[rs],useFactory:function Qn(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:tu,useClass:tu,deps:[[new Bs,iE]]},{provide:cE,useClass:cE,deps:[]},oE,{provide:Rm,useFactory:function Tn(){return gC},deps:[]},{provide:xm,useFactory:function _C(){return mC},deps:[]},{provide:vm,useFactory:function yC(s){return s||function jf(){return"undefined"!=typeof $localize&&$localize.locale||hf}()},deps:[[new Vs(vm),new Bs,new Po]]},{provide:lE,useValue:"USD"}];let pi=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(sr(Uf))},s.\u0275mod=Q({type:s}),s.\u0275inj=ze({providers:WS}),s})()},3942:(Tt,Me,x)=>{"use strict";x.d(Me,{Z:()=>je});var _=x(2090),O=x(4859),N=x(9681),oe=x(1877);class me{constructor(G,ie){this._delegate=G,this.firebase=ie,(0,N._addComponent)(G,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=G.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this._delegate.automaticDataCollectionEnabled=G}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(G=>{this._delegate.checkDestroyed(),G()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(G,ie=N._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(G);return!Re.isInitialized()&&"EXPLICIT"===(null===(ke=Re.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:ie})}_removeServiceInstance(G,ie=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(G).clearInstance(ie)}_addComponent(G){(0,N._addComponent)(this._delegate,G)}_addOrOverwriteComponent(G){(0,N._addOrOverwriteComponent)(this._delegate,G)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ge(){const Le=function ce(Le){const G={},ie={__esModule:!0,initializeApp:function ue(J,ct={}){const Z=N.initializeApp(J,ct);if((0,_.r3)(G,Z.name))return G[Z.name];const pe=new Le(Z,ie);return G[Z.name]=pe,pe},app:Re,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ye(J){const ct=J.name,Z=ct.replace("-compat","");if(N._registerComponent(J)&&"PUBLIC"===J.type){const pe=(ae=Re())=>{if("function"!=typeof ae[Z])throw se.create("invalid-app-argument",{appName:ct});return ae[Z]()};void 0!==J.serviceProps&&(0,_.ZB)(pe,J.serviceProps),ie[Z]=pe,Le.prototype[Z]=function(...ae){return this._getService.bind(this,ct).apply(this,J.multipleInstances?ae:[])}}return"PUBLIC"===J.type?ie[Z]:null},removeApp:function ke(J){delete G[J]},useAsService:function Qe(J,ct){return"serverAuth"===ct?null:ct},modularAPIs:N}};function Re(J){if(!(0,_.r3)(G,J=J||N._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:J});return G[J]}return ie.default=ie,Object.defineProperty(ie,"apps",{get:function Ce(){return Object.keys(G).map(J=>G[J])}}),Re.App=Le,ie}(me);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function G(ie){(0,_.ZB)(Le,ie)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Le}(),U=new oe.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=V;!function xe(Le){(0,N.registerVersion)("@firebase/app-compat","0.1.18",Le)}()},9681:(Tt,Me,x)=>{"use strict";x.r(Me),x.d(Me,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>qt,_DEFAULT_ENTRY_NAME:()=>_n,_addComponent:()=>yn,_addOrOverwriteComponent:()=>Bn,_apps:()=>pt,_clearComponents:()=>gt,_components:()=>Gt,_getProvider:()=>kt,_registerComponent:()=>Ht,_removeServiceInstance:()=>ze,deleteApp:()=>zn,getApp:()=>xn,getApps:()=>bn,initializeApp:()=>Cn,onLog:()=>Pe,registerVersion:()=>he,setLogLevel:()=>qe});var _=x(5861),O=x(4859),N=x(1877),oe=x(2090);class me{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function _e(Je){const tt=Je.getComponent();return"VERSION"===(null==tt?void 0:tt.type)}(St)){const Ft=St.getImmediate();return`${Ft.library}/${Ft.version}`}return null}).filter(St=>St).join(" ")}}const se="@firebase/app",ge=new N.Yd("@firebase/app"),_n="[DEFAULT]",ut={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pt=new Map,Gt=new Map;function yn(Je,tt){try{Je.container.addComponent(tt)}catch(St){ge.debug(`Component ${tt.name} failed to register with FirebaseApp ${Je.name}`,St)}}function Bn(Je,tt){Je.container.addOrOverwriteComponent(tt)}function Ht(Je){const tt=Je.name;if(Gt.has(tt))return ge.debug(`There were multiple attempts to register component ${tt}.`),!1;Gt.set(tt,Je);for(const St of pt.values())yn(St,Je);return!0}function kt(Je,tt){return Je.container.getProvider(tt)}function ze(Je,tt,St=_n){kt(Je,tt).clearInstance(St)}function gt(){Gt.clear()}const jt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Xt{constructor(tt,St,Ft){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=Ft,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const qt="9.6.7";function Cn(Je,tt={}){"object"!=typeof tt&&(tt={name:tt});const St=Object.assign({name:_n,automaticDataCollectionEnabled:!1},tt),Ft=St.name;if("string"!=typeof Ft||!Ft)throw jt.create("bad-app-name",{appName:String(Ft)});const zt=pt.get(Ft);if(zt){if((0,oe.vZ)(Je,zt.options)&&(0,oe.vZ)(St,zt.config))return zt;throw jt.create("duplicate-app",{appName:Ft})}const yt=new O.H0(Ft);for(const it of Gt.values())yt.addComponent(it);const dt=new Xt(Je,St,yt);return pt.set(Ft,dt),dt}function xn(Je=_n){const tt=pt.get(Je);if(!tt)throw jt.create("no-app",{appName:Je});return tt}function bn(){return Array.from(pt.values())}function zn(Je){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,_.Z)(function*(Je){const tt=Je.name;pt.has(tt)&&(pt.delete(tt),yield Promise.all(Je.container.getProviders().map(St=>St.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function he(Je,tt,St){var Ft;let zt=null!==(Ft=ut[Je])&&void 0!==Ft?Ft:Je;St&&(zt+=`-${St}`);const yt=zt.match(/\s|\//),dt=tt.match(/\s|\//);if(yt||dt){const it=[`Unable to register library "${zt}" with version "${tt}":`];return yt&&it.push(`library name "${zt}" contains illegal characters (whitespace or "/")`),yt&&dt&&it.push("and"),dt&&it.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void ge.warn(it.join(" "))}Ht(new O.wA(`${zt}-version`,()=>({library:zt,version:tt}),"VERSION"))}function Pe(Je,tt){if(null!==Je&&"function"!=typeof Je)throw jt.create("invalid-log-argument");(0,N.Am)(Je,tt)}function qe(Je){(0,N.Ub)(Je)}!function Et(Je){Ht(new O.wA("platform-logger",tt=>new me(tt),"PRIVATE")),he(se,"0.7.17",Je),he(se,"0.7.17","esm2017"),he("fire-js","")}("")},4859:(Tt,Me,x)=>{"use strict";x.d(Me,{wA:()=>N,H0:()=>ce});var _=x(5861),O=x(2090);class N{constructor(V,U,Y){this.name=V,this.instanceFactory=U,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const oe="[DEFAULT]";class me{constructor(V,U){this.name=V,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const U=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(U)){const Y=new O.BH;if(this.instancesDeferred.set(U,Y),this.isInitialized(U)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:U});Ue&&Y.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(U).promise}getImmediate(V){var U;const Y=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),Ue=null!==(U=null==V?void 0:V.optional)&&void 0!==U&&U;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(xe){if(Ue)return null;throw xe}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function se(ge){return"EAGER"===ge.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(U){}for(const[U,Y]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(U);try{const xe=this.getOrInitializeService({instanceIdentifier:Ue});Y.resolve(xe)}catch(xe){}}}}clearInstance(V=oe){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,_.Z)(function*(){const U=Array.from(V.instances.values());yield Promise.all([...U.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...U.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=oe){return this.instances.has(V)}getOptions(V=oe){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:U={}}=V,Y=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Y,options:U});for(const[xe,je]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(xe)&&je.resolve(Ue);return Ue}onInit(V,U){var Y;const Ue=this.normalizeInstanceIdentifier(U),xe=null!==(Y=this.onInitCallbacks.get(Ue))&&void 0!==Y?Y:new Set;xe.add(V),this.onInitCallbacks.set(Ue,xe);const je=this.instances.get(Ue);return je&&V(je,Ue),()=>{xe.delete(V)}}invokeOnInitCallbacks(V,U){const Y=this.onInitCallbacks.get(U);if(Y)for(const Ue of Y)try{Ue(V,U)}catch(xe){}}getOrInitializeService({instanceIdentifier:V,options:U={}}){let Y=this.instances.get(V);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=V,ge===oe?void 0:ge),options:U}),this.instances.set(V,Y),this.instancesOptions.set(V,U),this.invokeOnInitCallbacks(Y,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Y)}catch(Ue){}var ge;return Y||null}normalizeInstanceIdentifier(V=oe){return this.component?this.component.multipleInstances?V:oe:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const U=this.getProvider(V.name);if(U.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);U.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const U=new me(V,this);return this.providers.set(V,U),U}getProviders(){return Array.from(this.providers.values())}}},2833:(Tt,Me,x)=>{"use strict";var _=x(5861),O=x(9681),N=x(4859),oe=x(2090),me=x(2940);const _e="@firebase/installations",ge="w:0.5.5",V="FIS_v2",Le=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function G(L){return L instanceof oe.ZR&&L.code.includes("request-failed")}function ie({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function ke(L){return{token:L.token,requestStatus:2,expiresIn:ct(L.expiresIn),creationTime:Date.now()}}function Re(L,re){return ue.apply(this,arguments)}function ue(){return(ue=(0,_.Z)(function*(L,re){const Ze=(yield re.json()).error;return Le.create("request-failed",{requestName:L,serverCode:Ze.code,serverMessage:Ze.message,serverStatus:Ze.status})})).apply(this,arguments)}function Ce({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function ye(L,{refreshToken:re}){const Be=Ce(L);return Be.append("Authorization",function Z(L){return`${V} ${L}`}(re)),Be}function Qe(L){return J.apply(this,arguments)}function J(){return(J=(0,_.Z)(function*(L){const re=yield L();return re.status>=500&&re.status<600?L():re})).apply(this,arguments)}function ct(L){return Number(L.replace("s","000"))}function pe(L,re){return ae.apply(this,arguments)}function ae(){return(ae=(0,_.Z)(function*(L,{fid:re}){const Be=ie(L),dn={method:"POST",headers:Ce(L),body:JSON.stringify({fid:re,authVersion:V,appId:L.appId,sdkVersion:ge})},nn=yield Qe(()=>fetch(Be,dn));if(nn.ok){const jn=yield nn.json();return{fid:jn.fid||re,registrationStatus:2,refreshToken:jn.refreshToken,authToken:ke(jn.authToken)}}throw yield Re("Create Installation",nn)})).apply(this,arguments)}function fe(L){return new Promise(re=>{setTimeout(re,L)})}const le=/^[cdef][\w-]{21}$/;function Bt(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const Be=function _n(L){return function $e(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return le.test(Be)?Be:""}catch(L){return""}}function ut(L){return`${L.appName}!${L.appId}`}const pt=new Map;function Gt(L,re){const Be=ut(L);Ht(Be,re),function kt(L,re){const Be=function gt(){return!ze&&"BroadcastChannel"in self&&(ze=new BroadcastChannel("[Firebase] FID Change"),ze.onmessage=L=>{Ht(L.data.key,L.data.fid)}),ze}();Be&&Be.postMessage({key:L,fid:re}),function mt(){0===pt.size&&ze&&(ze.close(),ze=null)}()}(Be,re)}function Ht(L,re){const Be=pt.get(L);if(Be)for(const Ze of Be)Ze(re)}let ze=null;const qt="firebase-installations-store";let Cn=null;function xn(){return Cn||(Cn=(0,me.openDb)("firebase-installations-database",1,L=>{0===L.oldVersion&&L.createObjectStore(qt)})),Cn}function bn(L,re){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(L,re){const Be=ut(L),un=(yield xn()).transaction(qt,"readwrite"),dn=un.objectStore(qt),nn=yield dn.get(Be);return yield dn.put(re,Be),yield un.complete,(!nn||nn.fid!==re.fid)&&Gt(L,re.fid),re})).apply(this,arguments)}function Ae(L){return he.apply(this,arguments)}function he(){return(he=(0,_.Z)(function*(L){const re=ut(L),Ze=(yield xn()).transaction(qt,"readwrite");yield Ze.objectStore(qt).delete(re),yield Ze.complete})).apply(this,arguments)}function Pe(L,re){return qe.apply(this,arguments)}function qe(){return(qe=(0,_.Z)(function*(L,re){const Be=ut(L),un=(yield xn()).transaction(qt,"readwrite"),dn=un.objectStore(qt),nn=yield dn.get(Be),jn=re(nn);return void 0===jn?yield dn.delete(Be):yield dn.put(jn,Be),yield un.complete,jn&&(!nn||nn.fid!==jn.fid)&&Gt(L,jn.fid),jn})).apply(this,arguments)}function Et(L){return Je.apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(L){let re;const Be=yield Pe(L,Ze=>{const un=tt(Ze),dn=St(L,un);return re=dn.registrationPromise,dn.installationEntry});return""===Be.fid?{installationEntry:yield re}:{installationEntry:Be,registrationPromise:re}})).apply(this,arguments)}function tt(L){return Un(L||{fid:Bt(),registrationStatus:0})}function St(L,re){if(0===re.registrationStatus){if(!navigator.onLine)return{installationEntry:re,registrationPromise:Promise.reject(Le.create("app-offline"))};const Be={fid:re.fid,registrationStatus:1,registrationTime:Date.now()},Ze=function Ft(L,re){return zt.apply(this,arguments)}(L,Be);return{installationEntry:Be,registrationPromise:Ze}}return 1===re.registrationStatus?{installationEntry:re,registrationPromise:yt(L)}:{installationEntry:re}}function zt(){return(zt=(0,_.Z)(function*(L,re){try{return bn(L,yield pe(L,re))}catch(Be){throw G(Be)&&409===Be.customData.serverCode?yield Ae(L):yield bn(L,{fid:re.fid,registrationStatus:0}),Be}})).apply(this,arguments)}function yt(L){return dt.apply(this,arguments)}function dt(){return(dt=(0,_.Z)(function*(L){let re=yield it(L);for(;1===re.registrationStatus;)yield fe(100),re=yield it(L);if(0===re.registrationStatus){const{installationEntry:Be,registrationPromise:Ze}=yield Et(L);return Ze||Be}return re})).apply(this,arguments)}function it(L){return Pe(L,re=>{if(!re)throw Le.create("installation-not-found");return Un(re)})}function Un(L){return function Tr(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function Wt(L,re){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*({appConfig:L,platformLoggerProvider:re},Be){const Ze=wn(L,Be),un=ye(L,Be),dn=re.getImmediate({optional:!0});dn&&un.append("x-firebase-client",dn.getPlatformInfoString());const jn={method:"POST",headers:un,body:JSON.stringify({installation:{sdkVersion:ge}})},xi=yield Qe(()=>fetch(Ze,jn));if(xi.ok)return ke(yield xi.json());throw yield Re("Generate Auth Token",xi)})).apply(this,arguments)}function wn(L,{fid:re}){return`${ie(L)}/${re}/authTokens:generate`}function en(L){return F.apply(this,arguments)}function F(){return(F=(0,_.Z)(function*(L,re=!1){let Be;const Ze=yield Pe(L.appConfig,dn=>{if(!X(dn))throw Le.create("not-registered");const nn=dn.authToken;if(!re&&ve(nn))return dn;if(1===nn.requestStatus)return Be=H(L,re),dn;{if(!navigator.onLine)throw Le.create("app-offline");const jn=at(dn);return Be=ne(L,jn),jn}});return Be?yield Be:Ze.authToken})).apply(this,arguments)}function H(L,re){return z.apply(this,arguments)}function z(){return(z=(0,_.Z)(function*(L,re){let Be=yield Ie(L.appConfig);for(;1===Be.authToken.requestStatus;)yield fe(100),Be=yield Ie(L.appConfig);const Ze=Be.authToken;return 0===Ze.requestStatus?en(L,re):Ze})).apply(this,arguments)}function Ie(L){return Pe(L,re=>{if(!X(re))throw Le.create("not-registered");return function st(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}(re.authToken)?Object.assign(Object.assign({},re),{authToken:{requestStatus:0}}):re})}function ne(L,re){return ot.apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(L,re){try{const Be=yield Wt(L,re),Ze=Object.assign(Object.assign({},re),{authToken:Be});return yield bn(L.appConfig,Ze),Be}catch(Be){if(!G(Be)||401!==Be.customData.serverCode&&404!==Be.customData.serverCode){const Ze=Object.assign(Object.assign({},re),{authToken:{requestStatus:0}});yield bn(L.appConfig,Ze)}else yield Ae(L.appConfig);throw Be}})).apply(this,arguments)}function X(L){return void 0!==L&&2===L.registrationStatus}function ve(L){return 2===L.requestStatus&&!function Ve(L){const re=Date.now();return re<L.creationTime||L.creationTime+L.expiresIn<re+36e5}(L)}function at(L){const re={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:re})}function Ct(){return(Ct=(0,_.Z)(function*(L){const re=L,{installationEntry:Be,registrationPromise:Ze}=yield Et(re.appConfig);return Ze?Ze.catch(console.error):en(re).catch(console.error),Be.fid})).apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(L,re=!1){const Be=L;return yield j(Be.appConfig),(yield en(Be,re)).token})).apply(this,arguments)}function j(L){return be.apply(this,arguments)}function be(){return(be=(0,_.Z)(function*(L){const{registrationPromise:re}=yield Et(L);re&&(yield re)})).apply(this,arguments)}function ir(L){return Le.create("missing-app-config-values",{valueName:L})}const q="installations",ht=L=>{const re=L.getProvider("app").getImmediate(),Be=function an(L){if(!L||!L.options)throw ir("App Configuration");if(!L.name)throw ir("App Name");const re=["projectId","apiKey","appId"];for(const Be of re)if(!L.options[Be])throw ir(Be);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}(re);return{app:re,appConfig:Be,platformLoggerProvider:(0,O._getProvider)(re,"platform-logger"),_delete:()=>Promise.resolve()}},Ke=L=>{const re=L.getProvider("app").getImmediate(),Be=(0,O._getProvider)(re,q).getImmediate();return{getId:()=>function Xe(L){return Ct.apply(this,arguments)}(Be),getToken:un=>function Q(L){return B.apply(this,arguments)}(Be,un)}};(function Oe(){(0,O._registerComponent)(new N.wA(q,ht,"PUBLIC")),(0,O._registerComponent)(new N.wA("installations-internal",Ke,"PRIVATE"))})(),(0,O.registerVersion)(_e,"0.5.5"),(0,O.registerVersion)(_e,"0.5.5","esm2017")},1877:(Tt,Me,x)=>{"use strict";x.d(Me,{in:()=>O,Yd:()=>se,Ub:()=>ce,Am:()=>ge});const _=[];var O=(()=>{return(V=O||(O={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",O;var V})();const N={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},oe=O.INFO,me={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},_e=(V,U,...Y)=>{if(U<V.logLevel)return;const Ue=(new Date).toISOString(),xe=me[U];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[xe](`[${Ue}]  ${V.name}:`,...Y)};class se{constructor(U){this.name=U,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in O))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?N[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...U),this._logHandler(this,O.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...U),this._logHandler(this,O.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,O.INFO,...U),this._logHandler(this,O.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,O.WARN,...U),this._logHandler(this,O.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...U),this._logHandler(this,O.ERROR,...U)}}function ce(V){_.forEach(U=>{U.setLogLevel(V)})}function ge(V,U){for(const Y of _){let Ue=null;U&&U.level&&(Ue=N[U.level]),Y.userLogHandler=null===V?null:(xe,je,...Le)=>{const G=Le.map(ie=>{if(null==ie)return null;if("string"==typeof ie)return ie;if("number"==typeof ie||"boolean"==typeof ie)return ie.toString();if(ie instanceof Error)return ie.message;try{return JSON.stringify(ie)}catch(ke){return null}}).filter(ie=>ie).join(" ");je>=(null!=Ue?Ue:xe.logLevel)&&V({level:O[je].toLowerCase(),message:G,args:Le,type:xe.name})}}}},5861:(Tt,Me,x)=>{"use strict";function _(N,oe,me,_e,se,ce,ge){try{var V=N[ce](ge),U=V.value}catch(Y){return void me(Y)}V.done?oe(U):Promise.resolve(U).then(_e,se)}function O(N){return function(){var oe=this,me=arguments;return new Promise(function(_e,se){var ce=N.apply(oe,me);function ge(U){_(ce,_e,se,ge,V,"next",U)}function V(U){_(ce,_e,se,ge,V,"throw",U)}ge(void 0)})}}x.d(Me,{Z:()=>O})}},Tt=>{Tt(Tt.s=4301)}]);